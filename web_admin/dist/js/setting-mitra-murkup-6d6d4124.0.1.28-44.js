(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setting-mitra-murkup-6d6d4124"],{f52d:function(e,t,o){"use strict";o.r(t);var c=o("7a23");const a={class:"col-md-12 col-sm-12"},r={class:"x_panel"},l={class:"x_content"},i={class:"table-responsive",style:{"min-height":"75vh"}},n={class:"row"},s={class:"col-sm-12 col-md-6 col-lg-3"},d={class:"col-sm-12 col-md-6 col-lg-3"},m={class:"col-sm-12 col-md-6 col-lg-3"},p={class:"col-sm-12 col-md-6 col-lg-3"},b={class:"input-group"},O={key:0},h=Object(c["createElementVNode"])("div",{class:"pt-3"},[Object(c["createElementVNode"])("div",{class:"alert alert-warning app-alert",role:"alert"},[Object(c["createElementVNode"])("div",{class:"h6 text-center"},[Object(c["createElementVNode"])("i",{class:"fa fa-info-circle"}),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" Pilih mitra dan tipe terlebih dahulu,"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" kemudian klik cari untuk melihat data ")])])],-1),j=[h],u={key:1},k={class:"row"},y={class:"col-sm-12 text-end"},V={class:"row"},g={class:"col-sm-12"},_={class:"table-responsive"},N={class:"table table-striped jambo_table bulk_action table-bordered"},E=Object(c["createElementVNode"])("th",null,"#",-1),A=Object(c["createElementVNode"])("th",null,"Detail Produk",-1),C=Object(c["createElementVNode"])("th",null,"Last Sync",-1),B={key:0},f={key:1},v={key:2},x={key:3},D={key:0},S=Object(c["createElementVNode"])("td",{colspan:"9",class:"text-center"}," Data tidak ditemukan ",-1),P=[S],w={scope:"row"},$=Object(c["createElementVNode"])("br",null,null,-1),R=Object(c["createElementVNode"])("br",null,null,-1),T={key:0},Y={key:1},M={key:2},U=Object(c["createElementVNode"])("br",null,null,-1),K=Object(c["createElementVNode"])("br",null,null,-1),q=Object(c["createElementVNode"])("br",null,null,-1),J={style:{width:"150px"}},L={style:{width:"150px"}},F={key:3,style:{width:"150px"}};function z(e,t,o,h,S,z){const G=Object(c["resolveComponent"])("select-mitra-base"),H=Object(c["resolveComponent"])("select-base"),I=Object(c["resolveComponent"])("b-button"),Q=Object(c["resolveComponent"])("statusbadge-base"),W=Object(c["resolveComponent"])("b-popover"),X=Object(c["resolveComponent"])("input-currency-base"),Z=Object(c["resolveComponent"])("b-overlay"),ee=Object(c["resolveComponent"])("paging-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",s,[Object(c["createVNode"])(G,{onOnChange:z.setMitra},null,8,["onOnChange"])]),Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(H,{options:S.types,placeholder:"Pilih Tipe",onOnChange:z.setType},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",m,[Object(c["createVNode"])(H,{options:z.categoryOptions,placeholder:"Semua Produk",onOnChange:z.setCategory},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[0]||(t[0]=e=>S.search.q=e),onKeyup:t[1]||(t[1]=Object(c["withKeys"])((...e)=>z.searchData&&z.searchData(...e),["enter"]))},null,544),[[c["vModelText"],S.search.q]]),Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>z.searchData&&z.searchData(...e))}," Cari ")])])]),S.submited?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,j)),S.submited?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,[Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",y,[Object(c["createVNode"])(I,{variant:"success",onClick:z.save},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Simpan Perubahan ")]),_:1},8,["onClick"])])]),Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",g,[Object(c["createVNode"])(Z,{show:S.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("table",N,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[E,A,C,"PRABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",B," Nominal ")):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",f," Modal ")):Object(c["createCommentVNode"])("",!0),"PASCABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",v," Admin ")):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])("PASCABAYAR"==S.options.type?"Komisi":"Markup"),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])("PASCABAYAR"==S.options.type?"Komisi Core":"Markup Core"),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])("PASCABAYAR"==S.options.type?"Komisi Broker":"Markup Broker"),1),"PASCABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",x," Komisi Mitra ")):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("tbody",null,[S.data.length<=0&&!S.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",D,P)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(S.data,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[Object(c["createElementVNode"])("td",w,Object(c["toDisplayString"])((S.options.current_page-1)*S.options.per_page+o+1),1),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.code)+" ",1),Object(c["createVNode"])(Q,{status:t.status,label:t.status_label},null,8,["status","label"]),$,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.name),1),R,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.product_code),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.dateTime(t.last_sync)),1),"PRABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",T,Object(c["toDisplayString"])(t.nominal?e.$filters.currency(t.nominal):"-"),1)):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",Y,Object(c["toDisplayString"])(t.harga_modal?e.$filters.currency(t.harga_modal):"-"),1)):Object(c["createCommentVNode"])("",!0),"PASCABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",M,Object(c["toDisplayString"])(t.admin?e.$filters.currency(t.admin):"-"),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),Object(c["createVNode"])(I,{id:"pop"+o,class:"badge"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("detail")]),_:2},1032,["id"]),Object(c["createVNode"])(W,{target:"pop"+o,triggers:"focus"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" full : "+Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),U,Object(c["createTextVNode"])(" core : "+Object(c["toDisplayString"])(t.komisi_core_old?e.$filters.currency(t.komisi_core_old):0)+" ",1),K,Object(c["createTextVNode"])(" broker : "+Object(c["toDisplayString"])(t.komisi_broker_old?e.$filters.currency(t.komisi_broker_old):0)+" ",1),q,Object(c["createTextVNode"])(" mitra : "+Object(c["toDisplayString"])(t.komisi_mitra_old?e.$filters.currency(t.komisi_mitra_old):0),1)]),_:2},1032,["target"])]),Object(c["createElementVNode"])("td",J,[S.loading?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(X,{key:0,modelValue:t.komisi_core,"onUpdate:modelValue":e=>t.komisi_core=e,class:"form-control"},null,8,["modelValue","onUpdate:modelValue"]))]),Object(c["createElementVNode"])("td",L,[S.loading?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(X,{key:0,modelValue:t.komisi_broker,"onUpdate:modelValue":e=>t.komisi_broker=e,class:"form-control"},null,8,["modelValue","onUpdate:modelValue"]))]),"PASCABAYAR"==S.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",F,[S.loading?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(X,{key:0,modelValue:t.komisi_mitra,"onUpdate:modelValue":e=>t.komisi_mitra=e,class:"form-control"},null,8,["modelValue","onUpdate:modelValue"]))])):Object(c["createCommentVNode"])("",!0)]))),128))])])])]),_:1},8,["show"])])]),S.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(ee,{key:0,modelValue:S.options.current_page,"onUpdate:modelValue":t[3]||(t[3]=e=>S.options.current_page=e),options:S.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])])])])}var G={data(){return{data:[],options:{current_page:1,total_row:0,per_page:50,type:""},search:{q:"",mitra_code:"",type:"",category:""},loading:!1,submited:!1,categories:[],types:[{code:"PASCABAYAR",name:"PASCABAYAR"},{code:"PRABAYAR",name:"PRABAYAR"}]}},mounted(){this.loadCategories()},computed:{moreParams(){return{page:this.options.current_page,per_page:this.options.per_page,q:this.search.q,mitra_code:this.search.mitra_code,type:this.search.type,category:this.search.category}},categoryOptions(){if(this.search.type){let e=this.categories.filter(e=>e.type==this.search.type);return e}return this.categories}},watch:{"options.current_page":{handler:function(){this.loadData()}},"search.start_date":{handler:function(){this.loadData()}}},methods:{setType(e){this.search.type=e?e.code:""},loadCategories(){this.loadingCategories=!0,this.$axios.get("/ppob/product-categories",{params:this.moreParams}).then(e=>{this.categories=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},setCategory(e){this.search.category=e?e.code:""},searchData(){this.search.mitra_code?this.search.type?(this.options.current_page=1,this.loadData(),this.submited=!0):this.$root.notif("Pilih tipe terlebih dahulu",{type:"error",position:"top"}):this.$root.notif("Pilih mitra terlebih dahulu",{type:"error",position:"top"})},setMitra(e){this.search.mitra_code=e?e.mitra.code:""},loadData(){this.search.mitra_code?this.search.type?(this.loading=!0,this.$axios.get(`/mitra/${this.search.mitra_code}/markup`,{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total;let t=Object.assign({},this.search);this.options.type=t.type}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})):this.$root.notif("Pilih tip terlebih dahulu",{type:"error",position:"top"}):this.$root.notif("Pilih Mitra terlebih dahulu",{type:"error",position:"top"})},save(){let e=this.data.map(e=>({product_ppob_id:e.id,product_ppob_code:e.code,type:this.search.type,komisi_full:e.komisi_full,komisi_core:e.komisi_core,komisi_broker:e.komisi_broker,komisi_mitra:e.komisi_mitra,komisi_core_old:e.komisi_core_old,komisi_broker_old:e.komisi_broker_old,komisi_mitra_old:e.komisi_mitra_old}));this.$store.dispatch("loading",!0),this.$axios.put(`/mitra/${this.search.mitra_code}/markup`,{products:e}).then(e=>{this.$root.notif(e.message,{type:"info",position:"top"})}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1),this.loadData()})}}},H=o("d959"),I=o.n(H);const Q=I()(G,[["render",z]]);t["default"]=Q}}]);