(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mutation-suppliers-91bf6078"],{"58d5":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const l={class:"col-md-12 col-sm-12"},c={class:"x_panel"},s={class:"x_content"},r={class:"table-responsive",style:{"min-height":"75vh"}},n={class:"row"},i={class:"col-sm-12 col-md-4 col-lg-4"},d={class:"col-sm-12 col-md-4 col-lg-4"},m={class:"col-sm-12 col-md-4 col-lg-4"},p={class:"input-group"},b=Object(o["createElementVNode"])("i",{class:"fa fa-gears"},null,-1),u=[b],h=Object(o["createElementVNode"])("i",{class:"fa fa-plus"},null,-1),O={key:0},j=Object(o["createElementVNode"])("div",{class:"pt-5"},[Object(o["createElementVNode"])("div",{class:"alert alert-warning app-alert",role:"alert"},[Object(o["createElementVNode"])("div",{class:"h6 text-center"},[Object(o["createElementVNode"])("i",{class:"fa fa-info-circle"}),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])(" Pilih Supplier Terlebih dahulu,"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])(" kemudian klik cari untuk melihat data ")])])],-1),g=[j],V={key:1},N={class:"row"},f={class:"col-sm-12 text-end mb-2"},_=Object(o["createElementVNode"])("i",{class:"fa fa-file-excel"},null,-1),E={class:"col-sm-12"},v={class:"table-responsive"},y={class:"table table-striped jambo_table bulk_action table-bordered"},k=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Debit"),Object(o["createElementVNode"])("th",null,"Credit"),Object(o["createElementVNode"])("th",null,"Balance"),Object(o["createElementVNode"])("th",null,"Notes"),Object(o["createElementVNode"])("th",null,"Created At")])],-1),x={scope:"row"},S={key:0},w=Object(o["createElementVNode"])("td",{colspan:"6",class:"text-center"}," Data tidak ditemukan ",-1),C=[w];function $(e,t,a,b,j,w){const $=Object(o["resolveComponent"])("input-date-picker-range-base"),B=Object(o["resolveComponent"])("select-supplier-user-base"),D=Object(o["resolveComponent"])("b-overlay"),T=Object(o["resolveComponent"])("paging-base"),P=Object(o["resolveComponent"])("form-setting"),U=Object(o["resolveComponent"])("modal-base");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])($,{start_date:j.search.start_date,"onUpdate:start_date":t[0]||(t[0]=e=>j.search.start_date=e),end_date:j.search.end_date,"onUpdate:end_date":t[1]||(t[1]=e=>j.search.end_date=e),"max-date":new Date},null,8,["start_date","end_date","max-date"])]),Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(B,{onOnChange:w.setSupplier,ref:"supplierCompoentRef",params:{use_balance_mutation:1}},null,8,["onOnChange"])]),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>w.searchData&&w.searchData(...e))}," Cari "),Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>w.showSetting&&w.showSetting(...e))},u),Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>w.addMutation&&w.addMutation(...e))},[h,Object(o["createTextVNode"])(" Tambah ")])])])]),j.submited?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",O,g)),j.submited?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",V,[Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-success",onClick:t[5]||(t[5]=(...e)=>w.goToExport&&w.goToExport(...e))},[_,Object(o["createTextVNode"])(" Export ")])]),Object(o["createElementVNode"])("div",E,[Object(o["createVNode"])(D,{show:j.loading,rounded:"sm"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("table",y,[k,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(j.data,(t,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:a},[Object(o["createElementVNode"])("td",x,Object(o["toDisplayString"])((j.options.current_page-1)*j.options.per_page+a+1),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.currency(t.debit)),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.currency(t.credit)),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.currency(t.balance)),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.notes),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.dateTime(t.created_at)),1)]))),128)),j.data.length<=0&&!j.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",S,C)):Object(o["createCommentVNode"])("",!0)])])])]),_:1},8,["show"])])]),j.data.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(T,{key:0,modelValue:j.options.current_page,"onUpdate:modelValue":t[6]||(t[6]=e=>j.options.current_page=e),options:j.options},null,8,["modelValue","options"])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)])])]),Object(o["createVNode"])(U,{modelValue:j.modalSetting,"onUpdate:modelValue":t[8]||(t[8]=e=>j.modalSetting=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(P,{supplier:j.selectedSupplier,onClose:t[7]||(t[7]=()=>{j.modalSetting=!1})},null,8,["supplier"])]),_:1},8,["modelValue"])])}a("14d9");var B=a("b166");const D={class:"col-md-12 col-sm-12"},T={class:""},P={class:""},U=Object(o["createElementVNode"])("br",null,null,-1),M={class:"item form-group"},q=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(o["createTextVNode"])("Supplier "),Object(o["createElementVNode"])("span",{class:"required"},"*")],-1),A={class:"col-md-6 col-sm-6"},F=["value"],I={class:"item form-group"},L=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(o["createTextVNode"])("Tax Percentage "),Object(o["createElementVNode"])("span",{class:"required"},"*")],-1),R={class:"col-md-6 col-sm-6"},z={class:"input-group"},J=Object(o["createElementVNode"])("span",{class:"input-group-text"},"%",-1),Y={key:0,class:"p-error"},G={class:"item form-group"},H=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align"},"Aktif ",-1),K={class:"col-md-6 col-sm-6 pt-2"},Q={class:"item form-group"},W=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align"},"Use Saldo ",-1),X={class:"col-md-6 col-sm-6 pt-2"},Z=Object(o["createElementVNode"])("div",{class:"ln_solid"},null,-1),ee={class:"item form-group"},te={class:"col-md-6 col-sm-6 offset-md-3"},ae=Object(o["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function oe(e,t,a,l,c,s){const r=Object(o["resolveComponent"])("Field"),n=Object(o["resolveComponent"])("Form"),i=Object(o["resolveComponent"])("b-overlay");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[Object(o["createVNode"])(i,{show:e.$store.state.loading,rounded:"sm"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("div",P,[U,Object(o["createVNode"])(n,{onSubmit:s.onSubmit,"validation-schema":c.schema,class:"signin-form"},{default:Object(o["withCtx"])(({errors:l})=>[Object(o["createElementVNode"])("div",M,[q,Object(o["createElementVNode"])("div",A,[Object(o["createElementVNode"])("input",{type:"text",class:"form-control",value:a.supplier.supplier_name,disabled:""},null,8,F)])]),Object(o["createElementVNode"])("div",I,[L,Object(o["createElementVNode"])("div",R,[Object(o["createElementVNode"])("div",z,[Object(o["createVNode"])(r,{name:"tax_percentage",class:"form-control",modelValue:c.form.tax_percentage,"onUpdate:modelValue":t[0]||(t[0]=e=>c.form.tax_percentage=e)},null,8,["modelValue"]),J]),l.tax_percentage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Y," *"+Object(o["toDisplayString"])(l.tax_percentage),1)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",G,[H,Object(o["createElementVNode"])("div",K,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox",name:"is_active","onUpdate:modelValue":t[1]||(t[1]=e=>c.form.is_active=e),value:"1"},null,512),[[o["vModelCheckbox"],c.form.is_active]])])]),Object(o["createElementVNode"])("div",Q,[W,Object(o["createElementVNode"])("div",X,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox",name:"use_saldo","onUpdate:modelValue":t[2]||(t[2]=e=>c.form.use_saldo=e),value:"1"},null,512),[[o["vModelCheckbox"],c.form.use_saldo]])])]),Z,Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("div",te,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[3]||(t[3]=t=>e.$emit("close"))}," Cancel "),ae])])]),_:1},8,["onSubmit","validation-schema"])])])]),_:1},8,["show"])])}var le=a("7bb1"),ce=a("506a"),se={components:{Form:le["b"],Field:le["a"]},props:{supplier:Object},data(){const e=ce["a"]({});return{id:"",imagePrev:"",form:{tax_percentage:0,is_active:0,use_saldo:0},old:{},schema:e}},watch:{supplier:{deep:!0,handler:function(){this.form.tax_percentage=this.supplier.tax_percentage,this.form.is_active=!!this.supplier.is_active,this.form.use_saldo=!!this.supplier.use_saldo}}},computed:{},methods:{reset(){this.form={}},onSubmit(e){let t=Object.assign({},e);t.is_active=this.form.is_active,t.use_saldo=this.form.use_saldo;let a=()=>this.$axios.put("/suppliers/users/"+this.supplier.id,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$eventBus.$emit("laodSupplierUser",!0),this.$emit("close"),this.$root.notif(e.message)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},upload(e){let t=e.target.files[0];const a=t.size,o=Math.round(a/1024);o>=1024?this.$root.notif("Maks file size 1 MB",{type:"error",position:"top"}):(this.fileImage=t,this.imagePrev=URL.createObjectURL(t))},deleteImage(){this.imagePrev=null,this.form.file=null,this.$refs.file.value=null,this.deleteApiImage()},deleteApiImage(){if(this.id){let e=Object.assign({},this.form);e.image_delete=1,this.$axios.post("news/"+this.id,e)}}},mounted(){}},re=a("d959"),ne=a.n(re);const ie=ne()(se,[["render",oe]]);var de=ie,me={components:{FormSetting:de},data(){return{data:[],options:{current_page:1,total_row:0,per_page:1e3},search:{q:"",start_date:Object(B["a"])(new Date,"yyyy-MM-dd"),end_date:Object(B["a"])(new Date,"yyyy-MM-dd"),supplier_code:"",mmco:""},selectedSupplier:{},modalSetting:!1,loading:!1,submited:!1}},mounted(){},computed:{moreParams(){return{per_page:this.options.per_page,page:this.options.current_page,q:this.search.q,start_date:this.search.start_date,end_date:this.search.end_date,supplier_code:this.search.supplier_code,mmco:this.search.mmco}}},watch:{"options.current_page":{handler:function(){this.loadData()}},"search.start_date":{handler:function(){this.loadData()}}},methods:{goToExport(){let e=new URLSearchParams(this.moreParams).toString(),t=this.$API_URL;window.open(t+"/supplier/mutations/export?"+e,"_blank")},showSetting(){this.search.supplier_code?this.modalSetting=!0:this.$root.notif("Pilih Supplier terlebih dahulu",{type:"error",position:"top"})},addMutation(){this.$router.push({name:"app.supplier.mutations.form"})},searchData(){this.search.supplier_code?(this.loadData(),this.submited=!0):this.$root.notif("Pilih Supplier terlebih dahulu",{type:"error",position:"top"})},setSupplier(e){e?(this.search.supplier_code=e.supplier_code,this.search.mmco=e.mmco,this.selectedSupplier=e):(this.selectedSupplier={},this.search.supplier_code="",this.search.mmco="")},loadData(){console.log(this.search),this.search.supplier_code?(this.loading=!0,this.$axios.get(`/suppliers/${this.search.supplier_code}/mutations`,{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})):this.$root.notif("Pilih Supplier terlebih dahulu",{type:"error",position:"top"})},approveItem(e){this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:"Approve"}).then(t=>{t.isConfirmed&&this._changeStatus(e)})},_changeStatus(e){this.$store.dispatch("loading",!0),this.$axios.post(`/deposit/topup-requests/${e.trx_no}/approved`,{}).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}}};const pe=ne()(me,[["render",$]]);t["default"]=pe}}]);