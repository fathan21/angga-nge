(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-2278ae59"],{2977:function(e,t,a){"use strict";var c=a("7a23");const o={class:"item form-group"},l=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("No Trx "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),s={class:"col-md-6 col-sm-6"},r=["value"],n={class:"item form-group"},i=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Status Baru "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),d={class:"col-md-6 col-sm-6"},m=Object(c["createElementVNode"])("option",{value:""},"Pilih Status",-1),b=["value"],p={key:0,class:"p-error"},O={key:0,class:"item form-group"},j=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Issued At "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),u={class:"col-md-6 col-sm-6"},h={class:"row"},V={class:"col-8"},f={class:"col-4"},N={class:"item form-group"},v=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Capthca "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),E={class:"col-md-6 col-sm-6"},g={class:"d-flex align-items-center border"},y={class:"w-75 text-center"},_=["src"],k={class:"w-25 text-center"},x={key:0,class:"p-error"},C=Object(c["createElementVNode"])("div",{class:"ln_solid"},null,-1),w={class:"item form-group"},D={class:"col-md-6 col-sm-6 offset-md-3"},B=Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function S(e,t,a,S,$,R){const T=Object(c["resolveComponent"])("Field"),M=Object(c["resolveComponent"])("Form"),U=Object(c["resolveComponent"])("b-overlay");return Object(c["openBlock"])(),Object(c["createBlock"])(U,{show:e.$store.state.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(M,{onSubmit:R.onSubmit,"validation-schema":$.schema,class:"pt-5"},{default:Object(c["withCtx"])(({errors:S})=>[Object(c["createElementVNode"])("div",o,[l,Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("input",{class:"form-control",type:"text",disabled:"disabled",value:a.data.trx_no},null,8,r)])]),Object(c["createElementVNode"])("div",n,[i,Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(T,{name:"status",class:Object(c["normalizeClass"])(["form-control",[{"p-error":$.form.status}]]),modelValue:$.form.status,"onUpdate:modelValue":t[0]||(t[0]=e=>$.form.status=e),as:"select"},{default:Object(c["withCtx"])(()=>[m,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])($.status,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{value:e.id,key:e.id},Object(c["toDisplayString"])(e.name),9,b))),128))]),_:1},8,["modelValue","class"]),S.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p," *"+Object(c["toDisplayString"])(S.status),1)):Object(c["createCommentVNode"])("",!0)])]),2==$.form.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,[j,Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",V,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>$.form.issued_date=e),class:"form-control",name:"issued_date"},null,512),[[c["vModelText"],$.form.issued_date]])]),Object(c["createElementVNode"])("div",f,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"time","onUpdate:modelValue":t[2]||(t[2]=e=>$.form.issued_time=e),class:"form-control",name:"issued_time"},null,512),[[c["vModelText"],$.form.issued_time]])])])])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",N,[v,Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("img",{src:$.captcha.img,class:"mx-auto"},null,8,_)]),Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("button",{class:"btn btn-info btn-block",type:"button",onClick:t[3]||(t[3]=(...e)=>R.getCaptcha&&R.getCaptcha(...e))}," Refresh ")])]),Object(c["createVNode"])(T,{name:"captcha",class:Object(c["normalizeClass"])(["form-control",[{"p-error":$.form.captcha}]]),placeholder:"Masukan kode di atas",modelValue:$.form.captcha,"onUpdate:modelValue":t[4]||(t[4]=e=>$.form.captcha=e)},null,8,["modelValue","class"]),S.captcha?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",x," *"+Object(c["toDisplayString"])(S.captcha),1)):Object(c["createCommentVNode"])("",!0)])]),C,Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[5]||(t[5]=t=>e.$emit("cancel"))}," Cancel "),B])])]),_:1},8,["onSubmit","validation-schema"])]),_:1},8,["show"])}var $=a("7bb1"),R=a("506a"),T=a("b166"),M={components:{Form:$["b"],Field:$["a"]},props:{data:Object},data(){const e=R["a"]({status:R["b"]().required(),captcha:R["b"]().required()});return{id:"",form:{status:"",trx_no:"",issued_date:Object(T["a"])(new Date,"yyyy-MM-dd"),issued_time:Object(T["a"])(new Date,"HH:mm")},captcha:{key:"",img:""},status:[{id:1,name:"booking"},{id:2,name:"issued"},{id:9,name:"cancelled"}],old:{},schema:e}},watch:{data:{deep:!0,handler:function(){this.getCaptcha()}}},methods:{onSubmit(e){let t=Object.assign({},e);t.captcha_key=this.captcha.key,2==t.status&&(t.issued_at=this.form.issued_date+" "+this.form.issued_time);let a=()=>this.$axios.post(`/airlines/${this.data.id}/status`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})}},mounted(){}},U=a("d959"),P=a.n(U);const F=P()(M,[["render",S]]);t["a"]=F},"40d3":function(e,t,a){"use strict";var c=a("7a23");const o={class:"table-responsive",style:{"min-height":"75vh"}},l={class:"row"},s={class:"col-sm-12"},r={class:"table-responsive"},n={class:"table table-striped jambo_table bulk_action table-bordered"},i=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"#"),Object(c["createElementVNode"])("th",null," Status "),Object(c["createElementVNode"])("th",null,"Mitra ID"),Object(c["createElementVNode"])("th",null," Rebook ID "),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("No Trx"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Waktu Issued")]),Object(c["createElementVNode"])("th",null,"Rute"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("PNR"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Waktu Rebook")]),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Waktu Pengajuan"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Timelimit")])])],-1),d={key:0},m=Object(c["createElementVNode"])("td",{colspan:"11",class:"text-center"}," Data tidak ditemukan ",-1),b=[m],p={class:"px-0",style:{"min-width":"150px"}},O=Object(c["createElementVNode"])("i",{class:"fa fa-eye"},null,-1),j=Object(c["createElementVNode"])("i",{class:"fa fa-eye"},null,-1),u=Object(c["createElementVNode"])("i",{class:"fa fa-edit"},null,-1),h=Object(c["createElementVNode"])("i",{class:"fa fa-users"},null,-1),V={key:0},f={style:{"min-width":"140px"}},N={class:"fw-bold"},v={style:{"min-width":"250px"}},E={class:"text-success"},g={class:"text-warning"},y={key:0,class:"text-info"},_={class:"text-black-50"},k={class:"",style:{"min-width":"150px"}},x={class:""},C={class:"d-flex"},w=Object(c["createElementVNode"])("div",{class:"px-3"},"-",-1),D={style:{"min-width":"140px"}},B=Object(c["createElementVNode"])("br",null,null,-1),S={style:{"min-width":"240px"}},$=Object(c["createElementVNode"])("br",null,null,-1),R={class:"text-danger"};function T(e,t,a,m,T,M){const U=Object(c["resolveComponent"])("router-link"),P=Object(c["resolveComponent"])("b-button"),F=Object(c["resolveComponent"])("statusbadge-base"),q=Object(c["resolveComponent"])("mitra-link-base"),z=Object(c["resolveComponent"])("routerLink"),A=Object(c["resolveComponent"])("b-overlay"),I=Object(c["resolveComponent"])("paging-base"),H=Object(c["resolveComponent"])("ChangeOperator"),K=Object(c["resolveComponent"])("modal-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",s,[Object(c["createVNode"])(A,{show:T.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("table",n,[i,Object(c["createElementVNode"])("tbody",null,[T.data.length<=0&&!T.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",d,b)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(T.data,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:a},[Object(c["createElementVNode"])("td",p,[Object(c["createTextVNode"])(" Â  "),Object(c["createVNode"])(U,{class:"btn btn-primary btn-sm",title:"detail transaction",target:"_blank",to:e.$router.resolve({name:"app.airlines.transaction",params:{id:t.transaction.trx_no}})},{default:Object(c["withCtx"])(()=>[O]),_:2},1032,["to"]),Object(c["createVNode"])(U,{class:"btn btn-outline-primary btn-sm",title:"detail rebook",target:"_blank",to:e.$router.resolve({name:"app.airlines.rebook-form",params:{id:t.id}})},{default:Object(c["withCtx"])(()=>[j]),_:2},1032,["to"]),M.showConfirm(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(P,{key:0,size:"sm",title:"confirm",variant:"success",onClick:e=>M.goToConfirm(t)},{default:Object(c["withCtx"])(()=>[u]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),M.showChangeOp(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(P,{key:1,size:"sm",title:"ganti operator",variant:"warning",onClick:e=>M.changeOp(t)},{default:Object(c["withCtx"])(()=>[h]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(F,{status:t.status_label,label:t.status_label},null,8,["status","label"]),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(t.rf_by?t.rf_by:"-"),1),t.active_operator?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",V," Operator: "+Object(c["toDisplayString"])(t.active_operator?t.active_operator.name:"-"),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",f,[Object(c["createVNode"])(q,{mitra:t.mitra},null,8,["mitra"])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",N,Object(c["toDisplayString"])(t.id_rebook),1)]),Object(c["createElementVNode"])("td",v,[Object(c["createElementVNode"])("div",E,[Object(c["createVNode"])(z,{target:"_blank ",class:"text-decoration-underline text-success",to:{name:"app.airlines.transaction",params:{id:t.transaction.trx_no}}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.transaction.trx_no),1)]),_:2},1032,["to"])]),Object(c["createElementVNode"])("div",g,Object(c["toDisplayString"])(t.transaction.trx_no_ext),1),t.transaction.trx_no_mitra?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",y,Object(c["toDisplayString"])(t.transaction.trx_no_mitra),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",_,Object(c["toDisplayString"])(e.$filters.dateTime(t.transaction.issued_at)),1)]),Object(c["createElementVNode"])("td",k,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.details,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"mb-2 align-items-center justify-content-between",key:t},[Object(c["createElementVNode"])("div",x,Object(c["toDisplayString"])(e.supplier_code),1),Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.org),1),w,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.des),1)])]))),128))]),Object(c["createElementVNode"])("td",D,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.transaction.pnr)+" ",1),B,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.tgl_done?e.$filters.dateTime(t.tgl_done):"-"),1)]),Object(c["createElementVNode"])("td",S,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.created_at?e.$filters.dateTime(t.created_at):"-")+" ",1),$,Object(c["createElementVNode"])("span",R,Object(c["toDisplayString"])(t.timelimit?e.$filters.dateTime(t.timelimit):"-"),1)])]))),128))])])])]),_:1},8,["show"])])]),T.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:0,modelValue:T.options.current_page,"onUpdate:modelValue":t[0]||(t[0]=e=>T.options.current_page=e),options:T.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])(K,{modelValue:T.modalOp,"onUpdate:modelValue":t[3]||(t[3]=e=>T.modalOp=e),size:"modal-lg"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(H,{data:T.modalData,users:T.users,onCancel:t[1]||(t[1]=()=>{T.modalOp=!1}),onSave:t[2]||(t[2]=()=>{T.modalOp=!1,this.searchData()})},null,8,["data","users"])]),_:1},8,["modelValue"])])}a("14d9");var M=a("b166"),U=a("6e18"),P=a("5502"),F={components:{ChangeOperator:U["a"]},props:{},data(){return{modalOp:!1,modalData:{},categories:[],airlines:[],status:[{code:1,name:"Booking"},{code:2,name:"Issued"},{code:9,name:"Cancelled"},{code:10,name:"Failed"}],data:[],users:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",start_date:Object(M["a"])(new Date,"yyyy-MM-dd"),end_date:Object(M["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:""},loading:!1}},mounted(){this.search.type=this.typeProduct,this.searchData()},computed:{...Object(P["b"])({user:"auth/user"}),moreParams(){return{page:this.options.current_page,q:this.search.q,type:"request",status:this.search.status}}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{showConfirm(e){let t=1==e.status;if(t&&!e.staff)return!0;if(t&&e.staff){let t=e.staff.phone==this.user.phone;return!!t}if(t=3==e.status,t&&!e.staff_done&&!e.rb_by)return!0;if(t&&e.staff_done&&!e.rb_by){let t=e.staff_done.phone==this.user.phone;if(t)return!0}return!1},showChangeOp(e){return!!e.active_operator},async goToConfirm(e){await this.selectedOp(e),this.$router.push({name:"app.airlines.rebook-form",params:{id:e.id,action:"confirm"}})},async selectedOp(e){let t={operator_id:"auth"},a=()=>this.$axios.post(`/airlines/rebook/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),await a().then(e=>{this.$root.notif(e.message),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},changeOp(e){this.modalData=e,this.modalOp=!0},searchData(){this.options.current_page=1,this.loadData()},loadData(){this.loading=!0,this.$axios.get("/airlines/rebook",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}},q=a("d959"),z=a.n(q);const A=z()(F,[["render",T]]);t["a"]=A},"5b94":function(e,t,a){"use strict";var c=a("7a23");const o={class:"card"},l={class:"row"},s={class:"col-3"},r={class:""},n=Object(c["createElementVNode"])("div",{class:"card-header h-4"},"Trx Saat ini",-1),i={class:"card-body"},d={class:"row mb-4"},m=Object(c["createElementVNode"])("div",{class:"col-12"},"Kode Booking",-1),b={class:"col-12"},p={class:"row mb-4"},O=Object(c["createElementVNode"])("div",{class:"col-12"},"Paxpaid",-1),j={class:"col-12"},u={class:"row mb-4"},h=Object(c["createElementVNode"])("div",{class:"col-12"},"Debit",-1),V={class:"col-12"},f={class:"col"},N={class:""},v=Object(c["createElementVNode"])("div",{class:"card-header h-4 text-capitalize"},"Konfirmasi Harga",-1),E={class:"card-body"},g={class:"row mb-4"},y={class:"col-12 text-capitalize"},_={class:"col-12"},k={class:"row mb-4"},x=Object(c["createElementVNode"])("div",{class:"col-12 text-capitalize"},"Fee",-1),C={class:"col-12"},w={class:"row mb-4"},D=Object(c["createElementVNode"])("div",{class:"col-12"},"Admin Fee",-1),B={class:"col-12"},S={key:0,class:"row mb-4"},$={class:"col-12"},R={class:"col-12"},T={class:"row mb-4"},M=Object(c["createElementVNode"])("div",{class:"col-12"},"Timelimit",-1),U={class:"col-12"},P={class:"row"},F={class:"col-12 mb-4"},q=["value"],z={class:"row mb-4"},A={class:"col-12 text-capitalize"},I={class:"col-12"},H=Object(c["createElementVNode"])("option",null,null,-1),K=Object(c["createElementVNode"])("option",{value:"M"},"Manual",-1),L=Object(c["createElementVNode"])("option",null,null,-1),W={key:0,value:"S"},J={class:"col"},G={class:""},Q=Object(c["createElementVNode"])("div",{class:"card-header h-4"},"Proses Konfirmasi",-1),X={class:"card-body"},Y={class:"row mb-4"},Z=Object(c["createElementVNode"])("div",{class:"col-12"},"Status Persetujan",-1),ee={class:"col-12"},te=Object(c["createElementVNode"])("option",{value:""},"Pilih Salah Satu",-1),ae=Object(c["createElementVNode"])("option",null,null,-1),ce=Object(c["createElementVNode"])("option",{value:"1"},"Disetujui",-1),oe=Object(c["createElementVNode"])("option",null,null,-1),le=Object(c["createElementVNode"])("option",{value:"0"},"Dibatalkan",-1),se=[te,ae,ce,oe,le],re={class:"row mb-4"},ne=Object(c["createElementVNode"])("div",{class:"col-12"},"Staff Note",-1),ie={class:"col-12"},de={key:0,class:"row mb-4"},me=Object(c["createElementVNode"])("div",{class:"col-12"},"Internal Note 2",-1),be={class:"col-12"},pe={class:"row mb-4"},Oe=Object(c["createElementVNode"])("div",{class:"col-12"},"Password",-1),je={class:"col-12"},ue={class:"row mb-4"},he=Object(c["createElementVNode"])("div",{class:"col-12"},"Kode Akses",-1),Ve={class:"col-12"},fe=["src"],Ne={class:"row mb-4"},ve={class:"col text-end"};function Ee(e,t,a,te,ae,ce){const oe=Object(c["resolveComponent"])("b-card-header"),le=Object(c["resolveComponent"])("input-currency-base"),Ee=Object(c["resolveComponent"])("b-form-input"),ge=Object(c["resolveComponent"])("b-button"),ye=Object(c["resolveComponent"])("b-input-group-append"),_e=Object(c["resolveComponent"])("b-input-group"),ke=Object(c["resolveComponent"])("b-card-body");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createVNode"])(oe,{class:"text-cepitalize",style:{"text-transform":"capitalize"}},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("h4",null,"Konfirmasi Harga "+Object(c["toDisplayString"])(a.type),1)]),_:1}),Object(c["createVNode"])(ke,null,{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",r,[n,Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",d,[m,Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>ae.formData.pnr=e),type:"text",class:"form-control",disabled:""},null,512),[[c["vModelText"],ae.formData.pnr]])])]),Object(c["createElementVNode"])("div",p,[O,Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(le,{type:"text",class:"form-control",disabled:"",modelValue:ae.formData.paxpaid,"onUpdate:modelValue":t[1]||(t[1]=e=>ae.formData.paxpaid=e)},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",u,[h,Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(le,{type:"text",class:"form-control",disabled:"",modelValue:ae.formData.debit,"onUpdate:modelValue":t[2]||(t[2]=e=>ae.formData.debit=e)},null,8,["modelValue"])])])])])]),Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",N,[v,Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",y,"ID "+Object(c["toDisplayString"])(a.type),1),Object(c["createElementVNode"])("div",_,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>ae.formRevisi["id_"+this.type]=e),disabled:""},null,512),[[c["vModelText"],ae.formRevisi["id_"+this.type]]])])]),Object(c["createElementVNode"])("div",k,[x,Object(c["createElementVNode"])("div",C,[Object(c["createVNode"])(le,{class:"form-control",modelValue:ae.formRevisi.fee,"onUpdate:modelValue":t[4]||(t[4]=e=>ae.formRevisi.fee=e),disabled:""},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",w,[D,Object(c["createElementVNode"])("div",B,[Object(c["createVNode"])(le,{type:"text",modelValue:ae.formRevisi.admin,"onUpdate:modelValue":t[5]||(t[5]=e=>ae.formRevisi.admin=e),class:"form-control",disabled:""},null,8,["modelValue"])])]),"refund"==a.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",S,[Object(c["createElementVNode"])("div",$,"Tgl "+Object(c["toDisplayString"])(a.type),1),Object(c["createElementVNode"])("div",R,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>ae.formRevisi.tgl_refund=e),type:"date",disabled:""},null,512),[[c["vModelText"],ae.formRevisi.tgl_refund]])])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",T,[M,Object(c["createElementVNode"])("div",U,[Object(c["createElementVNode"])("div",P,[Object(c["createElementVNode"])("div",F,[Object(c["createElementVNode"])("input",{class:"form-control",value:ae.formRevisi.timelimit,disabled:""},null,8,q)])])])]),Object(c["createElementVNode"])("div",z,[Object(c["createElementVNode"])("div",A,Object(c["toDisplayString"])("refund"==a.type?"Rf By":"Rb By"),1),Object(c["createElementVNode"])("div",I,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>ae.formRevisi.rf_by=e)},[H,K,L,"refund"==a.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",W,"System")):Object(c["createCommentVNode"])("",!0)],512),[[c["vModelSelect"],ae.formRevisi.rf_by]])])])])])]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("div",G,[Q,Object(c["createElementVNode"])("div",X,[Object(c["createElementVNode"])("div",Y,[Z,Object(c["createElementVNode"])("div",ee,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>ae.formRevisi.status=e)},se,512),[[c["vModelSelect"],ae.formRevisi.status]])])]),Object(c["createElementVNode"])("div",re,[ne,Object(c["createElementVNode"])("div",ie,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>ae.formRevisi.note_done=e)},"\n                  ",512),[[c["vModelText"],ae.formRevisi.note_done]])])]),"refund"==a.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",de,[me,Object(c["createElementVNode"])("div",be,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>ae.formRevisi.staff_internal_note_done=e)},"\n                  ",512),[[c["vModelText"],ae.formRevisi.staff_internal_note_done]])])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",pe,[Oe,Object(c["createElementVNode"])("div",je,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"password",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=e=>ae.formRevisi.password=e)},null,512),[[c["vModelText"],ae.formRevisi.password]])])]),Object(c["createElementVNode"])("div",ue,[he,Object(c["createElementVNode"])("div",Ve,[Object(c["createElementVNode"])("img",{src:ae.captcha.img,style:{width:"50%"},class:"mb-1 mx-auto"},null,8,fe),Object(c["createVNode"])(_e,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Ee,{id:"input-brand",modelValue:ae.formRevisi.captcha_api,"onUpdate:modelValue":t[12]||(t[12]=e=>ae.formRevisi.captcha_api=e),type:"text",required:""},null,8,["modelValue"]),Object(c["createVNode"])(ye,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(ge,{variant:"outline-success",onClick:ce.getCaptcha},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Refresh ")]),_:1},8,["onClick"])]),_:1})]),_:1})])])])])])]),Object(c["createElementVNode"])("div",Ne,[Object(c["createElementVNode"])("div",ve,[Object(c["createVNode"])(ge,{type:"button",onClick:ce.resetRevisi,class:"me-5"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Ulangi ")]),_:1},8,["onClick"]),Object(c["createVNode"])(ge,{type:"button",variant:"primary",onClick:ce.submitRevisi},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Proses ")]),_:1},8,["onClick"])])])]),_:1})])}a("14d9");var ge=a("b166"),ye=a("0dae"),_e={components:{},props:{data:{type:Object},transactions:{type:[Object,Array]},type:{type:String,default:"refund"}},data(){let e=Object(ge["a"])(new Date,"yyyy-MM-dd");return{saving:!1,formRevisi:{fee:0,admin:0,status:"",timelimit:e,timelimit_hours:Object(ge["a"])(Object(ye["a"])(new Date,2),"HH"),timelimit_minutes:10,tgl_refund:Object(ge["a"])(new Date,"yyyy-MM-dd")},user:null,formData:{},meta:{},status:"",message:"",isBusy:!1,captcha:{},hours:[],minutes:[],passengerRebook:[]}},watch:{data:{deep:!0,handler:function(){this.setData()}}},methods:{setData(){this.data&&(this.user=this.$store.getters["auth/user"],this.formData=Object.assign({},this.data.transaction),this.formRevisi=Object.assign({},this.data),this.formRevisi.status="",this.formRevisi.rf_by="M")},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})},submitRevisi(){let e=Object.assign({},this.formRevisi);if(e.form=2,e.captcha_key=this.captcha.key,this.formRevisi.timelimit_hours&&(e.timelimit=this.formRevisi.timelimit+` ${this.formRevisi.timelimit_hours}:${this.formRevisi.timelimit_minutes}:00`),e.status){if("rebook"==this.type&&(e.rb_by=this.formRevisi.rf_by,1==e.status)){let t=0;for(let e=0;e<this.passengerRebook.length;e++){const a=this.passengerRebook[e].rebook_flights.segments[0];a.pnr||(t+=1)}if(t>0||this.passengerRebook.length<=0)return void this.$root.notif("pnr tidak boleh kosong",{type:"error",position:"top"});e.paxes=Object.assign([],this.passengerRebook)}this.$store.dispatch("loading",!0),this.$axios.put(`/airlines/${this.type}/${this.data.id}`,e).then(()=>{this.$root.notif("Berhasil ubah data"),this.$router.back()}).catch(e=>{this.getCaptcha(),this.formRevisi.captcha="",this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}else this.$root.notif("status tidak boleh kosong",{type:"error",position:"top"})},resetRevisi(){this.formRevisi={fee:0,admin:0,status:"",timelimit:Object(ge["a"])(new Date,"yyyy-MM-dd"),timelimit_hours:Object(ge["a"])(Object(ye["a"])(new Date,2),"HH"),timelimit_minutes:10,tgl_refund:Object(ge["a"])(new Date,"yyyy-MM-dd")}}},computed:{},mounted(){this.$eventBus.$on("loadDataPassengerRebook",e=>{this.passengerRebook=e})},unmounted(){},created(){this.setData(),this.getCaptcha();for(let e=1;e<24;e++){let t=e;t<10&&(t="0"+t),this.hours.push(t)}for(let e=0;e<6;e++){let t=10*e;this.minutes.push(t)}}},ke=a("d959"),xe=a.n(ke);const Ce=xe()(_e,[["render",Ee]]);t["a"]=Ce},"6e18":function(e,t,a){"use strict";var c=a("7a23");const o={class:"item form-group"},l=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("No Trx "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),s={class:"col-md-6 col-sm-6"},r=["value"],n={class:"item form-group"},i=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Operator Baru "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),d={class:"col-md-6 col-sm-6"},m=Object(c["createElementVNode"])("option",{value:""},"Pilih Operator",-1),b=["value"],p={key:0,class:"p-error"},O={class:"item form-group"},j=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Capthca "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),u={class:"col-md-6 col-sm-6"},h={class:"d-flex align-items-center border"},V={class:"w-75 text-center"},f=["src"],N={class:"w-25 text-center"},v={key:0,class:"p-error"},E=Object(c["createElementVNode"])("div",{class:"ln_solid"},null,-1),g={class:"item form-group"},y={class:"col-md-6 col-sm-6 offset-md-3"},_=Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function k(e,t,a,k,x,C){const w=Object(c["resolveComponent"])("Field"),D=Object(c["resolveComponent"])("Form"),B=Object(c["resolveComponent"])("b-overlay");return Object(c["openBlock"])(),Object(c["createBlock"])(B,{show:e.$store.state.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(D,{onSubmit:C.onSubmit,"validation-schema":x.schema,class:"pt-5"},{default:Object(c["withCtx"])(({errors:k})=>[Object(c["createElementVNode"])("div",o,[l,Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("input",{class:"form-control",type:"text",disabled:"disabled",value:a.data.transaction?a.data.transaction.trx_no:""},null,8,r)])]),Object(c["createElementVNode"])("div",n,[i,Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(w,{name:"operator_id",class:Object(c["normalizeClass"])(["form-control",[{"p-error":x.form.operator_id}]]),modelValue:x.form.operator_id,"onUpdate:modelValue":t[0]||(t[0]=e=>x.form.operator_id=e),as:"select"},{default:Object(c["withCtx"])(()=>[m,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.users,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{value:e.id,key:e.id},Object(c["toDisplayString"])(e.name),9,b))),128))]),_:1},8,["modelValue","class"]),k.operator_id?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p," *"+Object(c["toDisplayString"])(k.operator_id),1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",O,[j,Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("img",{src:x.captcha.img,class:"mx-auto"},null,8,f)]),Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("button",{class:"btn btn-info btn-block",type:"button",onClick:t[1]||(t[1]=(...e)=>C.getCaptcha&&C.getCaptcha(...e))}," Refresh ")])]),Object(c["createVNode"])(w,{name:"captcha",class:Object(c["normalizeClass"])(["form-control",[{"p-error":x.form.captcha}]]),placeholder:"Masukan kode di atas",modelValue:x.form.captcha,"onUpdate:modelValue":t[2]||(t[2]=e=>x.form.captcha=e)},null,8,["modelValue","class"]),k.captcha?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",v," *"+Object(c["toDisplayString"])(k.captcha),1)):Object(c["createCommentVNode"])("",!0)])]),E,Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[3]||(t[3]=t=>e.$emit("cancel"))}," Cancel "),_])])]),_:1},8,["onSubmit","validation-schema"])]),_:1},8,["show"])}var x=a("7bb1"),C=a("506a"),w={components:{Form:x["b"],Field:x["a"]},props:{data:Object,users:Array},data(){const e=C["a"]({operator_id:C["b"]().required(),captcha:C["b"]().required()});return{id:"",form:{operator_id:"",trx_no:""},captcha:{key:"",img:""},selectedProduct:[],addonFields:[],old:{},schema:e}},watch:{data:{deep:!0,handler:function(){this.getCaptcha()}}},methods:{onSubmit(e){let t=Object.assign({},e);t.captcha_key=this.captcha.key;let a=()=>this.$axios.post(`/airlines/rebook/${this.data.id}/change-operator`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})}},mounted(){}},D=a("d959"),B=a.n(D);const S=B()(w,[["render",k]]);t["a"]=S},"8bd3":function(e,t,a){"use strict";var c=a("7a23");const o={class:"card"},l={class:"row"},s={class:"col-3"},r={class:""},n=Object(c["createElementVNode"])("div",{class:"card-header h-4"},"Trx Saat ini",-1),i={class:"card-body"},d={class:"row mb-4"},m=Object(c["createElementVNode"])("div",{class:"col-12"},"Kode Booking",-1),b={class:"col-12"},p={class:"row mb-4"},O=Object(c["createElementVNode"])("div",{class:"col-12"},"Paxpaid",-1),j={class:"col-12"},u={class:"row mb-4"},h=Object(c["createElementVNode"])("div",{class:"col-12"},"Debit",-1),V={class:"col-12"},f={class:"col"},N={class:""},v=Object(c["createElementVNode"])("div",{class:"card-header h-4 text-capitalize"},"Konfirmasi Harga",-1),E={class:"card-body"},g={class:"row mb-4"},y={class:"col-12 text-capitalize"},_={class:"col-12"},k={class:"row mb-4"},x=Object(c["createElementVNode"])("div",{class:"col-12 text-capitalize"},"Fee",-1),C={class:"col-12"},w={class:"row mb-4"},D=Object(c["createElementVNode"])("div",{class:"col-12"},"Admin Fee",-1),B={class:"col-12"},S={key:0,class:"row mb-4"},$={class:"col-12"},R={class:"col-12"},T={class:"row mb-4"},M=Object(c["createElementVNode"])("div",{class:"col-12"},"Timelimit",-1),U={class:"col-12"},P={class:"row"},F={class:"col-12 mb-4"},q=["value"],z={class:"col"},A={class:""},I=Object(c["createElementVNode"])("div",{class:"card-header h-4"},"Proses Pendebitan",-1),H={class:"card-body"},K={class:"row mb-4"},L=Object(c["createElementVNode"])("div",{class:"col-12"},"Status Persetujan",-1),W={class:"col-12"},J=Object(c["createElementVNode"])("option",{value:""},"Pilih Status",-1),G=Object(c["createElementVNode"])("option",null,null,-1),Q=Object(c["createElementVNode"])("option",{value:"1"},"Disetujui Refund ke Saldo",-1),X=Object(c["createElementVNode"])("option",null,null,-1),Y=Object(c["createElementVNode"])("option",{value:"2"},"Disetujui Saja Tanpa Refund ke Saldo",-1),Z=[J,G,Q,X,Y],ee={class:"row mb-4"},te=Object(c["createElementVNode"])("div",{class:"col-12"},"Staff Note Done 2",-1),ae={class:"col-12"},ce={class:"row mb-4"},oe=Object(c["createElementVNode"])("div",{class:"col-12"},"Password",-1),le={class:"col-12"},se={class:"row mb-4"},re=Object(c["createElementVNode"])("div",{class:"col-12"},"Kode Akses",-1),ne={class:"col-12"},ie=["src"],de={class:"row mb-4"},me={class:"col text-end"};function be(e,t,a,J,G,Q){const X=Object(c["resolveComponent"])("b-card-header"),Y=Object(c["resolveComponent"])("input-currency-base"),be=Object(c["resolveComponent"])("b-form-input"),pe=Object(c["resolveComponent"])("b-button"),Oe=Object(c["resolveComponent"])("b-input-group-append"),je=Object(c["resolveComponent"])("b-input-group"),ue=Object(c["resolveComponent"])("b-card-body");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createVNode"])(X,{class:"text-cepitalize"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("h4",null,"Konfirmasi Harga "+Object(c["toDisplayString"])(a.type),1)]),_:1}),Object(c["createVNode"])(ue,null,{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",r,[n,Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",d,[m,Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>G.formData.pnr=e),type:"text",class:"form-control",disabled:""},null,512),[[c["vModelText"],G.formData.pnr]])])]),Object(c["createElementVNode"])("div",p,[O,Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(Y,{type:"text",class:"form-control",disabled:"",modelValue:G.formData.paxpaid,"onUpdate:modelValue":t[1]||(t[1]=e=>G.formData.paxpaid=e)},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",u,[h,Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(Y,{type:"text",class:"form-control",disabled:"",modelValue:G.formData.debit,"onUpdate:modelValue":t[2]||(t[2]=e=>G.formData.debit=e)},null,8,["modelValue"])])])])])]),Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",N,[v,Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",y,"ID "+Object(c["toDisplayString"])(a.type),1),Object(c["createElementVNode"])("div",_,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>G.formRevisi["id_"+this.type]=e),disabled:""},null,512),[[c["vModelText"],G.formRevisi["id_"+this.type]]])])]),Object(c["createElementVNode"])("div",k,[x,Object(c["createElementVNode"])("div",C,[Object(c["createVNode"])(Y,{class:"form-control",modelValue:G.formRevisi.fee,"onUpdate:modelValue":t[4]||(t[4]=e=>G.formRevisi.fee=e),disabled:""},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",w,[D,Object(c["createElementVNode"])("div",B,[Object(c["createVNode"])(Y,{type:"text",modelValue:G.formRevisi.admin,"onUpdate:modelValue":t[5]||(t[5]=e=>G.formRevisi.admin=e),class:"form-control",disabled:""},null,8,["modelValue"])])]),"refund"==a.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",S,[Object(c["createElementVNode"])("div",$,"Tgl "+Object(c["toDisplayString"])(a.type),1),Object(c["createElementVNode"])("div",R,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>G.formRevisi.tgl_refund=e),type:"date",disabled:""},null,512),[[c["vModelText"],G.formRevisi.tgl_refund]])])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",T,[M,Object(c["createElementVNode"])("div",U,[Object(c["createElementVNode"])("div",P,[Object(c["createElementVNode"])("div",F,[Object(c["createElementVNode"])("input",{class:"form-control",value:G.formRevisi.timelimit,disabled:""},null,8,q)])])])])])])]),Object(c["createElementVNode"])("div",z,[Object(c["createElementVNode"])("div",A,[I,Object(c["createElementVNode"])("div",H,[Object(c["createElementVNode"])("div",K,[L,Object(c["createElementVNode"])("div",W,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>G.formRevisi.status=e)},Z,512),[[c["vModelSelect"],G.formRevisi.status]])])]),Object(c["createElementVNode"])("div",ee,[te,Object(c["createElementVNode"])("div",ae,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>G.formRevisi.note_done2=e)},"\n                  ",512),[[c["vModelText"],G.formRevisi.note_done2]])])]),Object(c["createElementVNode"])("div",ce,[oe,Object(c["createElementVNode"])("div",le,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"password",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>G.formRevisi.password=e)},null,512),[[c["vModelText"],G.formRevisi.password]])])]),Object(c["createElementVNode"])("div",se,[re,Object(c["createElementVNode"])("div",ne,[Object(c["createElementVNode"])("img",{src:G.captcha.img,style:{width:"50%"},class:"mb-1 mx-auto"},null,8,ie),Object(c["createVNode"])(je,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(be,{id:"input-brand",modelValue:G.formRevisi.captcha_api,"onUpdate:modelValue":t[10]||(t[10]=e=>G.formRevisi.captcha_api=e),type:"text",required:""},null,8,["modelValue"]),Object(c["createVNode"])(Oe,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(pe,{variant:"outline-success",onClick:Q.getCaptcha},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Refresh ")]),_:1},8,["onClick"])]),_:1})]),_:1})])])])])])]),Object(c["createElementVNode"])("div",de,[Object(c["createElementVNode"])("div",me,[Object(c["createVNode"])(pe,{type:"button",onClick:Q.resetRevisi,class:"me-5"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Ulangi ")]),_:1},8,["onClick"]),Object(c["createVNode"])(pe,{type:"button",variant:"primary",onClick:Q.submitRevisi},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Proses ")]),_:1},8,["onClick"])])])]),_:1})])}a("14d9");var pe=a("b166"),Oe=a("0dae"),je={components:{},props:{data:{type:Object},transactions:{type:[Object,Array]},type:{type:String,default:"refund"}},data(){let e=Object(pe["a"])(new Date,"yyyy-MM-dd");return{saving:!1,formRevisi:{fee:0,admin:0,status:"",timelimit:e,timelimit_hours:Object(pe["a"])(Object(Oe["a"])(new Date,2),"HH"),timelimit_minutes:10,tgl_refund:Object(pe["a"])(new Date,"yyyy-MM-dd")},user:null,formData:{},meta:{},status:"",message:"",isBusy:!1,captcha:{},hours:[],minutes:[]}},watch:{data:{depp:!0,handler:function(){this.setData()}}},methods:{setData(){this.getCaptcha(),this.data&&(this.user=this.$store.getters["auth/user"],this.formData=Object.assign({},this.data.transaction),this.formRevisi=Object.assign({},this.data),this.formRevisi.status="")},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})},submitRevisi(){let e=Object.assign({},this.formRevisi);e.form=3,e.captcha_key=this.captcha.key,"rebook"==this.type&&(e.rb_by=this.formRevisi.rf_by),this.formRevisi.timelimit_hours&&(e.timelimit=this.formRevisi.timelimit+` ${this.formRevisi.timelimit_hours}:${this.formRevisi.timelimit_minutes}:00`),this.$store.dispatch("loading",!0),this.$axios.put(`/airlines/${this.type}/${this.data.id}`,e).then(()=>{this.$root.notif("Berhasil ubah data")}).catch(e=>{this.getCaptcha(),this.formRevisi.captcha="",this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},resetRevisi(){this.formRevisi={fee:0,admin:0,status:"",timelimit:Object(pe["a"])(new Date,"yyyy-MM-dd"),timelimit_hours:Object(pe["a"])(Object(Oe["a"])(new Date,2),"HH"),timelimit_minutes:10,tgl_refund:Object(pe["a"])(new Date,"yyyy-MM-dd")}}},computed:{},created(){this.setData();for(let e=1;e<24;e++){let t=e;t<10&&(t="0"+t),this.hours.push(t)}for(let e=0;e<6;e++){let t=10*e;this.minutes.push(t)}}},ue=a("d959"),he=a.n(ue);const Ve=he()(je,[["render",be]]);t["a"]=Ve},9483:function(e,t,a){"use strict";var c=a("7a23");const o={class:"row"},l={class:"col-sm-12 col-md-4 col-lg-4"},s={class:"col-sm-12 col-md-2 col-lg-2"},r={class:"col-sm-12 col-md-3 col-lg-3"},n={class:"col-sm-12 col-md-2 col-lg-2"},i={class:"col-sm-12 col-md-1 col-lg-1"},d={class:"table-responsive",style:{"min-height":"75vh"}},m={class:"row"},b={class:"col-sm-12"},p={class:"table-responsive table-responsive-sticky"},O={class:"table table-striped jambo_table bulk_action table-bordered"},j=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])(" ID Transaksi "),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" ID Rebook ")]),Object(c["createElementVNode"])("th",null," Tanggal "),Object(c["createElementVNode"])("th",null," Status Pengajuan "),Object(c["createElementVNode"])("th",null," Mitra "),Object(c["createElementVNode"])("th",null," Supplier "),Object(c["createElementVNode"])("th",null," Rute "),Object(c["createElementVNode"])("th",null," Penumpang "),Object(c["createElementVNode"])("th",null," Nominal "),Object(c["createElementVNode"])("th",null," Admin "),Object(c["createElementVNode"])("th",null," Total Rebook "),Object(c["createElementVNode"])("th",null," Tanggal Expired "),Object(c["createElementVNode"])("th",null," PNR "),Object(c["createElementVNode"])("th",null," # ")])],-1),u={key:0},h=Object(c["createElementVNode"])("td",{colspan:"18",class:"text-center"}," Data tidak ditemukan ",-1),V=[h],f={style:{"min-width":"200px"}},N={class:"text-success"},v={class:"text-warning"},E={style:{"min-width":"150px"}},g={key:0},y=Object(c["createElementVNode"])("div",{class:""},null,-1),_={class:"d-flex"},k=Object(c["createElementVNode"])("div",{class:"px-3"},"-",-1),x={style:{"min-width":"120px"}},C={class:"text-end"},w={class:"text-end"},D={class:"text-end"},B={style:{"min-width":"140px"}};function S(e,t,a,h,S,$){const R=Object(c["resolveComponent"])("input-date-picker-range-base"),T=Object(c["resolveComponent"])("select-mitra-base"),M=Object(c["resolveComponent"])("select-base"),U=Object(c["resolveComponent"])("routerLink"),P=Object(c["resolveComponent"])("statusbadge-base"),F=Object(c["resolveComponent"])("mitra-link-base"),q=Object(c["resolveComponent"])("b-button"),z=Object(c["resolveComponent"])("b-overlay"),A=Object(c["resolveComponent"])("paging-base"),I=Object(c["resolveComponent"])("ChangeOperator"),H=Object(c["resolveComponent"])("modal-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createVNode"])(R,{start_date:S.search.start_date,"onUpdate:start_date":t[0]||(t[0]=e=>S.search.start_date=e),end_date:S.search.end_date,"onUpdate:end_date":t[1]||(t[1]=e=>S.search.end_date=e),"max-date":new Date},null,8,["start_date","end_date","max-date"])]),Object(c["createElementVNode"])("div",s,[Object(c["createVNode"])(T,{onOnChange:$.setMitra},null,8,["onOnChange"])]),Object(c["createElementVNode"])("div",r,[Object(c["createVNode"])(M,{options:S.airlines,placeholder:"Pilih maskapai",modelValue:S.search.airline,"onUpdate:modelValue":t[2]||(t[2]=e=>S.search.airline=e)},null,8,["options","modelValue"])]),Object(c["createElementVNode"])("div",n,[Object(c["createVNode"])(M,{options:S.status,placeholder:"Pilih status",onOnChange:$.setStatus},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>$.searchData&&$.searchData(...e))},"Cari")])]),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",b,[Object(c["createVNode"])(z,{show:S.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("table",O,[j,Object(c["createElementVNode"])("tbody",null,[S.data.length<=0&&!S.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",u,V)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(S.data,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:a},[Object(c["createElementVNode"])("td",f,[Object(c["createElementVNode"])("div",N,[Object(c["createVNode"])(U,{target:"_blank ",class:"text-decoration-underline text-success",to:{name:"app.airlines.transaction",params:{id:t.transaction.trx_no}}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.transaction.trx_no),1)]),_:2},1032,["to"])]),Object(c["createElementVNode"])("div",v,[Object(c["createVNode"])(U,{target:"_blank ",class:"text-decoration-underline text-warning",to:{name:"app.airlines.rebook-form",params:{id:t.id}}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.id_rebook),1)]),_:2},1032,["to"])])]),Object(c["createElementVNode"])("td",E,Object(c["toDisplayString"])(t.created_at?e.$filters.dateTime(t.created_at):"-"),1),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(P,{status:t.status_label,label:t.status_label},null,8,["status","label"]),t.active_operator?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",g," Operator: "+Object(c["toDisplayString"])(t.active_operator?t.active_operator.name:"-"),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(F,{mitra:t.mitra},null,8,["mitra"])]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.details?t.details[0].supplier_code:"-"),1),Object(c["createElementVNode"])("td",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.details,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"mb-2 align-items-center justify-content-between",key:t},[y,Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.org),1),k,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.des),1)])]))),128))]),Object(c["createElementVNode"])("td",x,Object(c["toDisplayString"])(t.details?t.details[0].passengers_map.length:"1")+" Penumpang ",1),Object(c["createElementVNode"])("td",C,Object(c["toDisplayString"])(e.$filters.currency(t.fee)),1),Object(c["createElementVNode"])("td",w,Object(c["toDisplayString"])(e.$filters.currency(t.admin)),1),Object(c["createElementVNode"])("td",D,Object(c["toDisplayString"])(e.$filters.currency(t.fee+t.admin)),1),Object(c["createElementVNode"])("td",B,Object(c["toDisplayString"])(e.$filters.dateTime(t.timelimit)),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.transaction.pnr),1),Object(c["createElementVNode"])("td",null,[$.showConfirm(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(q,{key:0,size:"sm",title:"confirm",variant:"success",onClick:e=>$.goToConfirm(t)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Proses ")]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),$.showChangeOp(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(q,{key:1,size:"sm",title:"ganti operator",variant:"warning",onClick:e=>$.changeOp(t)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Operator ")]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)])]))),128))])])])]),_:1},8,["show"])])]),S.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(A,{key:0,modelValue:S.options.current_page,"onUpdate:modelValue":t[4]||(t[4]=e=>S.options.current_page=e),options:S.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])(H,{modelValue:S.modalOp,"onUpdate:modelValue":t[7]||(t[7]=e=>S.modalOp=e),size:"modal-lg"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(I,{data:S.modalData,users:S.users,onCancel:t[5]||(t[5]=()=>{S.modalOp=!1}),onSave:t[6]||(t[6]=()=>{S.modalOp=!1,this.searchData()})},null,8,["data","users"])]),_:1},8,["modelValue"])])}a("14d9");var $=a("b166"),R=a("6e18"),T=a("5502"),M={components:{ChangeOperator:R["a"]},props:{typeProduct:{type:String,default:"pascabayar"}},data(){return{modalOp:!1,modalData:{},categories:[],airlines:[],status:[{code:1,name:"Pengajuan"},{code:2,name:"Menunggu Konfirmasi"},{code:3,name:"Konfirmasi"},{code:4,name:"Rebook"},{code:9,name:"Cancel"},{code:10,name:"Failed"}],data:[],users:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",start_date:Object($["a"])(new Date,"yyyy-MM-01"),end_date:Object($["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:""},loading:!1}},mounted(){this.search.type=this.typeProduct,this.searchData(),this.loadUsers(),this.loadAirlines()},computed:{...Object(T["b"])({user:"auth/user"}),moreParams(){return{page:this.options.current_page,q:this.search.q,start_date:this.search.start_date,end_date:this.search.end_date,user_id:this.search.user_id,status:this.search.status,airline_code:this.search.airline?this.search.airline.code:""}}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{showConfirm(e){let t=1==e.status;if(t&&!e.staff)return!0;if(t&&e.staff){let t=e.staff.phone==this.user.phone;return!!t}if(t=3==e.status,t&&!e.staff_done&&!e.rb_by)return!0;if(t&&e.staff_done&&!e.rb_by){let t=e.staff_done.phone==this.user.phone;if(t)return!0}return!1},showChangeOp(e){return!!e.active_operator},async goToConfirm(e){await this.selectedOp(e),this.$router.push({name:"app.airlines.rebook-form",params:{id:e.id,action:"confirm"}})},async selectedOp(e){let t={operator_id:"auth"},a=()=>this.$axios.post(`/airlines/rebook/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),await a().then(e=>{this.$root.notif(e.message),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},changeOp(e){this.modalData=e,this.modalOp=!0},changeStatus(e){this.modalData=e,this.modalStatus=!0},searchData(){this.options.current_page=1,this.loadData()},setMitra(e){this.search.user_id=e?e.id:""},setStatus(e){this.search.status=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/airlines/rebook",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadUsers(){this.$axios.get("/users",{params:{role:"operator"}}).then(e=>{this.loading=!1,this.users=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadAirlines(){this.$axios.get("/products",{params:{parents:"AIRD,AIRI"}}).then(e=>{this.loading=!1,this.airlines=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}}},U=a("d959"),P=a.n(U);const F=P()(M,[["render",S]]);t["a"]=F},b779:function(e,t,a){"use strict";var c=a("7a23");const o={class:"item form-group"},l=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("No Trx "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),s={class:"col-md-6 col-sm-6"},r=["value"],n={class:"item form-group"},i=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Operator Baru "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),d={class:"col-md-6 col-sm-6"},m=Object(c["createElementVNode"])("option",{value:""},"Pilih Operator",-1),b=["value"],p={key:0,class:"p-error"},O={class:"item form-group"},j=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Capthca "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),u={class:"col-md-6 col-sm-6"},h={class:"d-flex align-items-center border"},V={class:"w-75 text-center"},f=["src"],N={class:"w-25 text-center"},v={key:0,class:"p-error"},E=Object(c["createElementVNode"])("div",{class:"ln_solid"},null,-1),g={class:"item form-group"},y={class:"col-md-6 col-sm-6 offset-md-3"},_=Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function k(e,t,a,k,x,C){const w=Object(c["resolveComponent"])("Field"),D=Object(c["resolveComponent"])("Form"),B=Object(c["resolveComponent"])("b-overlay");return Object(c["openBlock"])(),Object(c["createBlock"])(B,{show:e.$store.state.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(D,{onSubmit:C.onSubmit,"validation-schema":x.schema,class:"pt-5"},{default:Object(c["withCtx"])(({errors:k})=>[Object(c["createElementVNode"])("div",o,[l,Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("input",{class:"form-control",type:"text",disabled:"disabled",value:a.data.trx_no},null,8,r)])]),Object(c["createElementVNode"])("div",n,[i,Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(w,{name:"operator_id",class:Object(c["normalizeClass"])(["form-control",[{"p-error":x.form.operator_id}]]),modelValue:x.form.operator_id,"onUpdate:modelValue":t[0]||(t[0]=e=>x.form.operator_id=e),as:"select"},{default:Object(c["withCtx"])(()=>[m,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.users,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{value:e.id,key:e.id},Object(c["toDisplayString"])(e.name),9,b))),128))]),_:1},8,["modelValue","class"]),k.operator_id?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p," *"+Object(c["toDisplayString"])(k.operator_id),1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",O,[j,Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("img",{src:x.captcha.img,class:"mx-auto"},null,8,f)]),Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("button",{class:"btn btn-info btn-block",type:"button",onClick:t[1]||(t[1]=(...e)=>C.getCaptcha&&C.getCaptcha(...e))}," Refresh ")])]),Object(c["createVNode"])(w,{name:"captcha",class:Object(c["normalizeClass"])(["form-control",[{"p-error":x.form.captcha}]]),placeholder:"Masukan kode di atas",modelValue:x.form.captcha,"onUpdate:modelValue":t[2]||(t[2]=e=>x.form.captcha=e)},null,8,["modelValue","class"]),k.captcha?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",v," *"+Object(c["toDisplayString"])(k.captcha),1)):Object(c["createCommentVNode"])("",!0)])]),E,Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[3]||(t[3]=t=>e.$emit("cancel"))}," Cancel "),_])])]),_:1},8,["onSubmit","validation-schema"])]),_:1},8,["show"])}var x=a("7bb1"),C=a("506a"),w={components:{Form:x["b"],Field:x["a"]},props:{data:Object,users:Array},data(){const e=C["a"]({operator_id:C["b"]().required(),captcha:C["b"]().required()});return{id:"",form:{operator_id:"",trx_no:""},captcha:{key:"",img:""},selectedProduct:[],addonFields:[],old:{},schema:e}},watch:{data:{deep:!0,handler:function(){this.getCaptcha()}}},methods:{onSubmit(e){let t=Object.assign({},e);t.captcha_key=this.captcha.key;let a=()=>this.$axios.post(`/airlines/${this.data.id}/change-operator`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})}},mounted(){}},D=a("d959"),B=a.n(D);const S=B()(w,[["render",k]]);t["a"]=S},cbf6:function(e,t,a){"use strict";var c=a("7a23");const o={class:"item form-group"},l=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("No Trx "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),s={class:"col-md-6 col-sm-6"},r=["value"],n={class:"item form-group"},i=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Operator Baru "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),d={class:"col-md-6 col-sm-6"},m=Object(c["createElementVNode"])("option",{value:""},"Pilih Operator",-1),b=["value"],p={key:0,class:"p-error"},O={class:"item form-group"},j=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Capthca "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),u={class:"col-md-6 col-sm-6"},h={class:"d-flex align-items-center border"},V={class:"w-75 text-center"},f=["src"],N={class:"w-25 text-center"},v={key:0,class:"p-error"},E=Object(c["createElementVNode"])("div",{class:"ln_solid"},null,-1),g={class:"item form-group"},y={class:"col-md-6 col-sm-6 offset-md-3"},_=Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function k(e,t,a,k,x,C){const w=Object(c["resolveComponent"])("Field"),D=Object(c["resolveComponent"])("Form"),B=Object(c["resolveComponent"])("b-overlay");return Object(c["openBlock"])(),Object(c["createBlock"])(B,{show:e.$store.state.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(D,{onSubmit:C.onSubmit,"validation-schema":x.schema,class:"pt-5"},{default:Object(c["withCtx"])(({errors:k})=>[Object(c["createElementVNode"])("div",o,[l,Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("input",{class:"form-control",type:"text",disabled:"disabled",value:a.data.transaction?a.data.transaction.trx_no:""},null,8,r)])]),Object(c["createElementVNode"])("div",n,[i,Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(w,{name:"operator_id",class:Object(c["normalizeClass"])(["form-control",[{"p-error":x.form.operator_id}]]),modelValue:x.form.operator_id,"onUpdate:modelValue":t[0]||(t[0]=e=>x.form.operator_id=e),as:"select"},{default:Object(c["withCtx"])(()=>[m,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.users,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{value:e.id,key:e.id},Object(c["toDisplayString"])(e.name),9,b))),128))]),_:1},8,["modelValue","class"]),k.operator_id?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p," *"+Object(c["toDisplayString"])(k.operator_id),1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",O,[j,Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("img",{src:x.captcha.img,class:"mx-auto"},null,8,f)]),Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("button",{class:"btn btn-info btn-block",type:"button",onClick:t[1]||(t[1]=(...e)=>C.getCaptcha&&C.getCaptcha(...e))}," Refresh ")])]),Object(c["createVNode"])(w,{name:"captcha",class:Object(c["normalizeClass"])(["form-control",[{"p-error":x.form.captcha}]]),placeholder:"Masukan kode di atas",modelValue:x.form.captcha,"onUpdate:modelValue":t[2]||(t[2]=e=>x.form.captcha=e)},null,8,["modelValue","class"]),k.captcha?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",v," *"+Object(c["toDisplayString"])(k.captcha),1)):Object(c["createCommentVNode"])("",!0)])]),E,Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[3]||(t[3]=t=>e.$emit("cancel"))}," Cancel "),_])])]),_:1},8,["onSubmit","validation-schema"])]),_:1},8,["show"])}var x=a("7bb1"),C=a("506a"),w={components:{Form:x["b"],Field:x["a"]},props:{data:Object,users:Array},data(){const e=C["a"]({operator_id:C["b"]().required(),captcha:C["b"]().required()});return{id:"",form:{operator_id:"",trx_no:""},captcha:{key:"",img:""},selectedProduct:[],addonFields:[],old:{},schema:e}},watch:{data:{deep:!0,handler:function(){this.getCaptcha()}}},methods:{onSubmit(e){let t=Object.assign({},e);t.captcha_key=this.captcha.key;let a=()=>this.$axios.post(`/airlines/refund/${this.data.id}/change-operator`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})}},mounted(){}},D=a("d959"),B=a.n(D);const S=B()(w,[["render",k]]);t["a"]=S},d0b0:function(e,t,a){"use strict";var c=a("7a23");const o={class:"table-responsive",style:{"min-height":"75vh"}},l={class:"row"},s={class:"col-sm-12"},r={class:"table-responsive"},n={class:"table table-striped jambo_table bulk_action table-bordered"},i=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"#"),Object(c["createElementVNode"])("th",null,"Status"),Object(c["createElementVNode"])("th",null,"Mitra ID"),Object(c["createElementVNode"])("th",null," Refund ID "),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("No Trx"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Waktu Issued")]),Object(c["createElementVNode"])("th",null,"Rute"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("PNR"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Waktu Refund")]),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Fee"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Admin Fee")]),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Waktu Pengajuan"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Timelimit")])])],-1),d={key:0},m=Object(c["createElementVNode"])("td",{colspan:"11",class:"text-center"}," Data tidak ditemukan ",-1),b=[m],p={class:"px-0",style:{"min-width":"150px"}},O=Object(c["createElementVNode"])("i",{class:"fa fa-eye"},null,-1),j=Object(c["createElementVNode"])("i",{class:"fa fa-eye"},null,-1),u=Object(c["createElementVNode"])("i",{class:"fa fa-edit"},null,-1),h=Object(c["createElementVNode"])("i",{class:"fa fa-users"},null,-1),V={key:0},f={style:{"min-width":"140px"}},N={class:"fw-bold"},v={style:{"min-width":"250px"}},E={class:"text-success"},g={class:"text-warning"},y={key:0,class:"text-info"},_={class:"text-black-50"},k={class:"",style:{"min-width":"150px"}},x={class:""},C={class:"d-flex"},w=Object(c["createElementVNode"])("div",{class:"px-3"},"-",-1),D={style:{"min-width":"140px"}},B=Object(c["createElementVNode"])("br",null,null,-1),S={style:{"min-width":"140px"}},$={class:""},R=Object(c["createElementVNode"])("br",null,null,-1),T={class:""},M={style:{"min-width":"240px"}},U=Object(c["createElementVNode"])("br",null,null,-1),P={class:"text-danger"};function F(e,t,a,m,F,q){const z=Object(c["resolveComponent"])("router-link"),A=Object(c["resolveComponent"])("b-button"),I=Object(c["resolveComponent"])("statusbadge-base"),H=Object(c["resolveComponent"])("mitra-link-base"),K=Object(c["resolveComponent"])("routerLink"),L=Object(c["resolveComponent"])("b-overlay"),W=Object(c["resolveComponent"])("paging-base"),J=Object(c["resolveComponent"])("ChangeOperator"),G=Object(c["resolveComponent"])("modal-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",s,[Object(c["createVNode"])(L,{show:F.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("table",n,[i,Object(c["createElementVNode"])("tbody",null,[F.data.length<=0&&!F.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",d,b)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(F.data,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:a},[Object(c["createElementVNode"])("td",p,[Object(c["createTextVNode"])(" Â  "),Object(c["createVNode"])(z,{class:"btn btn-primary btn-sm",title:"detail transaction",target:"_blank",to:e.$router.resolve({name:"app.airlines.transaction",params:{id:t.transaction.trx_no}})},{default:Object(c["withCtx"])(()=>[O]),_:2},1032,["to"]),Object(c["createVNode"])(z,{class:"btn btn-outline-primary btn-sm",title:"detail refund",target:"_blank",to:e.$router.resolve({name:"app.airlines.refund-form",params:{id:t.id}})},{default:Object(c["withCtx"])(()=>[j]),_:2},1032,["to"]),q.showConfirm(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(A,{key:0,size:"sm",title:"confirm",variant:"success",onClick:e=>q.goToConfirm(t)},{default:Object(c["withCtx"])(()=>[u]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),q.showChangeOp(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(A,{key:1,size:"sm",title:"ganti operator",variant:"warning",onClick:e=>q.changeOp(t)},{default:Object(c["withCtx"])(()=>[h]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(I,{status:t.status_label,label:t.status_label},null,8,["status","label"]),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(t.rf_by?t.rf_by:"-"),1),t.active_operator?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",V," Operator: "+Object(c["toDisplayString"])(t.active_operator?t.active_operator.name:"-"),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",f,[Object(c["createVNode"])(H,{mitra:t.mitra},null,8,["mitra"])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",N,Object(c["toDisplayString"])(t.id_refund),1)]),Object(c["createElementVNode"])("td",v,[Object(c["createElementVNode"])("div",E,[Object(c["createVNode"])(K,{target:"_blank ",class:"text-decoration-underline text-success",to:{name:"app.airlines.transaction",params:{id:t.transaction.trx_no}}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.transaction.trx_no),1)]),_:2},1032,["to"])]),Object(c["createElementVNode"])("div",g,Object(c["toDisplayString"])(t.transaction.trx_no_ext),1),t.transaction.trx_no_mitra?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",y,Object(c["toDisplayString"])(t.transaction.trx_no_mitra),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",_,Object(c["toDisplayString"])(e.$filters.dateTime(t.transaction.issued_at)),1)]),Object(c["createElementVNode"])("td",k,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.details,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"mb-2 align-items-center justify-content-between",key:t},[Object(c["createElementVNode"])("div",x,Object(c["toDisplayString"])(e.supplier_code),1),Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.org),1),w,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.des),1)])]))),128))]),Object(c["createElementVNode"])("td",D,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.pnrs)+" ",1),B,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.tgl_refund?e.$filters.dateTime(t.tgl_refund):"-"),1)]),Object(c["createElementVNode"])("td",S,[Object(c["createElementVNode"])("span",$,Object(c["toDisplayString"])(e.$filters.currency(t.fee)),1),R,Object(c["createElementVNode"])("span",T,Object(c["toDisplayString"])(e.$filters.currency(t.admin)),1)]),Object(c["createElementVNode"])("td",M,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.created_at?e.$filters.dateTime(t.created_at):"-")+" ",1),U,Object(c["createElementVNode"])("span",P,Object(c["toDisplayString"])(t.timelimit?e.$filters.dateTime(t.timelimit):"-"),1)])]))),128))])])])]),_:1},8,["show"])])]),F.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(W,{key:0,modelValue:F.options.current_page,"onUpdate:modelValue":t[0]||(t[0]=e=>F.options.current_page=e),options:F.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])(G,{modelValue:F.modalOp,"onUpdate:modelValue":t[3]||(t[3]=e=>F.modalOp=e),size:"modal-lg"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(J,{data:F.modalData,users:F.users,onCancel:t[1]||(t[1]=()=>{F.modalOp=!1}),onSave:t[2]||(t[2]=()=>{F.modalOp=!1,this.searchData()})},null,8,["data","users"])]),_:1},8,["modelValue"])])}a("14d9");var q=a("b166"),z=a("cbf6"),A=a("5502"),I={components:{ChangeOperator:z["a"]},props:{},data(){return{modalOp:!1,modalData:{},categories:[],airlines:[],status:[{code:1,name:"Booking"},{code:2,name:"Issued"},{code:9,name:"Cancelled"},{code:10,name:"Failed"}],data:[],users:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",start_date:Object(q["a"])(new Date,"yyyy-MM-dd"),end_date:Object(q["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:""},loading:!1}},mounted(){this.search.type=this.typeProduct,this.searchData()},computed:{...Object(A["b"])({user:"auth/user"}),moreParams(){return{page:this.options.current_page,q:this.search.q,type:"request",status:this.search.status}}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{showConfirm(e){let t=1==e.status;if(t&&!e.staff)return!0;if(t&&e.staff){let t=e.staff.phone==this.user.phone;return!!t}if(t=3==e.status,t&&!e.staff_done&&!e.rf_by)return!0;if(t&&e.staff_done&&!e.rf_by){let t=e.staff_done.phone==this.user.phone;if(t)return!0}if(t=4==e.status,t&&!e.staff_done2&&!e.rf_by)return!0;if(t&&e.staff_done2&&!e.rf_by){let t=e.staff_done2.phone==this.user.phone;if(t)return!0}return!1},showChangeOp(e){return!!e.active_operator},async goToConfirm(e){await this.selectedOp(e),this.$router.push({name:"app.airlines.refund-form",params:{id:e.id,action:"confirm"}})},async selectedOp(e){let t={operator_id:"self"},a=()=>this.$axios.post(`/airlines/refund/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),await a().then(e=>{this.$root.notif(e.message),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},changeOp(e){this.modalData=e,this.modalOp=!0},searchData(){this.options.current_page=1,this.loadData()},loadData(){this.loading=!0,this.$axios.get("/airlines/refund",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}},H=a("d959"),K=a.n(H);const L=K()(I,[["render",F]]);t["a"]=L},ec63:function(e,t,a){"use strict";var c=a("7a23");const o={class:"card"},l={class:"row"},s={class:"col-3"},r={class:""},n=Object(c["createElementVNode"])("div",{class:"card-header h-4"},"Trx Saat ini",-1),i={class:"card-body"},d={class:"row mb-4"},m=Object(c["createElementVNode"])("div",{class:"col-12"},"Kode Booking",-1),b={class:"col-12"},p={class:"row mb-4"},O=Object(c["createElementVNode"])("div",{class:"col-12"},"Paxpaid",-1),j={class:"col-12"},u={class:"row mb-4"},h=Object(c["createElementVNode"])("div",{class:"col-12"},"Debit",-1),V={class:"col-12"},f={class:"col"},N={class:""},v=Object(c["createElementVNode"])("div",{class:"card-header h-4 text-capitalize"},"Konfirmasi Harga",-1),E={class:"card-body"},g={class:"row mb-4"},y={class:"col-12 text-capitalize"},_={class:"col-12"},k={class:"row mb-4"},x=Object(c["createElementVNode"])("div",{class:"col-12 text-capitalize"},"Fee",-1),C={class:"col-12"},w={class:"row mb-4"},D=Object(c["createElementVNode"])("div",{class:"col-12"},"Admin Fee",-1),B={class:"col-12"},S={key:0,class:"row mb-4"},$={class:"col-12"},R={class:"col-12"},T={class:"row mb-4"},M=Object(c["createElementVNode"])("div",{class:"col-12"},"Timelimit",-1),U={class:"col-12"},P={class:"row"},F={class:"col-12 mb-4"},q={class:"col-6"},z=["value"],A={class:"col-6"},I=["value"],H={class:"col"},K={class:""},L=Object(c["createElementVNode"])("div",{class:"card-header h-4"},"Proses Konfirmasi",-1),W={class:"card-body"},J={class:"row mb-4"},G=Object(c["createElementVNode"])("div",{class:"col-12"},"Status Persetujan",-1),Q={class:"col-12"},X=Object(c["createElementVNode"])("option",{value:""},"Pilih Salah Satu",-1),Y=Object(c["createElementVNode"])("option",null,null,-1),Z=Object(c["createElementVNode"])("option",{value:"1"},"Disetujui",-1),ee=Object(c["createElementVNode"])("option",null,null,-1),te=Object(c["createElementVNode"])("option",{value:"0"},"Dibatalkan",-1),ae=[X,Y,Z,ee,te],ce={class:"row mb-4"},oe=Object(c["createElementVNode"])("div",{class:"col-12"},"Staff Note",-1),le={class:"col-12"},se={key:0,class:"row mb-4"},re=Object(c["createElementVNode"])("div",{class:"col-12"},"Internal Note",-1),ne={class:"col-12"},ie={class:"row mb-4"},de=Object(c["createElementVNode"])("div",{class:"col-12"},"Password",-1),me={class:"col-12"},be={class:"row mb-4"},pe=Object(c["createElementVNode"])("div",{class:"col-12"},"Kode Akses",-1),Oe={class:"col-12"},je=["src"],ue={class:"row mb-4"},he={class:"col text-end"};function Ve(e,t,a,X,Y,Z){const ee=Object(c["resolveComponent"])("b-card-header"),te=Object(c["resolveComponent"])("input-currency-base"),Ve=Object(c["resolveComponent"])("b-input-group"),fe=Object(c["resolveComponent"])("b-form-input"),Ne=Object(c["resolveComponent"])("b-button"),ve=Object(c["resolveComponent"])("b-input-group-append"),Ee=Object(c["resolveComponent"])("b-card-body");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createVNode"])(ee,{class:"text-cepitalize",style:{"text-transform":"capitalize"}},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("h4",null,"Konfirmasi Harga "+Object(c["toDisplayString"])(a.type),1)]),_:1}),Object(c["createVNode"])(Ee,null,{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",r,[n,Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",d,[m,Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Y.formData.pnr=e),type:"text",class:"form-control",disabled:""},null,512),[[c["vModelText"],Y.formData.pnr]])])]),Object(c["createElementVNode"])("div",p,[O,Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(te,{type:"text",class:"form-control",disabled:"",modelValue:Y.formData.paxpaid,"onUpdate:modelValue":t[1]||(t[1]=e=>Y.formData.paxpaid=e)},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",u,[h,Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(te,{type:"text",class:"form-control",disabled:"",modelValue:Y.formData.debit,"onUpdate:modelValue":t[2]||(t[2]=e=>Y.formData.debit=e)},null,8,["modelValue"])])])])])]),Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",N,[v,Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",y,"ID "+Object(c["toDisplayString"])(a.type),1),Object(c["createElementVNode"])("div",_,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>Y.formRevisi["id_"+this.type]=e),disabled:""},null,512),[[c["vModelText"],Y.formRevisi["id_"+this.type]]])])]),Object(c["createElementVNode"])("div",k,[x,Object(c["createElementVNode"])("div",C,[Object(c["createVNode"])(te,{class:"form-control",modelValue:Y.formRevisi.fee,"onUpdate:modelValue":t[4]||(t[4]=e=>Y.formRevisi.fee=e)},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",w,[D,Object(c["createElementVNode"])("div",B,[Object(c["createVNode"])(te,{type:"text",modelValue:Y.formRevisi.admin,"onUpdate:modelValue":t[5]||(t[5]=e=>Y.formRevisi.admin=e),class:"form-control"},null,8,["modelValue"])])]),"refund"==a.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",S,[Object(c["createElementVNode"])("div",$,"Tgl "+Object(c["toDisplayString"])(a.type),1),Object(c["createElementVNode"])("div",R,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>Y.formRevisi.tgl_refund=e),type:"date"},null,512),[[c["vModelText"],Y.formRevisi.tgl_refund]])])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",T,[M,Object(c["createElementVNode"])("div",U,[Object(c["createElementVNode"])("div",P,[Object(c["createElementVNode"])("div",F,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>Y.formRevisi.timelimit=e),type:"date"},null,512),[[c["vModelText"],Y.formRevisi.timelimit]])]),Object(c["createElementVNode"])("div",q,[Object(c["createTextVNode"])(" Jam "),Object(c["createVNode"])(Ve,null,{default:Object(c["withCtx"])(()=>[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>Y.formRevisi.timelimit_hours=e)},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Y.hours,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:t,value:e},Object(c["toDisplayString"])(e),9,z))),128))],512),[[c["vModelSelect"],Y.formRevisi.timelimit_hours]])]),_:1})]),Object(c["createElementVNode"])("div",A,[Object(c["createTextVNode"])(" Menit "),Object(c["createVNode"])(Ve,null,{default:Object(c["withCtx"])(()=>[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>Y.formRevisi.timelimit_minutes=e)},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Y.minutes,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:t,value:e},Object(c["toDisplayString"])(e),9,I))),128))],512),[[c["vModelSelect"],Y.formRevisi.timelimit_minutes]])]),_:1})])])])])])])]),Object(c["createElementVNode"])("div",H,[Object(c["createElementVNode"])("div",K,[L,Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("div",J,[G,Object(c["createElementVNode"])("div",Q,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>Y.formRevisi.status=e)},ae,512),[[c["vModelSelect"],Y.formRevisi.status]])])]),Object(c["createElementVNode"])("div",ce,[oe,Object(c["createElementVNode"])("div",le,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[11]||(t[11]=e=>Y.formRevisi.staff_note=e)},"\n                  ",512),[[c["vModelText"],Y.formRevisi.staff_note]])])]),"refund"==a.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",se,[re,Object(c["createElementVNode"])("div",ne,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[12]||(t[12]=e=>Y.formRevisi.staff_internal_note=e)},"\n                  ",512),[[c["vModelText"],Y.formRevisi.staff_internal_note]])])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",ie,[de,Object(c["createElementVNode"])("div",me,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"password",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=e=>Y.formRevisi.password=e)},null,512),[[c["vModelText"],Y.formRevisi.password]])])]),Object(c["createElementVNode"])("div",be,[pe,Object(c["createElementVNode"])("div",Oe,[Object(c["createElementVNode"])("img",{src:Y.captcha.img,style:{width:"50%"},class:"mb-1 mx-auto"},null,8,je),Object(c["createVNode"])(Ve,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(fe,{id:"input-brand",modelValue:Y.formRevisi.captcha_api,"onUpdate:modelValue":t[14]||(t[14]=e=>Y.formRevisi.captcha_api=e),type:"text",required:""},null,8,["modelValue"]),Object(c["createVNode"])(ve,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Ne,{variant:"outline-success",onClick:Z.getCaptcha},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Refresh ")]),_:1},8,["onClick"])]),_:1})]),_:1})])])])])])]),Object(c["createElementVNode"])("div",ue,[Object(c["createElementVNode"])("div",he,[Object(c["createVNode"])(Ne,{type:"button",onClick:Z.resetRevisi,class:"me-5"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Ulangi ")]),_:1},8,["onClick"]),Object(c["createVNode"])(Ne,{type:"button",variant:"primary",onClick:Z.submitRevisi},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Proses ")]),_:1},8,["onClick"])])])]),_:1})])}a("14d9");var fe=a("b166"),Ne=a("0dae"),ve={components:{},props:{data:{type:Object},transactions:{type:[Object,Array]},type:{type:String,default:"refund"}},data(){let e=Object(fe["a"])(new Date,"yyyy-MM-dd");return{saving:!1,formRevisi:{fee:0,admin:0,status:"",timelimit:e,timelimit_hours:Object(fe["a"])(Object(Ne["a"])(new Date,2),"HH"),timelimit_minutes:10,tgl_refund:Object(fe["a"])(new Date,"yyyy-MM-dd")},user:null,formData:{},meta:{},status:"",message:"",isBusy:!1,captcha:{},hours:[],minutes:[]}},watch:{data:{depp:!0,handler:function(){this.setData()}}},methods:{setData(){this.getCaptcha(),this.data&&(this.user=this.$store.getters["auth/user"],this.formData=Object.assign({},this.data.transaction),this.formRevisi["id_"+this.type]=this.data["id_"+this.type])},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})},submitRevisi(){let e=Object.assign({},this.formRevisi);e.form=1,e.captcha_key=this.captcha.key,e.timelimit=this.formRevisi.timelimit+` ${this.formRevisi.timelimit_hours}:${this.formRevisi.timelimit_minutes}:00`,this.$store.dispatch("loading",!0),this.$axios.put(`/airlines/${this.type}/${this.data.id}`,e).then(()=>{this.$root.notif("Berhasil ubah data"),this.$router.back()}).catch(e=>{this.getCaptcha(),this.formRevisi.captcha="",this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},resetRevisi(){this.formRevisi={fee:0,admin:0,status:"",timelimit:Object(fe["a"])(new Date,"yyyy-MM-dd"),timelimit_hours:Object(fe["a"])(Object(Ne["a"])(new Date,2),"HH"),timelimit_minutes:10,tgl_refund:Object(fe["a"])(new Date,"yyyy-MM-dd")}}},computed:{},created(){this.setData();for(let e=1;e<24;e++){let t=e;t<10&&(t="0"+t),this.hours.push(t)}for(let e=0;e<6;e++){let t=10*e;this.minutes.push(t)}}},Ee=a("d959"),ge=a.n(Ee);const ye=ge()(ve,[["render",Ve]]);t["a"]=ye},fb98:function(e,t,a){"use strict";var c=a("7a23");const o={class:""},l={class:"row"},s={class:"col-sm-12 col-md-4 col-lg-4"},r={class:"col-sm-12 col-md-2 col-lg-2"},n={class:"col-sm-12 col-md-3 col-lg-3"},i={class:"col-sm-12 col-md-2 col-lg-2"},d={class:"col-sm-12 col-md-1 col-lg-1"},m={class:"table-responsive",style:{"min-height":"75vh"}},b={class:"row"},p={class:"col-sm-12"},O={class:"table-responsive table-responsive-sticky"},j={class:"table table-striped jambo_table bulk_action table-bordered"},u=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])(" ID Transaksi "),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" ID Refund ")]),Object(c["createElementVNode"])("th",null," Tanggal Pengajuan "),Object(c["createElementVNode"])("th",null," Status Pengajuan "),Object(c["createElementVNode"])("th",null," Tanggal Refund "),Object(c["createElementVNode"])("th",null," Mitra "),Object(c["createElementVNode"])("th",null," Supplier "),Object(c["createElementVNode"])("th",null," Rute "),Object(c["createElementVNode"])("th",null," Nominal "),Object(c["createElementVNode"])("th",null," Admin "),Object(c["createElementVNode"])("th",null," Total Refund "),Object(c["createElementVNode"])("th",null," Tanggal Expired "),Object(c["createElementVNode"])("th",null," Refund By "),Object(c["createElementVNode"])("th",null," PNR "),Object(c["createElementVNode"])("th",null," # ")])],-1),h={key:0},V=Object(c["createElementVNode"])("td",{colspan:"18",class:"text-center"}," Data tidak ditemukan ",-1),f=[V],N={style:{"min-width":"200px"}},v={class:"text-success"},E={class:"text-warning"},g={style:{"min-width":"150px"}},y={key:0},_={style:{"min-width":"100px"}},k=Object(c["createElementVNode"])("div",{class:""},null,-1),x={class:"d-flex"},C=Object(c["createElementVNode"])("div",{class:"px-3"},"-",-1),w={class:"text-end"},D={class:"text-end"},B={class:"text-end"},S={style:{"min-width":"140px"}};function $(e,t,a,V,$,R){const T=Object(c["resolveComponent"])("input-date-picker-range-base"),M=Object(c["resolveComponent"])("select-mitra-base"),U=Object(c["resolveComponent"])("select-base"),P=Object(c["resolveComponent"])("routerLink"),F=Object(c["resolveComponent"])("statusbadge-base"),q=Object(c["resolveComponent"])("mitra-link-base"),z=Object(c["resolveComponent"])("b-button"),A=Object(c["resolveComponent"])("b-overlay"),I=Object(c["resolveComponent"])("paging-base"),H=Object(c["resolveComponent"])("ChangeOperator"),K=Object(c["resolveComponent"])("modal-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",s,[Object(c["createVNode"])(T,{start_date:$.search.start_date,"onUpdate:start_date":t[0]||(t[0]=e=>$.search.start_date=e),end_date:$.search.end_date,"onUpdate:end_date":t[1]||(t[1]=e=>$.search.end_date=e),"max-date":new Date},null,8,["start_date","end_date","max-date"])]),Object(c["createElementVNode"])("div",r,[Object(c["createVNode"])(M,{onOnChange:R.setMitra},null,8,["onOnChange"])]),Object(c["createElementVNode"])("div",n,[Object(c["createVNode"])(U,{options:$.airlines,placeholder:"Pilih maskapai",modelValue:$.search.airline,"onUpdate:modelValue":t[2]||(t[2]=e=>$.search.airline=e)},null,8,["options","modelValue"])]),Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(U,{options:$.status,placeholder:"Pilih status",onOnChange:R.setStatus},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>R.searchData&&R.searchData(...e))},"Cari")])]),Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",p,[Object(c["createVNode"])(A,{show:$.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("table",j,[u,Object(c["createElementVNode"])("tbody",null,[$.data.length<=0&&!$.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",h,f)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])($.data,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:a},[Object(c["createElementVNode"])("td",N,[Object(c["createElementVNode"])("div",v,[Object(c["createVNode"])(P,{target:"_blank ",class:"text-decoration-underline text-success",to:{name:"app.airlines.transaction",params:{id:t.transaction.trx_no}}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.transaction.trx_no),1)]),_:2},1032,["to"])]),Object(c["createElementVNode"])("div",E,[Object(c["createVNode"])(P,{target:"_blank ",class:"text-decoration-underline text-warning",to:{name:"app.airlines.refund-form",params:{id:t.id}}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.id_refund),1)]),_:2},1032,["to"])])]),Object(c["createElementVNode"])("td",g,Object(c["toDisplayString"])(t.created_at?e.$filters.dateTime(t.created_at):"-"),1),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(F,{status:t.status_label,label:t.status_label},null,8,["status","label"]),t.active_operator?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",y," Operator: "+Object(c["toDisplayString"])(t.active_operator?t.active_operator.name:"-"),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",_,Object(c["toDisplayString"])(t.tgl_refund?e.$filters.date(t.tgl_refund):"-"),1),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(q,{mitra:t.mitra},null,8,["mitra"])]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.details?t.details[0].supplier_code:"-"),1),Object(c["createElementVNode"])("td",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.details,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"mb-2 align-items-center justify-content-between",key:t},[k,Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.org),1),C,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.des),1)])]))),128))]),Object(c["createElementVNode"])("td",w,Object(c["toDisplayString"])(e.$filters.currency(t.fee)),1),Object(c["createElementVNode"])("td",D,Object(c["toDisplayString"])(e.$filters.currency(t.admin)),1),Object(c["createElementVNode"])("td",B,Object(c["toDisplayString"])(e.$filters.currency(t.fee-t.admin)),1),Object(c["createElementVNode"])("td",S,Object(c["toDisplayString"])(e.$filters.dateTime(t.timelimit)),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.rf_by?t.rf_by:"-"),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.pnrs?t.pnrs:"-"),1),Object(c["createElementVNode"])("td",null,[R.showConfirm(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(z,{key:0,size:"sm",title:"confirm",variant:"success",onClick:e=>R.goToConfirm(t)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Proses ")]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),R.showChangeOp(t)?(Object(c["openBlock"])(),Object(c["createBlock"])(z,{key:1,size:"sm",title:"ganti operator",variant:"warning",onClick:e=>R.changeOp(t)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Operator ")]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)])]))),128))])])])]),_:1},8,["show"])])]),$.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:0,modelValue:$.options.current_page,"onUpdate:modelValue":t[4]||(t[4]=e=>$.options.current_page=e),options:$.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])(K,{modelValue:$.modalOp,"onUpdate:modelValue":t[7]||(t[7]=e=>$.modalOp=e),size:"modal-lg"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(H,{data:$.modalData,users:$.users,onCancel:t[5]||(t[5]=()=>{$.modalOp=!1}),onSave:t[6]||(t[6]=()=>{$.modalOp=!1,this.searchData()})},null,8,["data","users"])]),_:1},8,["modelValue"])])}a("14d9");var R=a("b166"),T=a("cbf6"),M=a("5502"),U={components:{ChangeOperator:T["a"]},props:{typeProduct:{type:String,default:"pascabayar"}},data(){return{modalOp:!1,modalData:{},categories:[],airlines:[],status:[{code:1,name:"Pengajuan"},{code:2,name:"Menunggu Konfirmasi"},{code:3,name:"Konfirmasi"},{code:4,name:"Refund"},{code:9,name:"Cancel"},{code:10,name:"Failed"}],data:[],users:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",start_date:Object(R["a"])(new Date,"yyyy-MM-01"),end_date:Object(R["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:""},loading:!1}},mounted(){this.search.type=this.typeProduct,this.searchData(),this.loadUsers(),this.loadAirlines()},computed:{...Object(M["b"])({user:"auth/user"}),moreParams(){return{page:this.options.current_page,q:this.search.q,start_date:this.search.start_date,end_date:this.search.end_date,user_id:this.search.user_id,status:this.search.status,airline_code:this.search.airline?this.search.airline.code:""}}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{showConfirm(e){let t=1==e.status;if(t&&!e.staff)return!0;if(t&&e.staff){let t=e.staff.phone==this.user.phone;return!!t}if(t=3==e.status,t&&!e.staff_done&&!e.rf_by)return!0;if(t&&e.staff_done&&!e.rf_by){let t=e.staff_done.phone==this.user.phone;if(t)return!0}if(t=4==e.status,t&&!e.staff_done2&&!e.rf_by)return!0;if(t&&e.staff_done2&&!e.rf_by){let t=e.staff_done2.phone==this.user.phone;if(t)return!0}return!1},showChangeOp(e){return!!e.active_operator},async goToConfirm(e){await this.selectedOp(e),this.$router.push({name:"app.airlines.refund-form",params:{id:e.id,action:"confirm"}})},async selectedOp(e){let t={operator_id:"self"},a=()=>this.$axios.post(`/airlines/refund/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),await a().then(e=>{this.$root.notif(e.message),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},changeOp(e){this.modalData=e,this.modalOp=!0},changeStatus(e){this.modalData=e,this.modalStatus=!0},searchData(){this.options.current_page=1,this.loadData()},setMitra(e){this.search.user_id=e?e.id:""},setStatus(e){this.search.status=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/airlines/refund",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadUsers(){this.$axios.get("/users",{params:{role:"operator"}}).then(e=>{this.loading=!1,this.users=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadAirlines(){this.$axios.get("/products",{params:{parents:"AIRD,AIRI"}}).then(e=>{this.loading=!1,this.airlines=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}}},P=a("d959"),F=a.n(P);const q=F()(U,[["render",$]]);t["a"]=q}}]);