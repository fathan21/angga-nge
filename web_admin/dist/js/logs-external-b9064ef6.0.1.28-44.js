(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["logs-external-b9064ef6"],{"1a78":function(e,t,l){"use strict";l.r(t);var a=l("7a23");const o={class:"col-md-12 col-sm-12"},c={class:"x_panel"},s=Object(a["createElementVNode"])("div",{class:"x_title"},[Object(a["createElementVNode"])("h2"),Object(a["createElementVNode"])("ul",{class:"nav navbar-right panel_toolbox"}),Object(a["createElementVNode"])("div",{class:"clearfix"})],-1),r={class:"x_content"},d={class:"row align-items-end mb-2"},n={class:"col-12 col-sm-6 col-md-3"},i={class:"row"},m={class:"col-7",style:{"padding-right":"0px"}},p={class:"col-4",style:{padding:"0px"}},b={class:"col-12 col-sm-6 col-md-3"},u=Object(a["createElementVNode"])("div",null,null,-1),j={class:"row"},O={class:"col-7",style:{"padding-right":"0px"}},h={class:"col-4",style:{padding:"0px"}},V={class:"col-12 col-sm-3 col-md-2"},N={class:"col-12 col-sm-3 col-md-2"},g={class:"col-12 col-sm-3 col-md-2 col-lg-2"},E={class:"col-12 col-sm-3 col-md-2 mt-2"},f={class:"input-group mb-0"},v={key:0,class:"row"},_={class:"col-sm-12"},y={class:"table-responsive"},x={class:"table table-striped jambo_table bulk_action table-bordered"},w=["onClick"],D=["onClick"],k={scope:"row"},C={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis",width:"150px"}},S={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis",width:"150px"}},B={style:{"min-width":"150px"}},M={key:0},U=Object(a["createElementVNode"])("td",{colspan:"10",class:"text-center"}," Data tidak ditemukan ",-1),q=[U],T=Object(a["createElementVNode"])("div",{class:"item form-group mb-0 pt-2"},[Object(a["createElementVNode"])("div",{class:"col-md-6 col-sm-6 offset-md-3"},[Object(a["createElementVNode"])("div",{class:"h4 mb-0"}," Log Detail ")])],-1),F=Object(a["createElementVNode"])("div",{class:"ln_solid"},null,-1),L={class:""},P={class:"item form-group"},$=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("URL "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),R={class:"col-md-9"},A=["value"],K={class:"item form-group"},z=Object(a["createElementVNode"])("label",{class:"col-form-label col-12 col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Created At "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),J={class:"col-12 col-md-9"},I=["value"],G={class:"item form-group"},H=Object(a["createElementVNode"])("label",{class:"col-form-label col-12 col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Params "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),Q={class:"col-12 col-md-9"},W=["value"],X={class:"item form-group"},Y=Object(a["createElementVNode"])("label",{class:"col-form-label col-12 col-md-3 col-sm-3 label-align",for:"first-name"},"Response ",-1),Z={class:"col-12 col-md-9"},ee=["value"],te=Object(a["createElementVNode"])("div",{class:"ln_solid"},null,-1),le={class:"item form-group"},ae={class:"col-md-6 col-sm-6 offset-md-3"};function oe(e,t,l,U,oe,ce){const se=Object(a["resolveComponent"])("select-base"),re=Object(a["resolveComponent"])("b-overlay"),de=Object(a["resolveComponent"])("paging-base"),ne=Object(a["resolveComponent"])("modal-base");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",c,[s,Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("div",m,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>oe.search.start_date=e),class:"form-control"},null,512),[[a["vModelText"],oe.search.start_date]])]),Object(a["createElementVNode"])("div",p,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=e=>oe.search.start_time=e),class:"form-control"},null,512),[[a["vModelText"],oe.search.start_time]])])])]),Object(a["createElementVNode"])("div",b,[u,Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("div",O,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>oe.search.end_date=e),class:"form-control"},null,512),[[a["vModelText"],oe.search.end_date]])]),Object(a["createElementVNode"])("div",h,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"time","onUpdate:modelValue":t[3]||(t[3]=e=>oe.search.end_time=e),class:"form-control"},null,512),[[a["vModelText"],oe.search.end_time]])])])]),Object(a["createElementVNode"])("div",V,[Object(a["createVNode"])(se,{options:oe.suppliers,placeholder:"Pilih Supplier",modelValue:oe.search.supplier,"onUpdate:modelValue":t[4]||(t[4]=e=>oe.search.supplier=e)},null,8,["options","modelValue"])]),Object(a["createElementVNode"])("div",N,[Object(a["createVNode"])(se,{options:oe.fungsi,placeholder:"Pilih Fungsi",modelValue:oe.search.fungsi,"onUpdate:modelValue":t[5]||(t[5]=e=>oe.search.fungsi=e)},null,8,["options","modelValue"])]),Object(a["createElementVNode"])("div",g,[Object(a["createVNode"])(se,{options:oe.headers.map(e=>({id:e.field,name:e.label})),placeholder:"Semua Kolom",modelValue:oe.search.field,"onUpdate:modelValue":t[6]||(t[6]=e=>oe.search.field=e)},null,8,["options","modelValue"])]),Object(a["createElementVNode"])("div",E,[Object(a["createElementVNode"])("div",f,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[7]||(t[7]=e=>oe.search.q=e),onKeyup:t[8]||(t[8]=Object(a["withKeys"])((...e)=>ce.searchData&&ce.searchData(...e),["enter"]))},null,544),[[a["vModelText"],oe.search.q]]),Object(a["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[9]||(t[9]=(...e)=>ce.searchData&&ce.searchData(...e))},"Lihat")])])]),oe.isSubmited?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createElementVNode"])("div",_,[Object(a["createVNode"])(re,{show:oe.loading,rounded:"sm"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("table",x,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(oe.headers,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",{key:t,class:Object(a["normalizeClass"])([e.sortable?" sortable ":"",e.field==oe.options.sort&&"asc"==oe.options.order?" asc ":e.field==oe.options.sort&&"desc"==oe.options.order?" desc ":"both"]),onClick:t=>e.sortable?ce.sorter(e.field):null},Object(a["toDisplayString"])(e.label),11,w))),128))])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(oe.data,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t,class:"cursor-pointer",onClick:t=>ce.openModal(e)},[Object(a["createElementVNode"])("td",k,Object(a["toDisplayString"])((oe.options.current_page-1)*oe.options.per_page+t+1),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.supplier_code),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.function),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",C,Object(a["toDisplayString"])(e.params),1)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",S,Object(a["toDisplayString"])(e.response),1)]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.url),1),Object(a["createElementVNode"])("td",B,Object(a["toDisplayString"])(e.created_at),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.mitra?e.mitra.mmid:""),1)],8,D))),128)),oe.data.length<=0&&!oe.loading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",M,q)):Object(a["createCommentVNode"])("",!0)])])])]),_:1},8,["show"])])])):Object(a["createCommentVNode"])("",!0),oe.data.length>0?(Object(a["openBlock"])(),Object(a["createBlock"])(de,{key:1,modelValue:oe.options.current_page,"onUpdate:modelValue":t[10]||(t[10]=e=>oe.options.current_page=e),options:oe.options},null,8,["modelValue","options"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(ne,{modelValue:oe.modal,"onUpdate:modelValue":t[12]||(t[12]=e=>oe.modal=e),size:"modal-lg"},{default:Object(a["withCtx"])(()=>[T,F,Object(a["createElementVNode"])("div",L,[Object(a["createElementVNode"])("div",P,[$,Object(a["createElementVNode"])("div",R,[Object(a["createElementVNode"])("input",{class:"form-control",type:"text",value:oe.modalData.url},null,8,A)])]),Object(a["createElementVNode"])("div",K,[z,Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("input",{class:"form-control",type:"text",value:oe.modalData.created_at},null,8,I)])]),Object(a["createElementVNode"])("div",G,[H,Object(a["createElementVNode"])("div",Q,[Object(a["createElementVNode"])("textarea",{class:"form-control",type:"text",value:oe.modalData.params,rows:"5"},null,8,W)])]),Object(a["createElementVNode"])("div",X,[Y,Object(a["createElementVNode"])("div",Z,[Object(a["createElementVNode"])("textarea",{class:"form-control",type:"text",value:oe.modalData.response,rows:"10"},null,8,ee)])]),te,Object(a["createElementVNode"])("div",le,[Object(a["createElementVNode"])("div",ae,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[11]||(t[11]=e=>oe.modal=!1)}," Cancel ")])])])]),_:1},8,["modelValue"])])])}l("14d9");var ce=l("b166"),se={data(){return{modalData:{},modal:!1,fungsi:[],suppliers:[],headers:[{label:"#",sortable:!1},{label:"Supplier",field:"supplier_code",sortable:!0},{label:"Function",field:"function",sortable:!0},{label:"Params",field:"params",sortable:!0},{label:"Response",field:"response",sortable:!0},{label:"URL",field:"url",sortable:!0},{label:"created At",field:"created At",sortable:!0},{label:"Mitra",field:"user_id",sortable:!0}],data:[],options:{current_page:1,total_row:0,per_page:100,sort:"created_at",order:"desc"},isSubmited:!1,search:{q:"",fungsi:"",supplier:"",per_page:100,start_date:Object(ce["a"])(new Date,"yyyy-MM-dd"),end_date:Object(ce["a"])(new Date,"yyyy-MM-dd"),start_time:"",end_time:""},mitras:[],loading:!1}},mounted(){this.loadSuppliers(),this.loadFungsi(),this.loadMitra().then(e=>{this.mitras=e.data}).finally(()=>{})},computed:{moreParams(){return{fungsi:this.search.fungsi?this.search.fungsi.id:"",supplier_code:this.search.supplier?this.search.supplier.id:"",page:this.options.current_page,q:this.search.q,sort:this.options.sort+"|"+this.options.order,per_page:this.options.per_page,start_date:this.search.start_date+" "+this.search.start_time,end_date:this.search.end_date+" "+this.search.end_time}}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{openModal(e){this.modalData=e,this.modal=!0},canEdit(e){return!(["admin","mitra"].indexOf(e.name)>-1)},sorter(e){this.options.sort==e?this.options.order="asc"==this.options.order?"desc":"asc":(this.options.sort=e,this.options.order="asc"),this.loadData()},searchData(){this.options.current_page=1,this.loadData(),this.isSubmited=!0},loadData(){this.loading=!0,this.$axios.get("/logs/external",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data.map(e=>(e.mitra=this.mitras.find(t=>t.id==e.user_id),e)),this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadSuppliers(){this.$axios.get("/logs/external-suppliers",{}).then(e=>{this.suppliers=e.data})},loadMitra(){return this.loading=!0,this.$axios.get("/logs/mitra",{})},loadFungsi(){this.$axios.get("/logs/external-fungsi",{}).then(e=>{this.fungsi=e.data})},editItem(e){this.$router.push({name:"app.acl.form",params:{id:e.id}})}}},re=l("d959"),de=l.n(re);const ne=de()(se,[["render",oe]]);t["default"]=ne}}]);