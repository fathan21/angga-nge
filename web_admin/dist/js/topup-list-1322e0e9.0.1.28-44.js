(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["topup-list-1322e0e9"],{baaa:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c={class:"col-md-12 col-sm-12"},l={class:"x_panel"},n={class:"x_content"},r={class:"table-responsive",style:{"min-height":"80vh"}},s={class:"row"},d={class:"col-sm-12 col-md-4 col-lg-4"},i={class:"col-sm-12 col-md-2 col-lg-2"},p=Object(o["createStaticVNode"])('<option value="">Semua Status</option><option value="0"> pending </option><option value="1"> approved </option><option value="4"> failed </option><option value="3"> canceled </option><option value="5"> expired </option><option value="6"> rejected </option>',7),b=[p],m={class:"col-sm-12 col-md-3 col-lg-3"},u={class:"col-sm-12 col-md-3 col-lg-3"},O={class:"input-group"},j={class:"row"},h={class:"col-sm-12"},V={class:"table-responsive"},g={class:"table jambo_table bulk_action table-bordered"},N=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Topup ID"),Object(o["createElementVNode"])("th",null,"Mitra"),Object(o["createElementVNode"])("th",null,"Produk"),Object(o["createElementVNode"])("th",null,"Payment Method"),Object(o["createElementVNode"])("th",{class:"text-end"},"Amount"),Object(o["createElementVNode"])("th",null,"Status"),Object(o["createElementVNode"])("th",null,"Tgl Konfirmasi"),Object(o["createElementVNode"])("th",null,"Operator")])],-1),_={key:0},E=Object(o["createElementVNode"])("td",{colspan:"9",class:"text-center"}," Data tidak ditemukan ",-1),v=[E],y={scope:"row"},k=Object(o["createElementVNode"])("br",null,null,-1),D={class:"fw-bold"},f={class:"text-end"},w=Object(o["createElementVNode"])("br",null,null,-1),x={key:0};function S(e,t,a,p,E,S){const B=Object(o["resolveComponent"])("input-date-picker-range-base"),C=Object(o["resolveComponent"])("select-mitra-base"),$=Object(o["resolveComponent"])("mitra-link-base"),T=Object(o["resolveComponent"])("statusbadge-base"),M=Object(o["resolveComponent"])("b-overlay"),q=Object(o["resolveComponent"])("paging-base");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(B,{start_date:E.search.start_date,"onUpdate:start_date":t[0]||(t[0]=e=>E.search.start_date=e),end_date:E.search.end_date,"onUpdate:end_date":t[1]||(t[1]=e=>E.search.end_date=e),"max-date":new Date},null,8,["start_date","end_date","max-date"])]),Object(o["createElementVNode"])("div",i,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>E.search.status=e)},b,512),[[o["vModelSelect"],E.search.status]])]),Object(o["createElementVNode"])("div",m,[Object(o["createVNode"])(C,{onOnChange:S.setMitra},null,8,["onOnChange"])]),Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",O,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[3]||(t[3]=e=>E.search.q=e),onKeyup:t[4]||(t[4]=Object(o["withKeys"])((...e)=>S.loadData&&S.loadData(...e),["enter"]))},null,544),[[o["vModelText"],E.search.q]]),Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>S.loadData&&S.loadData(...e))}," Cari ")])])]),Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("div",h,[Object(o["createVNode"])(M,{show:E.loading,rounded:"sm"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("table",g,[N,Object(o["createElementVNode"])("tbody",null,[E.data.length<=0&&!E.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",_,v)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(E.data,(t,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:a},[Object(o["createElementVNode"])("td",y,Object(o["toDisplayString"])((E.options.current_page-1)*E.options.per_page+a+1),1),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.trx_no)+" ",1),k,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$filters.dateTime(t.created_at)),1)]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])($,{mitra:t.mitra},null,8,["mitra"])]),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.details,t=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t},Object(o["toDisplayString"])(t.deposit_code)+" ("+Object(o["toDisplayString"])(e.$filters.currency(t.amount))+") ",1))),128))]),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.payment?t.payment.name:"")+" ",1),Object(o["createElementVNode"])("div",D,Object(o["toDisplayString"])(t.payment?t.payment.bank_name:""),1)]),Object(o["createElementVNode"])("td",f,Object(o["toDisplayString"])(e.$filters.currency(t.total_payment).replace(".",",")),1),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(T,{status:t.status,label:t.status_label},null,8,["status","label"])]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.confirmed_at?e.$filters.dateTime(t.confirmed_at):"-"),1),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.approved_by?t.approved_by.name:"")+" ",1),w,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$filters.dateTime(t.approved_at))+" ",1),t.notes?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",x,Object(o["toDisplayString"])(t.notes),1)):Object(o["createCommentVNode"])("",!0)])]))),128))])])])]),_:1},8,["show"])])]),E.data.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(q,{key:0,modelValue:E.options.current_page,"onUpdate:modelValue":t[6]||(t[6]=e=>E.options.current_page=e),options:E.options},null,8,["modelValue","options"])):Object(o["createCommentVNode"])("",!0)])])])])}var B=a("b166"),C={data(){return{data:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",status:"",user_id:"",start_date:Object(B["a"])(new Date,"yyyy-MM-dd"),end_date:Object(B["a"])(new Date,"yyyy-MM-dd")},loading:!1}},mounted(){this.loadData()},computed:{moreParams(){return{status:this.search.status,page:this.options.current_page,q:this.search.q,user_id:this.search.user_id,start_date:this.search.start_date,end_date:this.search.end_date}}},watch:{"options.current_page":{handler:function(){this.loadData()}},"search.end_date":{handler:function(){this.loadData()}}},methods:{setMitra(e){this.search.user_id=e?e.id:""},loadData(){this.loading=!0,this.$axios.get("deposit/topup-list",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},approveItem(e){this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:"Approve"}).then(t=>{t.isConfirmed&&this._changeStatus(e)})},_changeStatus(e){this.$store.dispatch("loading",!0),this.$axios.post(`/deposit/topup-requests/${e.trx_no}/approved`,{}).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}}},$=a("d959"),T=a.n($);const M=T()(C,[["render",S]]);t["default"]=M}}]);