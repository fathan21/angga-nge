(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["suppliers-f067b62f"],{3376:function(e,t,a){"use strict";a.r(t);a("14d9");var o=a("7a23");const l={class:"col-md-12 col-sm-12"},c={class:"x_panel"},s={class:"x_title"},r=Object(o["createElementVNode"])("h2",null,"Supplier List",-1),n={class:"nav navbar-right panel_toolbox"},i=Object(o["createElementVNode"])("i",{class:"fa fa-plus"},null,-1),d=Object(o["createElementVNode"])("div",{class:"clearfix"},null,-1),m={class:"x_content"},p={class:"table-responsive",style:{"min-height":"80vh"}},b={class:"row"},u={class:"col-sm-12 col-md-3 col-lg-3"},O={class:"input-group"},j=Object(o["createElementVNode"])("option",{value:"0"},"Tidak Aktif",-1),h=Object(o["createElementVNode"])("option",{value:"1"},"Aktif",-1),f=[j,h],V={class:"col-sm-12 col-md-3 col-lg-3"},N={class:"input-group"},E={class:"row"},v={class:"col-sm-12"},_={class:"table-responsive"},g={class:"table table-striped jambo_table bulk_action table-bordered"},y=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Produk"),Object(o["createElementVNode"])("th",null,"Supplier"),Object(o["createElementVNode"])("th",null,"Action")])],-1),k={key:0},x=Object(o["createElementVNode"])("td",{colspan:"9",class:"text-center"}," Data tidak ditemukan ",-1),B=[x],w={scope:"row",style:{width:"20px"}},C={style:{width:"200px"}},D={key:0},S=["onClick"],$=Object(o["createElementVNode"])("i",{class:"fa fa-pencil"},null,-1),T=[$],P=["title","onClick"],F={key:0,class:"fa fa-ban"},q={key:1,class:"fa fa-check"};function U(e,t,a,j,h,x){const $=Object(o["resolveComponent"])("b-overlay");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",s,[r,Object(o["createElementVNode"])("ul",n,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("button",{class:"btn btn-sm btn-primary",type:"button",onClick:t[0]||(t[0]=t=>e.$router.push({name:"app.supplier.form"}))},[i,Object(o["createTextVNode"])(" Tambah ")])])]),d]),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",O,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>h.search.is_active=e)},f,512),[[o["vModelSelect"],h.search.is_active]])])]),Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("div",N,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[2]||(t[2]=e=>h.search.q=e),onKeyup:t[3]||(t[3]=Object(o["withKeys"])((...e)=>x.loadData&&x.loadData(...e),["enter"]))},null,544),[[o["vModelText"],h.search.q]]),Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>x.loadData&&x.loadData(...e))}," Cari ")])])]),Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("div",v,[Object(o["createVNode"])($,{show:h.loading,rounded:"sm"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("table",g,[y,Object(o["createElementVNode"])("tbody",null,[h.data.length<=0&&!h.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",k,B)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(h.data,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t},[Object(o["createElementVNode"])("td",w,Object(o["toDisplayString"])((h.options.current_page-1)*h.options.per_page+t+1),1),Object(o["createElementVNode"])("td",C,Object(o["toDisplayString"])(e.product_name),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.supplier_name)+" / "+Object(o["toDisplayString"])(e.supplier_code)+" / "+Object(o["toDisplayString"])(e.mmco),1),Object(o["createElementVNode"])("td",null,[e.product_name.includes("PPOB")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[Object(o["createElementVNode"])("button",{class:"btn btn-sm btn-primary btn-action-list",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Ubah",onClick:t=>x.editItem(e)},T,8,S),Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])(["btn btn-sm btn-action-list",1==e.is_active?"btn-warning":"btn-info"]),type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:1==e.is_active?"Suspend":"Aktif",onClick:t=>x.removeItem(e)},[1==e.is_active?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",F)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",q))],10,P)])):Object(o["createCommentVNode"])("",!0)])]))),128))])])])]),_:1},8,["show"])])])])])])])}var M=a("b166"),A={data(){return{data:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",user_id:"",is_active:1,start_date:Object(M["a"])(new Date,"yyyy-MM-dd"),end_date:Object(M["a"])(new Date,"yyyy-MM-dd")},loading:!1}},mounted(){this.loadData()},computed:{moreParams(){return{per_page:1e3,is_active:this.search.is_active,page:this.options.current_page,q:this.search.q,user_id:this.search.user_id,start_date:this.search.start_date,end_date:this.search.end_date}}},watch:{"options.current_page":{handler:function(){this.loadData()}},"search.end_date":{handler:function(){this.loadData()}}},methods:{removeItem(e){let t=1==e.is_active?"Tidak Aktif":"Aktif",a=1==e.is_active?0:1;this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:t}).then(t=>{t.isConfirmed&&this._changeStatus(e,a)})},_changeStatus(e,t){let a=Object.assign({},e);a.is_active=t,this.$axios.put(`suppliers-users/${e.id}/updateStatus`,a).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},editItem(e){this.$router.push({name:"app.supplier.form",params:{id:e.id}})},loadData(){this.loading=!0,this.$axios.get("suppliers-users",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}},I=a("d959"),L=a.n(I);const z=L()(A,[["render",U]]);t["default"]=z},"6f7d":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const l={class:"col-md-12 col-sm-12"},c={class:"x_panel"},s={class:"x_title"},r={class:"nav navbar-right panel_toolbox"},n=Object(o["createElementVNode"])("i",{class:"fa fa-arrow-left"},null,-1),i=Object(o["createElementVNode"])("div",{class:"clearfix"},null,-1),d={class:"x_content"},m=Object(o["createElementVNode"])("br",null,null,-1),p={class:"item form-group"},b=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},"PRODUCT ",-1),u={class:"col-md-6 col-sm-6"},O={class:"item form-group"},j=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(o["createTextVNode"])("MMCO "),Object(o["createElementVNode"])("span",{class:"required"},"*")],-1),h={class:"col-md-6 col-sm-6"},f={key:0,class:"p-error"},V={class:"item form-group"},N=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(o["createTextVNode"])("Tipe Produk "),Object(o["createElementVNode"])("span",{class:"required"},"*")],-1),E={class:"col-md-6 col-sm-6"},v=Object(o["createElementVNode"])("option",{value:"prabayar"}," Prabayar ",-1),_=Object(o["createElementVNode"])("option",{value:"pascabayar"}," Pascabayar ",-1),g={class:"item form-group"},y=Object(o["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(o["createTextVNode"])("Supplier "),Object(o["createElementVNode"])("span",{class:"required"},"*")],-1),k={class:"col-md-6 col-sm-6"},x=Object(o["createElementVNode"])("option",{value:""},"Pilih Supplier",-1),B=["value"],w={key:0,class:"p-error"},C={class:"col-form-label col-md-3 col-sm-3 label-align"},D=Object(o["createElementVNode"])("span",{class:"required"},"*",-1),S={class:"col-md-6 col-sm-6"},$=["onUpdate:modelValue"],T=Object(o["createElementVNode"])("div",{class:"ln_solid"},null,-1),P={class:"item form-group"},F={class:"col-md-6 col-sm-6 offset-md-3"},q=Object(o["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function U(e,t,a,U,M,A){const I=Object(o["resolveComponent"])("Field"),L=Object(o["resolveComponent"])("Form",!0);return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(A.title),1),Object(o["createElementVNode"])("ul",r,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:t[0]||(t[0]=t=>e.$router.back())},[n,Object(o["createTextVNode"])(" Kembali ")])])]),i]),Object(o["createElementVNode"])("div",d,[m,Object(o["createVNode"])(L,{onSubmit:A.onSubmit,"validation-schema":M.schema,class:"signin-form"},{default:Object(o["withCtx"])(({errors:a})=>[Object(o["createElementVNode"])("div",p,[b,Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(I,{name:"product_name",class:"form-control",value:"PPOB",disabled:"",type:"text"})])]),Object(o["createElementVNode"])("div",O,[j,Object(o["createElementVNode"])("div",h,[Object(o["createVNode"])(I,{name:"mmco",class:Object(o["normalizeClass"])(["form-control",[{"p-error":a.mmco}]]),modelValue:M.form.mmco,"onUpdate:modelValue":t[1]||(t[1]=e=>M.form.mmco=e),type:"text"},null,8,["modelValue","class"]),a.mmco?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",f," *"+Object(o["toDisplayString"])(a.mmco),1)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",V,[N,Object(o["createElementVNode"])("div",E,[Object(o["createVNode"])(I,{name:"product_type",class:Object(o["normalizeClass"])(["form-control",[{"p-error":a.product_type}]]),modelValue:M.form.product_type,"onUpdate:modelValue":t[2]||(t[2]=e=>M.form.product_type=e),as:"select"},{default:Object(o["withCtx"])(()=>[v,_]),_:2},1032,["modelValue","class"])])]),Object(o["createElementVNode"])("div",g,[y,Object(o["createElementVNode"])("div",k,[Object(o["createVNode"])(I,{name:"supplier_code",class:Object(o["normalizeClass"])(["form-control",[{"p-error":a.supplier_code}]]),modelValue:M.form.supplier_code,"onUpdate:modelValue":t[3]||(t[3]=e=>M.form.supplier_code=e),as:"select"},{default:Object(o["withCtx"])(()=>[x,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(M.suppliers,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:e.code,value:e.code},Object(o["toDisplayString"])(e.name),9,B))),128))]),_:2},1032,["modelValue","class"]),a.supplier_code?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",w," *"+Object(o["toDisplayString"])(a.supplier_code),1)):Object(o["createCommentVNode"])("",!0)])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(M.addonFields,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"item form-group",key:t},[Object(o["createElementVNode"])("label",C,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label)+" ",1),D]),Object(o["createElementVNode"])("div",S,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t=>e.value=t,class:"form-control"},null,8,$),[[o["vModelText"],e.value]])])]))),128)),T,Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("div",F,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[4]||(t[4]=t=>e.$router.back())}," Cancel "),q])])]),_:1},8,["onSubmit","validation-schema"])])])])}a("14d9"),a("5b81");var M=a("7bb1"),A=a("506a"),I={components:{Form:M["b"],Field:M["a"]},data(){const e=A["a"]({supplier_code:A["b"]().required(),mmco:A["b"]().required()});return{id:"",g_qr:"",form:{supplier_code:"",mmco:"",is_dev:"1",product_type:"prabayar"},old:{},schema:e,addonFields:[],suppliers:[]}},watch:{"form.supplier_code":function(){let e=this.suppliers.findIndex(e=>e.code==this.form.supplier_code);if(e>-1){let t=JSON.parse(this.suppliers[e].config_fields),a=[];for(let e in t){let o="";this.old.confing_data&&(o=this.old.confing_data[e]),a.push({name:e,label:e.replaceAll("_"," ").toLocaleUpperCase(),value:o,validation:t[e]})}this.addonFields=a}}},computed:{title(){return this.id?"Ubah":"Tambah"}},methods:{loadSupplier(){this.loading=!0,this.$axios.get("/suppliers?product_code=PPOB").then(e=>{this.suppliers=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadData(){this.$axios.get("/suppliers-users/"+this.id).then(e=>{let t=Object.assign({},e.data);this.old=t,this.form.mmco=this.old.mmco,setTimeout(()=>{this.$nextTick(()=>{this.form.supplier_code=this.old.supplier_code,this.old.confing_data&&this.old.confing_data.product_type&&(this.form.product_type=this.old.confing_data.product_type)})},300)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},onSubmit(e){let t=Object.assign({},e),a={},o=null;for(let c=0;c<this.addonFields.length;c++){const e=this.addonFields[c];e.value?a[e.name]=e.value:o=1}if(o)return void this.$root.notif("semua data harus diisi",{type:"error",position:"top"});a.product_type=this.form.product_type,t.config=JSON.stringify(a),this.$store.dispatch("loading",!0);let l=()=>this.$axios.post("/suppliers-users",t);this.id&&(l=()=>this.$axios.put("/suppliers-users/"+this.id,t)),l().then(e=>{this.$router.back(),this.$root.notif(e.message)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}},onUnmounted(){this.addonFields=[]},mounted(){this.loadSupplier(),this.$route.params.id&&(this.id=this.$route.params.id,this.loadData())}},L=a("d959"),z=a.n(L);const J=z()(I,[["render",U]]);t["default"]=J}}]);