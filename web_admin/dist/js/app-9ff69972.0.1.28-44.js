(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-9ff69972"],{9444:function(e,t,a){"use strict";var c=a("7a23");const o={class:"item form-group"},l=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("No Trx "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),s={class:"col-md-6 col-sm-6"},r=["value"],n={class:"item form-group"},m=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Status Baru "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),d={class:"col-md-6 col-sm-6"},i=Object(c["createElementVNode"])("option",{value:""},"Pilih Status",-1),b=["value"],u={key:0,class:"p-error"},p={class:"item form-group"},j=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},"Catatan ",-1),O={class:"col-md-6 col-sm-6"},h={class:"item form-group"},f=Object(c["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(c["createTextVNode"])("Capthca "),Object(c["createElementVNode"])("span",{class:"required"},"*")],-1),V={class:"col-md-6 col-sm-6"},N={class:"d-flex align-items-center border"},g={class:"w-75 text-center"},E=["src"],v={class:"w-25 text-center"},k={key:0,class:"p-error"},y=Object(c["createElementVNode"])("div",{class:"ln_solid"},null,-1),C={class:"item form-group"},w={class:"col-md-6 col-sm-6 offset-md-3"},x=Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function _(e,t,a,_,B,S){const $=Object(c["resolveComponent"])("Field"),q=Object(c["resolveComponent"])("Form"),D=Object(c["resolveComponent"])("b-overlay");return Object(c["openBlock"])(),Object(c["createBlock"])(D,{show:e.$store.state.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(q,{onSubmit:S.onSubmit,"validation-schema":B.schema,class:"pt-5"},{default:Object(c["withCtx"])(({errors:_})=>[Object(c["createElementVNode"])("div",o,[l,Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("input",{class:"form-control",type:"text",disabled:"disabled",value:a.data.trx_no},null,8,r)])]),Object(c["createElementVNode"])("div",n,[m,Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])($,{name:"status",class:Object(c["normalizeClass"])(["form-control",[{"p-error":B.form.status}]]),modelValue:B.form.status,"onUpdate:modelValue":t[0]||(t[0]=e=>B.form.status=e),as:"select"},{default:Object(c["withCtx"])(()=>[i,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(B.status,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{value:e.id,key:e.id},Object(c["toDisplayString"])(e.name),9,b))),128))]),_:1},8,["modelValue","class"]),_.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",u," *"+Object(c["toDisplayString"])(_.status),1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",p,[j,Object(c["createElementVNode"])("div",O,[Object(c["createVNode"])($,{name:"notes",class:"form-control",modelValue:B.form.notes,"onUpdate:modelValue":t[1]||(t[1]=e=>B.form.notes=e)},null,8,["modelValue"])])]),Object(c["createElementVNode"])("div",h,[f,Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("img",{src:B.captcha.img,class:"mx-auto"},null,8,E)]),Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("button",{class:"btn btn-info btn-block",type:"button",onClick:t[2]||(t[2]=(...e)=>S.getCaptcha&&S.getCaptcha(...e))}," Refresh ")])]),Object(c["createVNode"])($,{name:"captcha",class:Object(c["normalizeClass"])(["form-control",[{"p-error":B.form.captcha}]]),placeholder:"Masukan kode di atas",modelValue:B.form.captcha,"onUpdate:modelValue":t[3]||(t[3]=e=>B.form.captcha=e)},null,8,["modelValue","class"]),_.captcha?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",k," *"+Object(c["toDisplayString"])(_.captcha),1)):Object(c["createCommentVNode"])("",!0)])]),y,Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[4]||(t[4]=t=>e.$emit("cancel"))}," Cancel "),x])])]),_:1},8,["onSubmit","validation-schema"])]),_:1},8,["show"])}var B=a("7bb1"),S=a("506a"),$=a("b166"),q={components:{Form:B["b"],Field:B["a"]},props:{data:Object},data(){const e=S["a"]({status:S["b"]().required(),captcha:S["b"]().required()});return{id:"",form:{status:"",trx_no:"",notes:"",issued_date:Object($["a"])(new Date,"yyyy-MM-dd"),issued_time:Object($["a"])(new Date,"HH:mm")},captcha:{key:"",img:""},status:[{id:2,name:"issued"},{id:10,name:"failed"}],old:{},schema:e}},watch:{data:{deep:!0,handler:function(){this.getCaptcha()}}},methods:{onSubmit(e){let t=Object.assign({},e);t.captcha_key=this.captcha.key,2==t.status&&(t.issued_at=this.form.issued_date+" "+this.form.issued_time);let a=()=>this.$axios.post(`/kai/${this.data.id}/status`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},getCaptcha(){this.$axios.get("/refresh-captcha").then(e=>{this.captcha.img=e.img,this.captcha.key=e.key})}},mounted(){}},D=a("d959"),F=a.n(D);const T=F()(q,[["render",_]]);t["a"]=T}}]);