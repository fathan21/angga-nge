(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["news-form-0768270b"],{6996:function(e,t,o){"use strict";o.r(t);var l=o("7a23");const a={class:"col-md-12 col-sm-12"},c={class:"x_panel"},n={class:"x_title"},s={class:"nav navbar-right panel_toolbox"},r=Object(l["createElementVNode"])("i",{class:"fa fa-arrow-left"},null,-1),i=Object(l["createElementVNode"])("div",{class:"clearfix"},null,-1),m={class:"x_content"},d=Object(l["createElementVNode"])("br",null,null,-1),b={class:"item form-group"},u=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Judul "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),p={class:"col-md-6 col-sm-6"},j={key:0,class:"p-error"},O={class:"item form-group"},f=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Isi "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),h={class:"col-md-9 col-sm-9"},g={key:0,class:"p-error"},V={class:"item form-group"},N=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),v={class:"col-md-6 col-sm-6"},E=["onChange","onInput"],k=["value"],C={key:0,class:"p-error"},y={class:"item form-group"},x=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},"Gambar ",-1),w={class:"col-md-6 col-sm-6"},B={key:0,class:"mb-3"},$=["src"],S={class:"mb-3"},T=Object(l["createElementVNode"])("div",{class:"ln_solid"},null,-1),_={class:"item form-group"},I={class:"col-md-6 col-sm-6 offset-md-3"},D=Object(l["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"}," Submit ",-1);function U(e,t,o,U,P,q){const z=Object(l["resolveComponent"])("Field"),F=Object(l["resolveComponent"])("vue-editor"),M=Object(l["resolveComponent"])("b-button"),J=Object(l["resolveComponent"])("Form",!0);return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",a,[Object(l["createElementVNode"])("div",c,[Object(l["createElementVNode"])("div",n,[Object(l["createElementVNode"])("h2",null,Object(l["toDisplayString"])(q.title),1),Object(l["createElementVNode"])("ul",s,[Object(l["createElementVNode"])("li",null,[Object(l["createElementVNode"])("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:t[0]||(t[0]=t=>e.$router.back())},[r,Object(l["createTextVNode"])(" Kembali ")])])]),i]),Object(l["createElementVNode"])("div",m,[d,Object(l["createVNode"])(J,{onSubmit:q.onSubmit,"validation-schema":P.schema,class:"signin-form"},{default:Object(l["withCtx"])(({errors:o})=>[Object(l["createElementVNode"])("div",b,[u,Object(l["createElementVNode"])("div",p,[Object(l["createVNode"])(z,{name:"title",class:Object(l["normalizeClass"])(["form-control",[{"p-error":o.title}]]),modelValue:P.form.title,"onUpdate:modelValue":t[1]||(t[1]=e=>P.form.title=e),type:"text"},null,8,["modelValue","class"]),o.title?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",j," *"+Object(l["toDisplayString"])(o.title),1)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",O,[f,Object(l["createElementVNode"])("div",h,[Object(l["createVNode"])(z,{name:"content",modelValue:P.form.content,"onUpdate:modelValue":t[3]||(t[3]=e=>P.form.content=e)},{default:Object(l["withCtx"])(({handleChange:e})=>[Object(l["createVNode"])(F,{modelValue:P.form.content,"onUpdate:modelValue":t[2]||(t[2]=e=>P.form.content=e),editorToolbar:P.editorToolbar,onChange:e},null,8,["modelValue","editorToolbar","onChange"])]),_:1},8,["modelValue"]),o.content?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",g," *"+Object(l["toDisplayString"])(o.content),1)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",V,[N,Object(l["createElementVNode"])("div",v,[Object(l["createVNode"])(z,{name:"status",modelValue:P.form.status,"onUpdate:modelValue":t[5]||(t[5]=e=>P.form.status=e)},{default:Object(l["withCtx"])(({handleChange:e})=>[Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:Object(l["normalizeClass"])(["form-control",[{"p-error":o.status}]]),onChange:e,onInput:e,"onUpdate:modelValue":t[4]||(t[4]=e=>P.form.status=e)},[(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])([{code:0,name:"pending"},{code:1,name:"publish"}],(e,t)=>Object(l["createElementVNode"])("option",{key:t,value:e.code},Object(l["toDisplayString"])(e.name),9,k)),64))],42,E),[[l["vModelSelect"],P.form.status]])]),_:2},1032,["modelValue"]),o.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",C," *"+Object(l["toDisplayString"])(o.status),1)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",y,[x,Object(l["createElementVNode"])("div",w,[Object(l["createElementVNode"])("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>q.upload&&q.upload(...e)),accept:"image/*",ref:"file",class:"d-none",model:"form.file"},null,544),P.imagePrev?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",B,[P.imagePrev?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:P.imagePrev,style:{"max-width":"300px"}},null,8,$)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",S,[Object(l["createVNode"])(M,{variant:"info",size:"sm",onClick:t[7]||(t[7]=t=>e.$refs.file.click())},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(" Upload ")]),_:1}),P.imagePrev?(Object(l["openBlock"])(),Object(l["createBlock"])(M,{key:0,variant:"danger",size:"sm",onClick:q.deleteImage},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(" Hapus ")]),_:1},8,["onClick"])):Object(l["createCommentVNode"])("",!0)])])]),T,Object(l["createElementVNode"])("div",_,[Object(l["createElementVNode"])("div",I,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[8]||(t[8]=t=>e.$router.back())}," Cancel "),D])])]),_:1},8,["onSubmit","validation-schema"])])])])}o("14d9");var P=o("7bb1"),q=o("506a"),z={components:{Form:P["b"],Field:P["a"]},data(){const e=q["a"]({title:q["b"]().required(),status:q["b"]().required(),content:q["b"]().required()});return{id:"",imagePrev:"",form:{title:"",content:"",status:"",file:""},old:{},schema:e,editorToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],[{size:["small",!1,"large","huge"]}],["clean"]]}},computed:{title(){return this.id?"Ubah":"Tambah"}},methods:{reset(){this.form={title:"",content:"",status:"",file:""}},loadData(){this.$axios.get("/news/"+this.id).then(e=>{let t=Object.assign(e.data,{});this.old=t,this.form.title=t.title,this.form.content=t.content,this.form.status=t.status,t.image&&(this.imagePrev=t.image)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},onSubmit(e){this.$store.dispatch("loading",!0);let t=Object.assign({},e);this.fileImage&&(t.image=this.fileImage);var o=new FormData;for(var l in t)o.append(l,t[l]);let a=()=>this.$axios.post("/news",o,{headers:{"Content-Type":"multipart/form-data; boundary="+Math.random().toString().substr(2)}});this.id&&(a=()=>this.$axios.post("/news/"+this.id,o,{headers:{"Content-Type":"multipart/form-data; boundary="+Math.random().toString().substr(2)}})),a().then(e=>{this.$router.push({name:"app.news.list"}),this.$root.notif(e.message)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},upload(e){let t=e.target.files[0];const o=t.size,l=Math.round(o/1024);l>=1024?this.$root.notif("Maks file size 1 MB",{type:"error",position:"top"}):(this.fileImage=t,this.imagePrev=URL.createObjectURL(t))},deleteImage(){this.imagePrev=null,this.form.file=null,this.$refs.file.value=null,this.deleteApiImage()},deleteApiImage(){if(this.id){let e=Object.assign({},this.form);e.image_delete=1,this.$axios.post("news/"+this.id,e)}}},mounted(){this.$route.params.id&&(this.id=this.$route.params.id,this.loadData())}},F=o("d959"),M=o.n(F);const J=M()(z,[["render",U]]);t["default"]=J}}]);