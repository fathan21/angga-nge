(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-5d8fb97d"],{"2b9e":function(e,t,o){"use strict";var l=o("7a23");const c={class:"row"},a={class:"col-md-6 col-sm-12"},s={class:"x_panel"},n=Object(l["createElementVNode"])("div",{class:"x_title"},[Object(l["createElementVNode"])("h2",null,"Profile"),Object(l["createElementVNode"])("div",{class:"clearfix"})],-1),r={class:"x_content"},i={class:"table-responsive"},d={class:"table text-16"},m=Object(l["createElementVNode"])("td",{class:"text-grey-light py-3",style:{width:"100px"}}," Nama ",-1),p={class:"font-weight-bold"},b=Object(l["createElementVNode"])("td",{class:"text-grey-light py-3"},"Email",-1),u={class:"font-weight-bold"},h=Object(l["createElementVNode"])("td",{class:"text-grey-light py-3"},"Phone",-1),O={class:"font-weight-bold"},j=Object(l["createElementVNode"])("td",{class:"text-grey-light py-3"}," Saldo Aktif ",-1),y={class:"text-primary font-weight-bold"},f={class:"col-md-6 col-sm-12"},k={class:"x_panel"},E={class:"x_title"},g=Object(l["createElementVNode"])("h2",null,"Akes API",-1),V={class:"nav navbar-right panel_toolbox"},v=Object(l["createElementVNode"])("div",{class:"clearfix"},null,-1),N={key:0,class:"py-4 text-center"},w={key:1,class:"x_content"},C={class:"table-responsive"},x={class:"table text-16"},B=Object(l["createElementVNode"])("td",{class:"text-grey-light",style:{width:"100px"}}," Username ",-1),S={class:"font-weight-bold"},_={class:"input-group"},$=["value"],P=Object(l["createElementVNode"])("i",{class:"fa fa-copy"},null,-1),A=[P],F=Object(l["createElementVNode"])("td",{class:"text-grey-light"},"Api Key",-1),M={class:"font-weight-bold"},D={class:"input-group"},I=["value"],T=Object(l["createElementVNode"])("i",{class:"fa fa-copy"},null,-1),L=[T],U=Object(l["createElementVNode"])("td",{class:"text-grey-light"}," IP Whitelist ",-1),J={class:"text-primary font-weight-bold"},q={class:"input-group"},R=["value"],z=["onClick"],K=Object(l["createElementVNode"])("i",{class:"fa fa-copy"},null,-1),W=[K],G={key:0,class:"col-sm12"};function H(e,t,o,P,T,K){const H=Object(l["resolveComponent"])("b-overlay"),Q=Object(l["resolveComponent"])("b-button"),X=Object(l["resolveComponent"])("supplier-setting");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",c,[Object(l["createElementVNode"])("div",a,[Object(l["createElementVNode"])("div",s,[n,Object(l["createVNode"])(H,{show:T.loading,rounded:"sm"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",r,[Object(l["createElementVNode"])("div",i,[Object(l["createElementVNode"])("table",d,[Object(l["createElementVNode"])("tr",null,[m,Object(l["createElementVNode"])("td",p," :    "+Object(l["toDisplayString"])(T.data.name),1)]),Object(l["createElementVNode"])("tr",null,[b,Object(l["createElementVNode"])("td",u," :    "+Object(l["toDisplayString"])(T.data.email),1)]),Object(l["createElementVNode"])("tr",null,[h,Object(l["createElementVNode"])("td",O," :    "+Object(l["toDisplayString"])(T.data.phone),1)]),Object(l["createElementVNode"])("tr",null,[j,Object(l["createElementVNode"])("td",y," :    Rp. "+Object(l["toDisplayString"])(T.data.mitra&&T.data.mitra.saldo?e.$filters.currency(T.data.mitra.saldo):"0"),1)])])])])]),_:1},8,["show"])])]),Object(l["createElementVNode"])("div",f,[Object(l["createElementVNode"])("div",k,[Object(l["createElementVNode"])("div",E,[g,Object(l["createElementVNode"])("ul",V,[Object(l["createElementVNode"])("li",null,[T.showAksesServer?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,class:"btn btn-sm btn-primary",type:"button",onClick:t[0]||(t[0]=e=>T.showAksesServer=!1)}," Sebunyikan Akses ")):Object(l["createCommentVNode"])("",!0)])]),v]),Object(l["createVNode"])(H,{show:T.loading,rounded:"sm"},{default:Object(l["withCtx"])(()=>[T.showAksesServer?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",w,[Object(l["createElementVNode"])("div",C,[Object(l["createElementVNode"])("table",x,[Object(l["createElementVNode"])("tr",null,[B,Object(l["createElementVNode"])("td",S,[Object(l["createElementVNode"])("div",_,[Object(l["createElementVNode"])("input",{type:"text",readonly:"",class:"form-control",value:T.data.mitra?T.data.mitra.username:"-"},null,8,$),Object(l["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",id:"button-addon1",onClick:t[1]||(t[1]=e=>K.copy(T.data.mitra?T.data.mitra.username:""))},A)])])]),Object(l["createElementVNode"])("tr",null,[F,Object(l["createElementVNode"])("td",M,[Object(l["createElementVNode"])("div",D,[Object(l["createElementVNode"])("input",{type:"text",readonly:"",class:"form-control",value:T.data.mitra?T.data.mitra.api_key:"-"},null,8,I),Object(l["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",id:"button-addon1",onClick:t[2]||(t[2]=e=>K.copy(T.data.mitra?T.data.mitra.api_key:""))},L)])])]),Object(l["createElementVNode"])("tr",null,[U,Object(l["createElementVNode"])("td",J,[T.data.mitra?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(T.data.mitra.ip_whitelist,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t},[Object(l["createElementVNode"])("div",q,[Object(l["createElementVNode"])("input",{type:"text",readonly:"",class:"form-control",value:e||"-"},null,8,R),Object(l["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",id:"button-addon1",onClick:t=>K.copy(e||"")},W,8,z)])]))),128)):Object(l["createCommentVNode"])("",!0)])])])])])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",N,[Object(l["createVNode"])(Q,{variant:"primary",class:"mx-auto",onClick:K.showConfirmPassword},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(" Tampilkan Akses API ")]),_:1},8,["onClick"])]))]),_:1},8,["show"])])]),T.data.hasAcc?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",G,[Object(l["createVNode"])(X,{showAksesServer:T.showAksesServer,onShowConfirm:K.showConfirmPassword},null,8,["showAksesServer","onShowConfirm"])])):Object(l["createCommentVNode"])("",!0)])}const Q={class:"row"},X={class:"col-md-12 col-sm-12"},Y={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},Z={class:"x_panel"},ee={class:"x_title"},te={key:0},oe={key:1},le=Object(l["createElementVNode"])("div",{class:"clearfix"},null,-1),ce={key:0},ae={key:1,class:"table-responsive"},se={class:"table table-striped jambo_table bulk_action table-bordered"},ne=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:""},"No"),Object(l["createElementVNode"])("th",{class:""},"Supplier"),Object(l["createElementVNode"])("th",{class:""},"Config"),Object(l["createElementVNode"])("th",{class:""},"Last Syc"),Object(l["createElementVNode"])("th",{class:"",style:{width:"170px"}},"#")])],-1),re={key:0},ie=Object(l["createElementVNode"])("td",{colspan:"5"},"Data tidak ditemukan",-1),de=[ie],me={style:{width:"30px"}},pe={key:0,class:"py-4 text-center"},be=["onClick"];function ue(e,t,o,c,a,s){const n=Object(l["resolveComponent"])("supplier-form"),r=Object(l["resolveComponent"])("b-button"),i=Object(l["resolveComponent"])("b-overlay");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Q,[Object(l["createElementVNode"])("div",X,[a.succesMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Y,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(a.succesMessage)+" ",1),Object(l["createElementVNode"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=e=>a.succesMessage=null)})])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Z,[Object(l["createElementVNode"])("div",ee,[a.addItemForm?(Object(l["openBlock"])(),Object(l["createElementBlock"])("h2",oe,"Register Supplier (PPOB) Mitra ")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("h2",te,"Daftar Supplier (PPOB) Mitra")),le]),Object(l["createVNode"])(i,{show:a.loading,rounded:"sm"},{default:Object(l["withCtx"])(()=>[a.addItemForm?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ce,[Object(l["createVNode"])(n,{onCancel:t[1]||(t[1]=e=>a.addItemForm=!1),onSave:t[2]||(t[2]=()=>{a.addItemForm=!1,s.loadSupplierMitra()}),suppliers:a.suppliers},null,8,["suppliers"])])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ae,[Object(l["createElementVNode"])("table",se,[ne,Object(l["createElementVNode"])("tbody",null,[a.supplierMitra.length<=0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",re,de)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(a.supplierMitra,(t,c)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:c},[Object(l["createElementVNode"])("td",me,Object(l["toDisplayString"])(c+1),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.name),1),Object(l["createElementVNode"])("td",null,[o.showAksesServer?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:1},Object(l["renderList"])(t.config,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t},Object(l["toDisplayString"])(t)+" : "+Object(l["toDisplayString"])(e),1))),128)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pe,[Object(l["createVNode"])(r,{variant:"primary",class:"mx-auto",onClick:s.showConfirmPwd},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(" Tampilkan Pengaturan ")]),_:1},8,["onClick"])]))]),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.$filters.dateTime(t.last_sync)||"-"),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("button",{class:"btn btn-sm btn-action-list btn-info",type:"button",onClick:e=>s.syncProduct(t)}," Sync Product ",8,be)])]))),128))])])]))]),_:1},8,["show"])])])])}const he={class:"item form-group"},Oe=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Supplier "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),je={class:"col-md-6 col-sm-6"},ye=["onChange","onInput"],fe=["value"],ke={key:0,class:"p-error"},Ee={class:"col-form-label col-md-3 col-sm-3 label-align"},ge=Object(l["createElementVNode"])("span",{class:"required"},"*",-1),Ve={class:"col-md-6 col-sm-6"},ve=["onUpdate:modelValue"],Ne=Object(l["createElementVNode"])("div",{class:"ln_solid"},null,-1),we={class:"item form-group"},Ce={class:"col-md-6 col-sm-6 offset-md-3"},xe=Object(l["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function Be(e,t,o,c,a,s){const n=Object(l["resolveComponent"])("Field"),r=Object(l["resolveComponent"])("Form");return Object(l["openBlock"])(),Object(l["createBlock"])(r,{onSubmit:s.onSubmit,"validation-schema":a.schema,class:"signin-form"},{default:Object(l["withCtx"])(({errors:c})=>[Object(l["createElementVNode"])("div",he,[Oe,Object(l["createElementVNode"])("div",je,[Object(l["createVNode"])(n,{name:"supplier_code",modelValue:a.form.supplier_code,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.supplier_code=e)},{default:Object(l["withCtx"])(({handleChange:e})=>[Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:Object(l["normalizeClass"])(["form-control",[{"p-error":c.supplier}]]),onChange:e,onInput:e,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.supplier_code=e)},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.suppliers,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.code},Object(l["toDisplayString"])(e.name),9,fe))),128))],42,ye),[[l["vModelSelect"],a.form.supplier_code]])]),_:2},1032,["modelValue"]),c.supplier_code?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",ke," *"+Object(l["toDisplayString"])(c.supplier_code),1)):Object(l["createCommentVNode"])("",!0)])]),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(a.addonFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"item form-group",key:t},[Object(l["createElementVNode"])("label",Ee,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.label)+" ",1),ge]),Object(l["createElementVNode"])("div",Ve,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t=>e.value=t,class:"form-control"},null,8,ve),[[l["vModelText"],e.value]])])]))),128)),Ne,Object(l["createElementVNode"])("div",we,[Object(l["createElementVNode"])("div",Ce,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[2]||(t[2]=t=>e.$emit("cancel"))}," Cancel "),xe])])]),_:1},8,["onSubmit","validation-schema"])}o("14d9");var Se=o("7bb1"),_e=o("506a"),$e={components:{Form:Se["b"],Field:Se["a"]},props:{suppliers:{type:Array,default:function(){return[]}}},data(){const e=_e["a"]({supplier_code:_e["b"]().required()});return{id:"",imagePrev:"",form:{supplier_code:""},addonFields:[],old:{},schema:e}},watch:{"form.supplier_code":function(){let e=this.suppliers.findIndex(e=>e.code==this.form.supplier_code);if(e>-1){let t=JSON.parse(this.suppliers[e].config_fields),o=[];for(let e in t)o.push({name:e,label:e.replace("_"," ").toLocaleUpperCase(),value:"",validation:t[e]});this.addonFields=o}}},methods:{reset(){this.form={supplier_code:""},this.addonFields=[]},onSubmit(e){let t=Object.assign({},e),o={},l=null;for(let a=0;a<this.addonFields.length;a++){const e=this.addonFields[a];e.value?o[e.name]=e.value:l=1}if(l)return void this.$root.notif("semua data harus diisi",{type:"error",position:"top"});t.config=JSON.stringify(o);let c=()=>this.$axios.post("/supplier-mitra",t);this.id&&(c=()=>this.$axios.post("/supplier-mitra/"+this.id,t)),c().then(e=>{this.$root.notif(e.message),this.$emit("save")}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}},mounted(){}},Pe=o("d959"),Ae=o.n(Pe);const Fe=Ae()($e,[["render",Be]]);var Me=Fe,De={components:{SupplierForm:Me},props:{showAksesServer:{default:null}},data(){return{succesMessage:null,data:{},loading:!1,suppliers:[],supplierMitra:[],addItemForm:!1}},mounted(){this.loadSupplierMitra()},methods:{copy(e){let t="behasil di copy";const o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),this.$root.notif(t)},async addItem(){},removeItem(e){this.$axios.delete("/supplier-mitra/"+e.code).then(()=>{this.loadSupplierMitra()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadSuppliers(){this.loading=!0,this.$axios.get("/suppliers").then(e=>{this.suppliers=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadSupplierMitra(){this.loading=!0,this.$axios.get("/supplier-mitra?product_code=PPOB").then(e=>{this.supplierMitra=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},showConfirmPwd(){this.$emit("showConfirm")},syncProduct(e){this.loading=!0,this.succesMessage=null,this.$axios.get("/supplier-mitra/"+e.id).then(e=>{this.succesMessage=e.message,this.$root.notif(e.message,{type:"info",position:"top"})}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}};const Ie=Ae()(De,[["render",ue]]);var Te=Ie,Le={components:{SupplierSetting:Te},data(){return{data:{},loading:!1,showAksesServer:!1}},mounted(){this.loadInfo()},methods:{copy(e){let t="behasil di copy";const o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),this.$root.notif(t)},async showConfirmPassword(){this.$swal({title:"<strong></strong>",html:'<input id="my-input-pwd" type="password" placeholder="Masukan Password" class="form-control">',preConfirm:()=>[document.getElementById("my-input-pwd").value],showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"cancel",showCloseButton:!0}).then(e=>{if(e.isConfirmed){let t=e.value[0];if(!t)return this.$root.notif("masukan password terlebih dahulu",{type:"error",position:"top"}),void this.showConfirmPassword();this.$store.dispatch("loading",!0),this.$axios.post("/show-akses-server",{password:t}).then(()=>{this.showAksesServer=!0,setTimeout(()=>{this.showAksesServer=!1},6e4)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.showConfirmPassword()}).finally(()=>{this.$store.dispatch("loading",!1)})}})},async confirmOtp(){this.$swal({title:"<strong></strong>",html:'\n                            <div>\n                                <input id="my-input-pwd" type="password" placeholder="Masukan Otp" class="form-control">\n                            <div>\n                            \n                    ',preConfirm:()=>[document.getElementById("my-input-pwd").value],showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"cancel",showCloseButton:!0}).then(e=>{if(e.isConfirmed){let t=e.value[0];if(!t)return this.$root.notif("masukan otp terlebih dahulu",{type:"error",position:"top"}),void this.confirmOtp();this.$store.dispatch("loading",!0),this.$axios.post("/confirm-otp",{password:t}).then(()=>{this.showAksesServer=!0,setTimeout(()=>{this.showAksesServer=!1},6e4)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.showConfirmPassword()}).finally(()=>{this.$store.dispatch("loading",!1)})}})},loadInfo(){this.loading=!0,this.$axios.get("/mitra-info",{params:this.moreParams}).then(e=>{this.data=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}};const Ue=Ae()(Le,[["render",H]]);t["a"]=Ue}}]);