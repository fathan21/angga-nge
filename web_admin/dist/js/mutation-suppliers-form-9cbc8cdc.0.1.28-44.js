(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mutation-suppliers-form-9cbc8cdc"],{a552:function(e,t,o){"use strict";o.r(t);var l=o("7a23");const a={class:"col-md-12 col-sm-12"},c={class:"x_panel"},n={class:"x_title"},r={class:"nav navbar-right panel_toolbox"},s=Object(l["createElementVNode"])("i",{class:"fa fa-arrow-left"},null,-1),i=Object(l["createElementVNode"])("div",{class:"clearfix"},null,-1),m={class:"x_content"},d=Object(l["createElementVNode"])("br",null,null,-1),b={class:"item form-group"},p=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Tipe "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),u={class:"col-md-6 col-sm-6"},O={class:"form-control"},j={class:"radio-group-core"},f=["value"],h={class:"item form-group"},V=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Supplier "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),N={class:"col-md-6 col-sm-6"},g={key:0,class:"p-error"},E={class:"item form-group"},y=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Transksi "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),v={class:"col-md-6 col-sm-6"},k=["onChange","onInput"],_=["value"],C={key:0,class:"p-error"},x={class:"item form-group"},w=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(l["createTextVNode"])("Jumlah "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),B={class:"col-md-6 col-sm-6"},S={key:0,class:"p-error"},$={class:"item form-group"},D=Object(l["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},"Catatan Internal ",-1),T={class:"col-md-6 col-sm-9"},U=["onChange"],q={key:0,class:"p-error"},I=Object(l["createElementVNode"])("div",{class:"ln_solid"},null,-1),F={class:"item form-group"},M={class:"col-md-6 col-sm-6 offset-md-3"},z=Object(l["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"}," Submit ",-1);function R(e,t,o,R,A,L){const P=Object(l["resolveComponent"])("select-supplier-user-base"),J=Object(l["resolveComponent"])("Field"),K=Object(l["resolveComponent"])("input-currency-base"),G=Object(l["resolveComponent"])("Form");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",a,[Object(l["createElementVNode"])("div",c,[Object(l["createElementVNode"])("div",n,[Object(l["createElementVNode"])("h2",null,Object(l["toDisplayString"])(L.title),1),Object(l["createElementVNode"])("ul",r,[Object(l["createElementVNode"])("li",null,[Object(l["createElementVNode"])("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:t[0]||(t[0]=t=>e.$router.back())},[s,Object(l["createTextVNode"])(" Kembali ")])])]),i]),Object(l["createElementVNode"])("div",m,[d,Object(l["createVNode"])(G,{onSubmit:L.onSubmit,"validation-schema":A.schema,class:"signin-form"},{default:Object(l["withCtx"])(({errors:o})=>[Object(l["createElementVNode"])("div",b,[p,Object(l["createElementVNode"])("div",u,[Object(l["createElementVNode"])("div",O,[Object(l["createElementVNode"])("div",j,[(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(["debit","credit"],e=>Object(l["createElementVNode"])("label",{key:e},[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"radio",value:e,"onUpdate:modelValue":t[1]||(t[1]=e=>A.form.type=e)},null,8,f),[[l["vModelRadio"],A.form.type]]),Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(e),1)])),64))])])])]),Object(l["createElementVNode"])("div",h,[V,Object(l["createElementVNode"])("div",N,[Object(l["createVNode"])(J,{name:"supplier_code",modelValue:A.form.supplier_code,"onUpdate:modelValue":t[2]||(t[2]=e=>A.form.supplier_code=e),type:"supplier_code"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(P,{onOnChange:L.setSupplier},null,8,["onOnChange"])]),_:1},8,["modelValue"]),o.supplier_code?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",g," *"+Object(l["toDisplayString"])(o.supplier_code),1)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",E,[y,Object(l["createElementVNode"])("div",v,[Object(l["createVNode"])(J,{name:"transaction_type",modelValue:A.form.transaction_type,"onUpdate:modelValue":t[4]||(t[4]=e=>A.form.transaction_type=e)},{default:Object(l["withCtx"])(({handleChange:e})=>[Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:Object(l["normalizeClass"])(["form-control",[{"p-error":o.transaction_type}]]),onChange:e,onInput:e,"onUpdate:modelValue":t[3]||(t[3]=e=>A.form.transaction_type=e)},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(A.transactionTypes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.name},Object(l["toDisplayString"])(e.name),9,_))),128))],42,k),[[l["vModelSelect"],A.form.transaction_type]])]),_:2},1032,["modelValue"]),o.transaction_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",C," *"+Object(l["toDisplayString"])(o.transaction_type),1)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",x,[w,Object(l["createElementVNode"])("div",B,[Object(l["createVNode"])(J,{name:"amount",modelValue:A.form.amount,"onUpdate:modelValue":t[5]||(t[5]=e=>A.form.amount=e),class:Object(l["normalizeClass"])([{"p-error":o.amount}]),type:"hidden"},null,8,["modelValue","class"]),Object(l["createVNode"])(K,{modelValue:A.form.amount,"onUpdate:modelValue":t[6]||(t[6]=e=>A.form.amount=e),class:Object(l["normalizeClass"])(["form-control",[{"p-error":o.amount}]])},null,8,["modelValue","class"]),o.amount?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",S," *"+Object(l["toDisplayString"])(o.amount),1)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",$,[D,Object(l["createElementVNode"])("div",T,[Object(l["createVNode"])(J,{name:"notes",type:"hidden"},{default:Object(l["withCtx"])(({handleChange:e})=>[Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{class:"form-control",onChange:e,"onUpdate:modelValue":t[7]||(t[7]=e=>A.form.notes=e)},null,40,U),[[l["vModelText"],A.form.notes]])]),_:1}),o.content?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",q," *"+Object(l["toDisplayString"])(o.content),1)):Object(l["createCommentVNode"])("",!0)])]),I,Object(l["createElementVNode"])("div",F,[Object(l["createElementVNode"])("div",M,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[8]||(t[8]=t=>e.$router.back())}," Cancel "),z])])]),_:1},8,["onSubmit","validation-schema"])])])])}var A=o("7bb1"),L=o("506a"),P={components:{Form:A["b"],Field:A["a"]},data(){const e=L["a"]({amount:L["b"]().required(),transaction_type:L["b"]().required(),notes:L["b"](),supplier_code:L["b"]().required()});return{id:"",imagePrev:"",form:{amount:0,notes:"",mmco:"",supplier_code:"",transaction_type:"",type:"debit"},old:{},schema:e,transactionTypes:[{name:"Saldo Awal"},{name:"Topup"},{name:"Adjustment"},{name:"Refund"},{name:"Rebook"}]}},computed:{title(){return this.id?"Ubah":"Tambah"}},methods:{reset(){this.form={}},setSupplier(e){e?(this.form.supplier_code=e.supplier_code,this.form.mmco=e.mmco):(this.form.supplier_code="",this.form.mmco="")},loadData(){this.$axios.get("/news/"+this.id).then(e=>{let t=Object.assign(e.data,{});this.old=t,this.form.title=t.title,this.form.content=t.content,this.form.status=t.status,t.image&&(this.imagePrev=t.image)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},onSubmit(e){let t=Object.assign({},e);t.type=this.form.type,t.mmco=this.form.mmco;let o=()=>this.$axios.post(`/suppliers/${t.supplier_code}/mutations`,t);this.$store.dispatch("loading",!0),o().then(e=>{this.$router.back(),this.$root.notif(e.message)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},upload(e){let t=e.target.files[0];const o=t.size,l=Math.round(o/1024);l>=1024?this.$root.notif("Maks file size 1 MB",{type:"error",position:"top"}):(this.fileImage=t,this.imagePrev=URL.createObjectURL(t))},deleteImage(){this.imagePrev=null,this.form.file=null,this.$refs.file.value=null,this.deleteApiImage()},deleteApiImage(){if(this.id){let e=Object.assign({},this.form);e.image_delete=1,this.$axios.post("news/"+this.id,e)}}},mounted(){this.$route.params.id&&(this.id=this.$route.params.id,this.loadData())}},J=o("d959"),K=o.n(J);const G=K()(P,[["render",R]]);t["default"]=G}}]);