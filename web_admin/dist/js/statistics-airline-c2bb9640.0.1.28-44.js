(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["statistics-airline-c2bb9640"],{bd05:function(e,t,a){"use strict";a.r(t);var c=a("7a23");const o={class:"col-md-12 col-sm-12"},s={class:"x_panel"},l={class:"x_content"},n={class:"row"},r={class:"col-sm-12 col-md-4 col-lg-4"},i={class:"col-sm-12 col-md-3 col-lg-3"},d={class:"col-sm-12 col-md-1 col-lg-1"},b={class:"table-responsive",style:{"min-height":"75vh"}},m={class:"row"},p={class:"col-sm-12"},h={class:"table-responsive"},O={class:"table table-striped jambo_table bulk_action table-bordered"},j=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"#"),Object(c["createElementVNode"])("th",null,"Status"),Object(c["createElementVNode"])("th",null,"Mitra ID"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("No Trx"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Waktu Booking")]),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("PNR"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Airline Code")]),Object(c["createElementVNode"])("th",null,"Rute"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Paxpaid"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("NTA")]),Object(c["createElementVNode"])("th",null,"NRA"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Pusat"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Mitra")]),Object(c["createElementVNode"])("th",null,"SEG")])],-1),u={key:0},N=Object(c["createElementVNode"])("td",{colspan:"11",class:"text-center"}," Data tidak ditemukan ",-1),V=[N],g={scope:"row"},E={style:{"min-width":"100px"}},y={style:{"min-width":"250px"}},_={class:"text-black-50"},x={style:{"min-width":"110px"}},k=Object(c["createElementVNode"])("br",null,null,-1),f={class:"",style:{"min-width":"250px"}},v={class:""},D=["src"],$={class:"d-flex"},w=Object(c["createElementVNode"])("div",{class:"px-3"},"-",-1),S={class:""},T=Object(c["createElementVNode"])("br",null,null,-1),B={class:""},C=Object(c["createElementVNode"])("br",null,null,-1),M={class:"text-center"};function P(e,t,a,N,P,A){const U=Object(c["resolveComponent"])("input-date-picker-range-base"),q=Object(c["resolveComponent"])("select-base"),F=Object(c["resolveComponent"])("statusbadge-base"),I=Object(c["resolveComponent"])("NoteTooltipBase"),R=Object(c["resolveComponent"])("b-overlay"),L=Object(c["resolveComponent"])("paging-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",r,[Object(c["createVNode"])(U,{start_date:P.search.start_date,"onUpdate:start_date":t[0]||(t[0]=e=>P.search.start_date=e),end_date:P.search.end_date,"onUpdate:end_date":t[1]||(t[1]=e=>P.search.end_date=e)},null,8,["start_date","end_date"])]),Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(q,{options:P.airlines,placeholder:"Pilih maskapai",modelValue:P.search.airline_code,"onUpdate:modelValue":t[2]||(t[2]=e=>P.search.airline_code=e),reduce:e=>e.code},null,8,["options","modelValue","reduce"])]),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>A.searchData&&A.searchData(...e))}," Cari ")])]),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",p,[Object(c["createVNode"])(R,{show:P.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("table",O,[j,Object(c["createElementVNode"])("tbody",null,[P.data.length<=0&&!P.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",u,V)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(P.data,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:a},[Object(c["createElementVNode"])("td",g,Object(c["toDisplayString"])((P.options.current_page-1)*P.options.per_page+a+1),1),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(F,{status:t.status_label,label:t.status_label},null,8,["status","label"])]),Object(c["createElementVNode"])("td",E,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(t.mmid),1),t.notes?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:0,notes:t.notes},null,8,["notes"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",y,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.trx_no?t.trx_no:"")+" ",1),Object(c["createElementVNode"])("div",_,Object(c["toDisplayString"])(e.$filters.dateTime(t.created_at)),1)]),Object(c["createElementVNode"])("td",x,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.pnr)+" ",1),k,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.airline_code),1)]),Object(c["createElementVNode"])("td",f,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.details,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"d-flex mb-2 align-items-center justify-content-between",key:t},[Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("img",{src:e.image_url,style:{width:"25px"},class:"pr-3"},null,8,D),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.airline_code),1)]),Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.std),1),w,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.sta),1)])]))),128))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("span",S,Object(c["toDisplayString"])(e.$filters.currency(t.paxpaid)),1),T,Object(c["createElementVNode"])("span",B,Object(c["toDisplayString"])(e.$filters.currency(t.nta)),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.currency(t.nra)),1),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$filters.currency(t.commission_client))+" ",1),C,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$filters.currency(t.commission_pusat)),1)]),Object(c["createElementVNode"])("td",M,Object(c["toDisplayString"])(t.segment_count?t.segment_count:""),1)]))),128))])])])]),_:1},8,["show"])])]),Object(c["createVNode"])(L,{options:P.options},null,8,["options"])])])])])}a("14d9");var A=a("b166"),U={components:{},props:{typeProduct:{type:String,default:"pascabayar"}},data(){return{modalOp:!1,modalStatus:!1,modalData:{},categories:[],airlines:[],status:[{code:1,name:"Booking"},{code:2,name:"Issued"},{code:3,name:"Waiting issued"},{code:9,name:"Cancelled"},{code:10,name:"Failed"}],data:[],users:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",start_date:Object(A["a"])(new Date,"yyyy-MM-dd"),end_date:Object(A["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:"",airline_code:""},loading:!1}},mounted(){this.search=this.$route.query,this.$nextTick(()=>{this.searchData(),this.loadUsers(),this.loadAirlines()})},computed:{moreParams(){let e={page:this.options.current_page,q:this.search.q,start_date:this.search.start_date,end_date:this.search.end_date,user_id:this.search.user_id,type:this.search.type,status:this.search.status,airline_code:this.search.airline?this.search.airline.code:""};return e.airline_code||(e.airline_code=this.search.airline_code),e}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{goToIssued(e){this.selectedOp(e),this.$router.push({name:"app.airlines.issued",params:{id:e.id}})},selectedOp(e){let t={operator_id:"self"},a=()=>this.$axios.post(`/airlines/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},cancel(e){let t="Yes, Cancel";this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:t}).then(t=>{if(t.isConfirmed){let t={cancel_type:2};this.$axios.post(`/airlines/${e.id}/cancel`,t).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}})},changeOp(e){this.modalData=e,this.modalOp=!0},changeStatus(e){this.modalData=e,this.modalStatus=!0},downloadEticket(e){let t=`https://api.atacorp.id/V1/app/transactions/airlines/eticket/${e.trx_no}?token=${this.$store.getters["auth/accessToken"]}`;window.open(t,"_blank")},searchData(){this.options.current_page=1,this.loadData()},setMitra(e){this.search.user_id=e?e.id:""},setStatus(e){this.search.status=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/airlines",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadUsers(){this.$axios.get("/users",{params:{role:"operator"}}).then(e=>{this.loading=!1,this.users=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadAirlines(){this.$axios.get("/products",{params:{}}).then(e=>{this.loading=!1,this.airlines=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}}},q=a("d959"),F=a.n(q);const I=F()(U,[["render",P]]);t["default"]=I},eb1c:function(e,t,a){"use strict";a.r(t);var c=a("7a23");const o={class:"col-md-12 col-sm-12"},s={class:"x_panel"},l={class:"x_content"},n={class:"row"},r={class:"col-sm-12 col-md-4 col-lg-4"},i={class:"col-sm-12 col-md-3 col-lg-3"},d={class:"col-sm-12 col-md-1 col-lg-1"},b={class:"table-responsive",style:{"min-height":"75vh"}},m={class:"row"},p={class:"col-sm-12"},h={class:"table-responsive"},O={class:"table table-striped jambo_table bulk_action table-bordered"},j=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"#"),Object(c["createElementVNode"])("th",null,"Status"),Object(c["createElementVNode"])("th",null,"Mitra ID"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("No Trx"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Waktu Booking")]),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("PNR"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Airline Code")]),Object(c["createElementVNode"])("th",null,"Rute"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Paxpaid"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("NTA")]),Object(c["createElementVNode"])("th",null,"NRA"),Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Pusat"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Mitra")]),Object(c["createElementVNode"])("th",null,"SEG")])],-1),u={key:0},N=Object(c["createElementVNode"])("td",{colspan:"11",class:"text-center"}," Data tidak ditemukan ",-1),V=[N],g={scope:"row"},E={style:{"min-width":"100px"}},y={style:{"min-width":"250px"}},_={class:"text-black-50"},x={style:{"min-width":"110px"}},k=Object(c["createElementVNode"])("br",null,null,-1),f={class:"",style:{"min-width":"250px"}},v={class:""},D=["src"],$={class:"d-flex"},w=Object(c["createElementVNode"])("div",{class:"px-3"},"-",-1),S={class:""},T=Object(c["createElementVNode"])("br",null,null,-1),B={class:""},C=Object(c["createElementVNode"])("br",null,null,-1),M={class:"text-center"};function P(e,t,a,N,P,A){const U=Object(c["resolveComponent"])("input-date-picker-range-base"),q=Object(c["resolveComponent"])("select-base"),F=Object(c["resolveComponent"])("statusbadge-base"),I=Object(c["resolveComponent"])("NoteTooltipBase"),R=Object(c["resolveComponent"])("b-overlay"),L=Object(c["resolveComponent"])("paging-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",r,[Object(c["createVNode"])(U,{start_date:P.search.start_date,"onUpdate:start_date":t[0]||(t[0]=e=>P.search.start_date=e),end_date:P.search.end_date,"onUpdate:end_date":t[1]||(t[1]=e=>P.search.end_date=e)},null,8,["start_date","end_date"])]),Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(q,{options:P.airlines,placeholder:"Pilih maskapai",modelValue:P.search.airline_code,"onUpdate:modelValue":t[2]||(t[2]=e=>P.search.airline_code=e),reduce:e=>e.code},null,8,["options","modelValue","reduce"])]),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>A.searchData&&A.searchData(...e))}," Cari ")])]),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",p,[Object(c["createVNode"])(R,{show:P.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("table",O,[j,Object(c["createElementVNode"])("tbody",null,[P.data.length<=0&&!P.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",u,V)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(P.data,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:a},[Object(c["createElementVNode"])("td",g,Object(c["toDisplayString"])((P.options.current_page-1)*P.options.per_page+a+1),1),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(F,{status:t.status_label,label:t.status_label},null,8,["status","label"])]),Object(c["createElementVNode"])("td",E,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(t.mmid),1),t.notes?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:0,notes:t.notes},null,8,["notes"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",y,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.trx_no?t.trx_no:"")+" ",1),Object(c["createElementVNode"])("div",_,Object(c["toDisplayString"])(e.$filters.dateTime(t.created_at)),1)]),Object(c["createElementVNode"])("td",x,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.pnr)+" ",1),k,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.airline_code),1)]),Object(c["createElementVNode"])("td",f,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.details,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"d-flex mb-2 align-items-center justify-content-between",key:t},[Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("img",{src:e.image_url,style:{width:"25px"},class:"pr-3"},null,8,D),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.airline_code),1)]),Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.std),1),w,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.sta),1)])]))),128))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("span",S,Object(c["toDisplayString"])(e.$filters.currency(t.paxpaid)),1),T,Object(c["createElementVNode"])("span",B,Object(c["toDisplayString"])(e.$filters.currency(t.nta)),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.currency(t.nra)),1),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$filters.currency(t.commission_client))+" ",1),C,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$filters.currency(t.commission_pusat)),1)]),Object(c["createElementVNode"])("td",M,Object(c["toDisplayString"])(t.segment_count?t.segment_count:""),1)]))),128))])])])]),_:1},8,["show"])])]),Object(c["createVNode"])(L,{options:P.options},null,8,["options"])])])])])}a("14d9");var A=a("b166"),U={components:{},props:{typeProduct:{type:String,default:"pascabayar"}},data(){return{modalOp:!1,modalStatus:!1,modalData:{},categories:[],airlines:[],status:[{code:1,name:"Booking"},{code:2,name:"Issued"},{code:3,name:"Waiting issued"},{code:9,name:"Cancelled"},{code:10,name:"Failed"}],data:[],users:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",start_date:Object(A["a"])(new Date,"yyyy-MM-dd"),end_date:Object(A["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:"",airline_code:""},loading:!1}},mounted(){this.search=this.$route.query,this.$nextTick(()=>{this.searchData(),this.loadUsers(),this.loadAirlines()})},computed:{moreParams(){let e={page:this.options.current_page,q:this.search.q,start_date:this.search.start_date,end_date:this.search.end_date,user_id:this.search.user_id,type:this.search.type,status:this.search.status,airline_code:this.search.airline?this.search.airline.code:""};return e.airline_code||(e.airline_code=this.search.airline_code),e}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{goToIssued(e){this.selectedOp(e),this.$router.push({name:"app.airlines.issued",params:{id:e.id}})},selectedOp(e){let t={operator_id:"self"},a=()=>this.$axios.post(`/airlines/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},cancel(e){let t="Yes, Cancel";this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:t}).then(t=>{if(t.isConfirmed){let t={cancel_type:2};this.$axios.post(`/salesman/airlines/${e.id}/cancel`,t).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}})},changeOp(e){this.modalData=e,this.modalOp=!0},changeStatus(e){this.modalData=e,this.modalStatus=!0},downloadEticket(e){let t=`https://api.atacorp.id/V1/app/transactions/airlines/eticket/${e.trx_no}?token=${this.$store.getters["auth/accessToken"]}`;window.open(t,"_blank")},searchData(){this.options.current_page=1,this.loadData()},setMitra(e){this.search.user_id=e?e.id:""},setStatus(e){this.search.status=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/airlines",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadUsers(){this.$axios.get("/users",{params:{role:"operator"}}).then(e=>{this.loading=!1,this.users=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadAirlines(){this.$axios.get("/products",{params:{}}).then(e=>{this.loading=!1,this.airlines=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}}},q=a("d959"),F=a.n(q);const I=F()(U,[["render",P]]);t["default"]=I}}]);