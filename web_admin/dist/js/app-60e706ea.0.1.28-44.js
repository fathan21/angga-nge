(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-60e706ea"],{"77b5":function(e,t,o){"use strict";var a=o("7a23");const c={class:"row"},l={class:"col-md-6 col-sm-12"},s={class:"x_panel"},n=Object(a["createElementVNode"])("div",{class:"x_title"},[Object(a["createElementVNode"])("h2",null,"Profile"),Object(a["createElementVNode"])("div",{class:"clearfix"})],-1),r={class:"x_content"},i={class:"table-responsive"},d={class:"table-settings text-16"},m=Object(a["createElementVNode"])("td",{class:"text-grey-light",style:{width:"100px"}}," Nama ",-1),p={class:"font-weight-bold"},b=Object(a["createElementVNode"])("td",{class:"text-grey-light"},"Email",-1),u={class:"font-weight-bold"},h=Object(a["createElementVNode"])("td",{class:"text-grey-light"},"Phone",-1),O={class:"font-weight-bold"},j=Object(a["createElementVNode"])("td",{class:"text-grey-light"}," Saldo Aktif ",-1),y={class:"text-primary font-weight-bold"},f={class:"col-md-6 col-sm-12"},E={class:"x_panel"},V={class:"x_title"},g=Object(a["createElementVNode"])("h2",null,"Akes API",-1),N={class:"nav navbar-right panel_toolbox"},k=Object(a["createElementVNode"])("div",{class:"clearfix"},null,-1),v={key:0,class:"py-4 text-center"},w={key:1,class:"x_content"},x={class:"table-responsive"},C={class:"text-16 table-settings"},B=Object(a["createElementVNode"])("td",{class:"text-grey-light",style:{width:"150px"}}," Username ",-1),S={class:"font-weight-bold"},_={class:"input-group"},$=["value"],P=Object(a["createElementVNode"])("i",{class:"fa fa-copy"},null,-1),F=[P],A=Object(a["createElementVNode"])("td",{class:"text-grey-light"},"Api Key",-1),I={class:"font-weight-bold"},D={class:"input-group"},M=["value"],T=Object(a["createElementVNode"])("i",{class:"fa fa-copy"},null,-1),L=[T],U=Object(a["createElementVNode"])("td",{class:"text-grey-light"},"Callback URL",-1),q={class:"font-weight-bold"},J={class:"input-group"},R=["value"],z=Object(a["createElementVNode"])("i",{class:"fa fa-copy"},null,-1),K=[z],W=Object(a["createElementVNode"])("td",{class:"text-grey-light"}," IP Whitelist ",-1),G={class:"text-primary font-weight-bold"},H={class:"input-group"},Q=["value"],X=["onClick"],Y=Object(a["createElementVNode"])("i",{class:"fa fa-copy"},null,-1),Z=[Y],ee={key:0,class:"col-sm12"};function te(e,t,o,P,T,z){const Y=Object(a["resolveComponent"])("b-overlay"),te=Object(a["resolveComponent"])("b-button"),oe=Object(a["resolveComponent"])("supplier-setting");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",c,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",s,[n,Object(a["createVNode"])(Y,{show:T.loading,rounded:"sm"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("table",d,[Object(a["createElementVNode"])("tr",null,[m,Object(a["createElementVNode"])("td",p," :    "+Object(a["toDisplayString"])(T.data.name),1)]),Object(a["createElementVNode"])("tr",null,[b,Object(a["createElementVNode"])("td",u," :    "+Object(a["toDisplayString"])(T.data.email),1)]),Object(a["createElementVNode"])("tr",null,[h,Object(a["createElementVNode"])("td",O," :    "+Object(a["toDisplayString"])(T.data.phone),1)]),Object(a["createElementVNode"])("tr",null,[j,Object(a["createElementVNode"])("td",y," :    Rp. "+Object(a["toDisplayString"])(T.data.mitra&&T.data.mitra.saldo?e.$filters.currency(T.data.mitra.saldo):"0"),1)])])])])]),_:1},8,["show"])])]),Object(a["createElementVNode"])("div",f,[Object(a["createElementVNode"])("div",E,[Object(a["createElementVNode"])("div",V,[g,Object(a["createElementVNode"])("ul",N,[Object(a["createElementVNode"])("li",null,[T.showAksesServer?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,class:"btn btn-sm btn-primary",type:"button",onClick:t[0]||(t[0]=e=>T.showAksesServer=!1)}," Sebunyikan Akses ")):Object(a["createCommentVNode"])("",!0)])]),k]),Object(a["createVNode"])(Y,{show:T.loading,rounded:"sm"},{default:Object(a["withCtx"])(()=>[T.showAksesServer?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",w,[Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("table",C,[Object(a["createElementVNode"])("tr",null,[B,Object(a["createElementVNode"])("td",S,[Object(a["createElementVNode"])("div",_,[Object(a["createElementVNode"])("input",{type:"text",readonly:"",class:"form-control",value:T.data.mitra?T.data.mitra.username:"-"},null,8,$),Object(a["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",id:"button-addon1",onClick:t[1]||(t[1]=e=>z.copy(T.data.mitra?T.data.mitra.username:""))},F)])])]),Object(a["createElementVNode"])("tr",null,[A,Object(a["createElementVNode"])("td",I,[Object(a["createElementVNode"])("div",D,[Object(a["createElementVNode"])("input",{type:"text",readonly:"",class:"form-control",value:T.data.mitra?T.data.mitra.api_key:"-"},null,8,M),Object(a["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",id:"button-addon1",onClick:t[2]||(t[2]=e=>z.copy(T.data.mitra?T.data.mitra.api_key:""))},L)])])]),Object(a["createElementVNode"])("tr",null,[U,Object(a["createElementVNode"])("td",q,[Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("input",{type:"text",readonly:"",class:"form-control",value:T.data.mitra?T.data.mitra.callback_url:"-"},null,8,R),Object(a["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",id:"button-addon1",onClick:t[3]||(t[3]=e=>z.copy(T.data.mitra?T.data.mitra.callback_url:""))},K)])])]),Object(a["createElementVNode"])("tr",null,[W,Object(a["createElementVNode"])("td",G,[T.data.mitra?(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(T.data.mitra.ip_whitelist,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:t},[Object(a["createElementVNode"])("div",H,[Object(a["createElementVNode"])("input",{type:"text",readonly:"",class:"form-control",value:e||"-"},null,8,Q),Object(a["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",id:"button-addon1",onClick:t=>z.copy(e||"")},Z,8,X)])]))),128)):Object(a["createCommentVNode"])("",!0)])])])])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createVNode"])(te,{variant:"primary",class:"mx-auto",onClick:z.showConfirmPassword},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Tampilkan Akses API ")]),_:1},8,["onClick"])]))]),_:1},8,["show"])])]),T.data.hasAcc?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ee,[Object(a["createVNode"])(oe,{showAksesServer:T.showAksesServer,onShowConfirm:z.showConfirmPassword},null,8,["showAksesServer","onShowConfirm"])])):Object(a["createCommentVNode"])("",!0)])}o("5b81");const oe={class:"row"},ae={class:"col-md-12 col-sm-12"},ce={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},le={class:"x_panel"},se={class:"x_title"},ne={key:0},re={key:1},ie=Object(a["createElementVNode"])("div",{class:"clearfix"},null,-1),de={key:0},me={key:1,class:"table-responsive"},pe={class:"table table-striped jambo_table bulk_action table-bordered"},be=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",{class:""},"No"),Object(a["createElementVNode"])("th",{class:""},"Supplier"),Object(a["createElementVNode"])("th",{class:""},"Config"),Object(a["createElementVNode"])("th",{class:""},"Last Syc"),Object(a["createElementVNode"])("th",{class:"",style:{width:"170px"}},"#")])],-1),ue={key:0},he=Object(a["createElementVNode"])("td",{colspan:"5"},"Data tidak ditemukan",-1),Oe=[he],je={style:{width:"30px"}},ye={key:0,class:"py-4 text-center"},fe={class:"text-uppercase"},Ee={style:{"min-width":"250px"}},Ve=["onClick"],ge=Object(a["createElementVNode"])("i",{class:"fa fa-pencil"},null,-1),Ne=[ge],ke=["onClick"];function ve(e,t,o,c,l,s){const n=Object(a["resolveComponent"])("supplier-form"),r=Object(a["resolveComponent"])("b-button"),i=Object(a["resolveComponent"])("b-overlay");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",oe,[Object(a["createElementVNode"])("div",ae,[l.succesMessage?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ce,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(l.succesMessage)+" ",1),Object(a["createElementVNode"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=e=>l.succesMessage=null)})])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",le,[Object(a["createElementVNode"])("div",se,[l.addItemForm?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h2",re,"Register Supplier (PPOB) Mitra ")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("h2",ne,"Daftar Supplier (PPOB) Mitra")),ie]),Object(a["createVNode"])(i,{show:l.loading,rounded:"sm"},{default:Object(a["withCtx"])(()=>[l.addItemForm?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",de,[Object(a["createVNode"])(n,{onCancel:t[1]||(t[1]=e=>l.addItemForm=!1),onSave:t[2]||(t[2]=()=>{l.addItemForm=!1,s.loadSupplierMitra()}),show:l.addItemForm,suppliers:l.suppliers,data:l.addItemFormData},null,8,["show","suppliers","data"])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",me,[Object(a["createElementVNode"])("table",pe,[be,Object(a["createElementVNode"])("tbody",null,[l.supplierMitra.length<=0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",ue,Oe)):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(l.supplierMitra,(t,c)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:c},[Object(a["createElementVNode"])("td",je,Object(a["toDisplayString"])(c+1),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.name),1),Object(a["createElementVNode"])("td",null,[o.showAksesServer?(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:1},Object(a["renderList"])(t.config,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:t},[Object(a["createElementVNode"])("span",fe,Object(a["toDisplayString"])(t.replaceAll("_"," ")),1),Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(e),1)]))),128)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ye,[Object(a["createVNode"])(r,{variant:"primary",class:"mx-auto",onClick:s.showConfirmPwd},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Tampilkan Pengaturan ")]),_:1},8,["onClick"])]))]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.dateTime(t.last_sync)||"-"),1),Object(a["createElementVNode"])("td",Ee,[o.showAksesServer?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,class:"btn btn-sm btn-action-list btn-warning",type:"button",onClick:e=>s.ediItem(t)},Ne,8,Ve)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("button",{class:"btn btn-sm btn-action-list btn-info",type:"button",onClick:e=>s.syncProduct(t)}," Sync Product ",8,ke)])]))),128))])])]))]),_:1},8,["show"])])])])}const we={class:"item form-group"},xe=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Tipe Produk "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),Ce={class:"col-md-6 col-sm-6"},Be=["value"],Se={class:"item form-group"},_e=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Supplier "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),$e={class:"col-md-6 col-sm-6"},Pe={key:0,class:"p-error"},Fe={class:"col-form-label col-md-3 col-sm-3 label-align"},Ae=Object(a["createElementVNode"])("span",{class:"required"},"*",-1),Ie={class:"col-md-6 col-sm-6"},De=["onUpdate:modelValue","readonly"],Me=Object(a["createElementVNode"])("div",{class:"ln_solid"},null,-1),Te={class:"item form-group"},Le={class:"col-md-6 col-sm-6 offset-md-3"},Ue=Object(a["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function qe(e,t,o,c,l,s){const n=Object(a["resolveComponent"])("Field"),r=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])(r,{onSubmit:s.onSubmit,"validation-schema":l.schema,class:"signin-form"},{default:Object(a["withCtx"])(({errors:o})=>[Object(a["createElementVNode"])("div",we,[xe,Object(a["createElementVNode"])("div",Ce,[Object(a["createElementVNode"])("input",{name:"product_type",class:"form-control",readonly:"",value:l.form.product_type},null,8,Be)])]),Object(a["createElementVNode"])("div",Se,[_e,Object(a["createElementVNode"])("div",$e,[Object(a["createVNode"])(n,{name:"supplier_code",class:Object(a["normalizeClass"])(["form-control",[{"p-error":o.supplier_code}]]),modelValue:l.form.supplier_code,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.supplier_code=e),type:"text",readonly:""},null,8,["modelValue","class"]),o.supplier_code?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Pe," *"+Object(a["toDisplayString"])(o.supplier_code),1)):Object(a["createCommentVNode"])("",!0)])]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(l.addonFields,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"item form-group",key:t},[Object(a["createElementVNode"])("label",Fe,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label)+" ",1),Ae]),Object(a["createElementVNode"])("div",Ie,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t=>e.value=t,class:"form-control",readonly:e.readonly},null,8,De),[[a["vModelText"],e.value]])])]))),128)),Me,Object(a["createElementVNode"])("div",Te,[Object(a["createElementVNode"])("div",Le,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[1]||(t[1]=t=>e.$emit("cancel"))}," Cancel "),Ue])])]),_:1},8,["onSubmit","validation-schema"])}o("14d9");var Je=o("7bb1"),Re=o("506a"),ze={components:{Form:Je["b"],Field:Je["a"]},props:{suppliers:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){return{}}},show:Boolean},data(){const e=Re["a"]({supplier_code:Re["b"]().required()});return{id:"",imagePrev:"",form:{supplier_code:""},addonFields:[],old:{},schema:e}},watch:{"form.supplier_code":function(){let e=this.suppliers.findIndex(e=>e.code==this.form.supplier_code);if(e>-1){let t=JSON.parse(this.suppliers[e].config_fields),o=[];for(let e in t){let a=this.data.code==this.form.supplier_code&&this.data&&this.data.config&&this.data.config[e]?this.data.config[e]:"",c="callback_url"==e&&"readonly";o.push({name:e,readonly:c,label:e.replace("_"," ").toLocaleUpperCase(),value:a,validation:t[e]})}this.addonFields=o}},show(){}},methods:{reset(){this.form={supplier_code:""},this.addonFields=[]},onSubmit(e){let t=Object.assign({},e),o={},a=null;for(let l=0;l<this.addonFields.length;l++){const e=this.addonFields[l];e.value?o[e.name]=e.value:a=1}if(a)return void this.$root.notif("semua data harus diisi",{type:"error",position:"top"});o.product_type=this.form.product_type,t.config=JSON.stringify(o),this.data.id&&(t.id=this.data.id);let c=()=>this.$axios.post("/supplier-mitra",t);this.data.id&&(c=()=>this.$axios.put("/supplier-mitra/"+this.data.id,t)),c().then(e=>{this.$root.notif(e.message),this.$emit("save")}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}},mounted(){this.form={supplier_code:""},this.show&&this.data.id&&this.$nextTick(()=>{this.form.supplier_code=this.data.code,console.log(this.data.config.product_type),this.data.config&&this.data.config.product_type&&(this.form.product_type=this.data.config.product_type)})}},Ke=o("d959"),We=o.n(Ke);const Ge=We()(ze,[["render",qe]]);var He=Ge,Qe={components:{SupplierForm:He},props:{showAksesServer:{default:null}},data(){return{succesMessage:null,data:{},loading:!1,suppliers:[],supplierMitra:[],addItemFormData:{},addItemForm:!1}},mounted(){this.loadSuppliers(),this.loadSupplierMitra()},methods:{copy(e){let t="behasil di copy";const o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),this.$root.notif(t)},async addItem(){this.addItemFormData={},this.addItemForm=!0},async ediItem(e){this.addItemFormData=Object.assign({},e),this.addItemForm=!0},removeItem(e){this.$axios.delete("/supplier-mitra/"+e.code).then(()=>{this.loadSupplierMitra()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadSuppliers(){this.loading=!0,this.$axios.get("/suppliers?product_code=PPOB").then(e=>{this.suppliers=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadSupplierMitra(){this.loading=!0,this.$axios.get("/supplier-mitra?product_code=PPOB").then(e=>{this.supplierMitra=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},showConfirmPwd(){this.$emit("showConfirm")},syncProduct(e){this.loading=!0,this.succesMessage=null,this.$axios.get("/supplier-mitra/"+e.id).then(e=>{this.succesMessage=e.message,this.$root.notif(e.message,{type:"info",position:"top"})}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}};const Xe=We()(Qe,[["render",ve]]);var Ye=Xe,Ze={components:{SupplierSetting:Ye},data(){return{data:{},loading:!1,showAksesServer:!1}},mounted(){this.loadInfo()},methods:{copy(e){let t="behasil di copy";const o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),this.$root.notif(t)},async showConfirmPassword(){this.$swal({title:"<strong></strong>",html:'<input id="my-input-pwd" type="password" placeholder="Masukan Password" class="form-control">',preConfirm:()=>[document.getElementById("my-input-pwd").value],showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"cancel",showCloseButton:!0}).then(e=>{if(e.isConfirmed){let t=e.value[0];if(!t)return this.$root.notif("masukan password terlebih dahulu",{type:"error",position:"top"}),void this.showConfirmPassword();this.$store.dispatch("loading",!0),this.$axios.post("/show-akses-server",{password:t}).then(()=>{this.showAksesServer=!0,setTimeout(()=>{this.showAksesServer=!1},6e4)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.showConfirmPassword()}).finally(()=>{this.$store.dispatch("loading",!1)})}})},async confirmOtp(){this.$swal({title:"<strong></strong>",html:'\n                            <div>\n                                <input id="my-input-pwd" type="password" placeholder="Masukan Otp" class="form-control">\n                            <div>\n                            \n                    ',preConfirm:()=>[document.getElementById("my-input-pwd").value],showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"cancel",showCloseButton:!0}).then(e=>{if(e.isConfirmed){let t=e.value[0];if(!t)return this.$root.notif("masukan otp terlebih dahulu",{type:"error",position:"top"}),void this.confirmOtp();this.$store.dispatch("loading",!0),this.$axios.post("/confirm-otp",{password:t}).then(()=>{this.showAksesServer=!0,setTimeout(()=>{this.showAksesServer=!1},6e4)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.showConfirmPassword()}).finally(()=>{this.$store.dispatch("loading",!1)})}})},loadInfo(){this.loading=!0,this.$axios.get("/mitra-info",{params:this.moreParams}).then(e=>{this.data=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}};o("d8f8");const et=We()(Ze,[["render",te]]);t["a"]=et},"8b55":function(e,t,o){},d8f8:function(e,t,o){"use strict";o("8b55")}}]);