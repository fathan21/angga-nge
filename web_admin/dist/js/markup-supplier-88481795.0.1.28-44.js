(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["markup-supplier-88481795"],{"48b4":function(e,t,o){"use strict";o.r(t);var c=o("7a23");const a={class:"col-md-12 col-sm-12"},l={class:"x_panel"},r={class:"x_content"},i={class:"table-responsive",style:{"min-height":"75vh"}},s={class:"row"},n={class:"col-sm-12 col-md-6 col-lg-3"},d={class:"col-sm-12 col-md-6 col-lg-3"},p={class:"col-sm-12 col-md-6 col-lg-3"},m={class:"col-sm-12 col-md-6 col-lg-3"},b={class:"input-group"},u={key:0},O=Object(c["createElementVNode"])("div",{class:"pt-3"},[Object(c["createElementVNode"])("div",{class:"alert alert-warning app-alert",role:"alert"},[Object(c["createElementVNode"])("div",{class:"h6 text-center"},[Object(c["createElementVNode"])("i",{class:"fa fa-info-circle"}),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" Pilih supplier dan tipe terlebih dahulu,"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" kemudian klik cari untuk melihat data ")])])],-1),h=[O],j={key:1},k={class:"row"},y={class:"col-sm-12 text-end"},V={class:"row"},g={class:"col-sm-12"},_={class:"table-responsive"},N={class:"table table-striped jambo_table bulk_action table-bordered"},E=Object(c["createElementVNode"])("th",null,"#",-1),A=Object(c["createElementVNode"])("th",null,"Detail Produk",-1),B=Object(c["createElementVNode"])("th",null,"Last Sync",-1),C={key:0},f={key:1},v={key:2},S={key:3},x={key:0},D=Object(c["createElementVNode"])("td",{colspan:"9",class:"text-center"}," Data tidak ditemukan ",-1),P=[D],w={scope:"row"},$=Object(c["createElementVNode"])("br",null,null,-1),R=Object(c["createElementVNode"])("br",null,null,-1),T={key:0},Y={key:1},U={key:2},K=Object(c["createElementVNode"])("br",null,null,-1),M=Object(c["createElementVNode"])("br",null,null,-1),q=Object(c["createElementVNode"])("br",null,null,-1),J={style:{width:"150px"}},L={style:{width:"150px"}},F={key:3,style:{width:"150px"}};function z(e,t,o,O,D,z){const G=Object(c["resolveComponent"])("select-supplier-user-base"),H=Object(c["resolveComponent"])("select-base"),I=Object(c["resolveComponent"])("b-button"),Q=Object(c["resolveComponent"])("statusbadge-base"),W=Object(c["resolveComponent"])("b-popover"),X=Object(c["resolveComponent"])("input-currency-base"),Z=Object(c["resolveComponent"])("b-overlay"),ee=Object(c["resolveComponent"])("paging-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",n,[Object(c["createVNode"])(G,{onOnChange:z.setSupplier,product_code:"PPOB"},null,8,["onOnChange"])]),Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(H,{options:D.types,placeholder:"Pilih Tipe",onOnChange:z.setType},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",p,[Object(c["createVNode"])(H,{options:z.categoryOptions,placeholder:"Semua Produk",onOnChange:z.setCategory},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[0]||(t[0]=e=>D.search.q=e),onKeyup:t[1]||(t[1]=Object(c["withKeys"])((...e)=>z.searchData&&z.searchData(...e),["enter"]))},null,544),[[c["vModelText"],D.search.q]]),Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>z.searchData&&z.searchData(...e))}," Cari ")])])]),D.submited?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,h)),D.submited?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",j,[Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",y,[Object(c["createVNode"])(I,{variant:"success",onClick:z.save},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Simpan Perubahan ")]),_:1},8,["onClick"])])]),Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",g,[Object(c["createVNode"])(Z,{show:D.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("table",N,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[E,A,B,"PRABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",C,"Nominal")):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",f,"Modal")):Object(c["createCommentVNode"])("",!0),"PASCABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",v,"Admin")):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])("PASCABAYAR"==D.options.type?"Komisi":"Markup"),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])("PASCABAYAR"==D.options.type?"Komisi Core":"Markup Core"),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])("PASCABAYAR"==D.options.type?"Komisi Broker":"Markup Broker"),1),"PASCABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",S,"Komisi Mitra")):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("tbody",null,[D.data.length<=0&&!D.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",x,P)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(D.data,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[Object(c["createElementVNode"])("td",w,Object(c["toDisplayString"])((D.options.current_page-1)*D.options.per_page+o+1),1),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.code)+" ",1),Object(c["createVNode"])(Q,{status:t.status,label:t.status_label},null,8,["status","label"]),$,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.name),1),R,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.product_code),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.dateTime(t.last_sync)),1),"PRABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",T,Object(c["toDisplayString"])(t.nominal?e.$filters.currency(t.nominal):"-"),1)):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",Y,Object(c["toDisplayString"])(t.harga_modal?e.$filters.currency(t.harga_modal):"-"),1)):Object(c["createCommentVNode"])("",!0),"PASCABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",U,Object(c["toDisplayString"])(t.admin?e.$filters.currency(t.admin):"-"),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),Object(c["createVNode"])(I,{id:"pop"+o,class:"badge"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("detail")]),_:2},1032,["id"]),Object(c["createVNode"])(W,{target:"pop"+o,triggers:"focus"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" full : "+Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),K,Object(c["createTextVNode"])(" core : "+Object(c["toDisplayString"])(t.komisi_core_old?e.$filters.currency(t.komisi_core_old):0)+" ",1),M,Object(c["createTextVNode"])(" broker : "+Object(c["toDisplayString"])(t.komisi_broker_old?e.$filters.currency(t.komisi_broker_old):0)+" ",1),q,Object(c["createTextVNode"])(" mitra : "+Object(c["toDisplayString"])(t.komisi_mitra_old?e.$filters.currency(t.komisi_mitra_old):0),1)]),_:2},1032,["target"])]),Object(c["createElementVNode"])("td",J,[D.loading?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(X,{key:0,modelValue:t.komisi_core,"onUpdate:modelValue":e=>t.komisi_core=e,class:"form-control"},null,8,["modelValue","onUpdate:modelValue"]))]),Object(c["createElementVNode"])("td",L,[D.loading?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(X,{key:0,modelValue:t.komisi_broker,"onUpdate:modelValue":e=>t.komisi_broker=e,class:"form-control"},null,8,["modelValue","onUpdate:modelValue"]))]),"PASCABAYAR"==D.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",F,[D.loading?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(X,{key:0,modelValue:t.komisi_mitra,"onUpdate:modelValue":e=>t.komisi_mitra=e,class:"form-control"},null,8,["modelValue","onUpdate:modelValue"]))])):Object(c["createCommentVNode"])("",!0)]))),128))])])])]),_:1},8,["show"])])]),D.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(ee,{key:0,modelValue:D.options.current_page,"onUpdate:modelValue":t[3]||(t[3]=e=>D.options.current_page=e),options:D.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])])])])}var G={data(){return{data:[],options:{current_page:1,total_row:0,per_page:50,type:""},search:{q:"",supplier_code:"",type:"",category:""},loading:!1,submited:!1,categories:[],types:[{code:"PASCABAYAR",name:"PASCABAYAR"},{code:"PRABAYAR",name:"PRABAYAR"}]}},mounted(){this.loadCategories()},computed:{moreParams(){return{page:this.options.current_page,per_page:this.options.per_page,q:this.search.q,supplier_code:this.search.supplier_code,supplier_user_id:this.search.supplier_user_id,type:this.search.type,category:this.search.category}},categoryOptions(){if(this.search.type){let e=this.categories.filter(e=>e.type==this.search.type);return e}return this.categories},isAdmin(){return!!(this.user&&this.user.role&&this.user.role.indexOf("admin")>-1)}},watch:{"options.current_page":{handler:function(){this.loadData()}},"search.start_date":{handler:function(){this.loadData()}}},methods:{setType(e){this.search.type=e?e.code:""},loadCategories(){this.loadingCategories=!0,this.$axios.get("/ppob/product-categories",{params:this.moreParams}).then(e=>{this.categories=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},setCategory(e){this.search.category=e?e.code:""},searchData(){this.search.supplier_code?this.search.type?(this.options.current_page=1,this.loadData(),this.submited=!0):this.$root.notif("Pilih tipe dahulu",{type:"error",position:"top"}):this.$root.notif("Pilih supplier terlebih dahulu",{type:"error",position:"top"})},setSupplier(e){e?(this.search.supplier_code=e.supplier_code,this.search.supplier_user_id=e.id):(this.search.supplier_code="",this.search.supplier_user_id="")},loadData(){this.search.supplier_code?(this.loading=!0,this.$axios.get(`/suppliers/${this.search.supplier_code}/products`,{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total;let t=Object.assign({},this.search);this.options.type=t.type}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})):this.$root.notif("Pilih Supplier terlebih dahulu",{type:"error",position:"top"})},save(){let e=this.data.map(e=>({product_ppob_id:e.id,code:e.code,type:this.search.type,komisi_full:e.komisi_full,komisi_core:e.komisi_core,komisi_broker:e.komisi_broker,komisi_mitra:e.komisi_mitra,komisi_core_old:e.komisi_core_old,komisi_broker_old:e.komisi_broker_old,komisi_mitra_old:e.komisi_mitra_old}));this.$store.dispatch("loading",!0),this.$axios.put(`/suppliers/${this.search.supplier_code}/products`,{products:e}).then(e=>{this.$root.notif(e.message,{type:"info",position:"top"})}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1),this.loadData()})}}},H=o("d959"),I=o.n(H);const Q=I()(G,[["render",z]]);t["default"]=Q}}]);