(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ppob-pending-8f9d7907"],{"145b":function(e,t,a){"use strict";a.r(t);var c=a("7a23");const o={class:"col-md-12 col-sm-12"},l={class:"x_panel"},r={class:"x_content"},n={class:"table-responsive",style:{"min-height":"75vh"}},s={class:"row"},i={class:"col-sm-12 col-md-6 col-lg-2"},d={class:"col-sm-12 col-md-6 col-lg-2"},b={class:"col-sm-12 col-md-6 col-lg-3"},m={class:"input-group"},p={class:"row"},O={class:"col-sm-12"},j={class:"table-responsive table-responsive-sticky"},u={class:"table table-striped jambo_table bulk_action table-bordered table-sm"},h=Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])(" Tanggal "),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" Transaksi ")],-1),g=Object(c["createElementVNode"])("th",null,"ID Transaksi",-1),V=Object(c["createElementVNode"])("th",null,"Status",-1),N=Object(c["createElementVNode"])("th",null,"Mitra",-1),y=Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])(" Produk "),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" Layanan ")],-1),k=Object(c["createElementVNode"])("th",null,"Supplier",-1),E={key:0},C=Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Nomor"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Pelanggan")],-1),f=Object(c["createElementVNode"])("th",null,"SN/Token/Reff",-1),x=Object(c["createElementVNode"])("th",{class:"text-end"},[Object(c["createElementVNode"])("div",null," Harga Jual "),Object(c["createElementVNode"])("div",null," Harga Modal ")],-1),_=Object(c["createElementVNode"])("th",{class:"text-end"},"Admin",-1),v=Object(c["createElementVNode"])("th",{class:"text-end"},"Komisi Pusat",-1),D=Object(c["createElementVNode"])("th",{style:{"min-width":"100px"}},"#",-1),S={key:0},w=Object(c["createElementVNode"])("td",{colspan:"18",class:"text-center"}," Data tidak ditemukan ",-1),B=[w],T={scope:"row",style:{"min-width":"130px"}},$={class:"text-success",style:{"min-width":"200px"}},P={class:"text-warning"},A={key:0,class:"text-info"},R={style:{"min-width":"150px"}},q={class:"text-10 text-black-50"},M={key:0,class:"text-end"},z={style:{"min-width":"150px"}},Y=Object(c["createElementVNode"])("br",null,null,-1),J={style:{"min-width":"150px"}},K={key:0},U={key:1},F={style:{"min-width":"150px"},class:"text-end"},H={class:"text-end"},L={class:"text-end",style:{"min-width":"100px"}},I=Object(c["createElementVNode"])("br",null,null,-1),G=Object(c["createElementVNode"])("br",null,null,-1),Q=Object(c["createElementVNode"])("br",null,null,-1),W={style:{"min-width":"170px"},class:"text-center"},X=Object(c["createElementVNode"])("i",{class:"fa fa-edit"},null,-1),Z=Object(c["createElementVNode"])("i",{class:"fa fa-file-pdf-o"},null,-1);function ee(e,t,a,w,ee,te){const ae=Object(c["resolveComponent"])("select-mitra-base"),ce=Object(c["resolveComponent"])("select-base"),oe=Object(c["resolveComponent"])("NoteTooltipBase"),le=Object(c["resolveComponent"])("statusbadge-base"),re=Object(c["resolveComponent"])("mitra-link-base"),ne=Object(c["resolveComponent"])("b-button"),se=Object(c["resolveComponent"])("b-popover"),ie=Object(c["resolveComponent"])("b-overlay"),de=Object(c["resolveComponent"])("paging-base"),be=Object(c["resolveComponent"])("ChangeStatus"),me=Object(c["resolveComponent"])("modal-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(ae,{onOnChange:te.setMitra},null,8,["onOnChange"])]),Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(ce,{options:ee.categories,placeholder:"Pilih Produk",onOnChange:te.setCategory},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",m,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[0]||(t[0]=e=>ee.search.q=e),onKeyup:t[1]||(t[1]=Object(c["withKeys"])((...e)=>te.searchData&&te.searchData(...e),["enter"]))},null,544),[[c["vModelText"],ee.search.q]]),Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>te.searchData&&te.searchData(...e))}," Cari ")])])]),Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",O,[Object(c["createVNode"])(ie,{show:ee.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("table",u,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[h,g,V,N,y,k,"prabayar"==a.typeProduct?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",E,"Denom")):Object(c["createCommentVNode"])("",!0),C,f,x,_,v,D])]),Object(c["createElementVNode"])("tbody",null,[ee.data.length<=0&&!ee.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",S,B)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(ee.data,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[Object(c["createElementVNode"])("td",T,Object(c["toDisplayString"])(e.$filters.dateTime(t.created_at)),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",$,Object(c["toDisplayString"])(t.ref_2),1),Object(c["createElementVNode"])("div",P,Object(c["toDisplayString"])(t.ref_3),1),t.ref_1?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",A,Object(c["toDisplayString"])(t.ref_1),1)):Object(c["createCommentVNode"])("",!0),t.notes?(Object(c["openBlock"])(),Object(c["createBlock"])(oe,{key:1,notes:t.notes},null,8,["notes"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(le,{status:t.status,label:t.status_label},null,8,["status","label"])]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(re,{mitra:t.mitra},null,8,["mitra"])]),Object(c["createElementVNode"])("td",R,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.category_code)+" ",1),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(t.product_name),1),Object(c["createElementVNode"])("div",q,Object(c["toDisplayString"])(t.product_code),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.supplier_code),1),"prabayar"==a.typeProduct?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",M,Object(c["toDisplayString"])(t.nominal?e.$filters.currency(t.nominal):""),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("td",z,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.customer_id)+" ",1),Y,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.data&&t.data.nama?t.data.nama:""),1)]),Object(c["createElementVNode"])("td",J,[t.reference?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",K," REF: "+Object(c["toDisplayString"])(t.reference),1)):Object(c["createCommentVNode"])("",!0),t.sn?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",U," SN: "+Object(c["toDisplayString"])(t.sn),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",F,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$filters.currency(t.total_price))+" ",1),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.$filters.currency(t.debet_mitra)),1)]),Object(c["createElementVNode"])("td",H,Object(c["toDisplayString"])(e.$filters.currency(t.admin)),1),Object(c["createElementVNode"])("td",L,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$filters.currency(t.komisi_core))+" ",1),Object(c["createVNode"])(ne,{id:"pop"+o,class:"badge"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("detail")]),_:2},1032,["id"]),Object(c["createVNode"])(se,{target:"pop"+o,triggers:"focus"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" full : "+Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),I,Object(c["createTextVNode"])(" core : "+Object(c["toDisplayString"])(t.komisi_core?e.$filters.currency(t.komisi_core):0)+" ",1),G,Object(c["createTextVNode"])(" broker : "+Object(c["toDisplayString"])(t.komisi_broker?e.$filters.currency(t.komisi_broker):0)+" ",1),Q,Object(c["createTextVNode"])(" mitra : "+Object(c["toDisplayString"])(t.komisi_mitra?e.$filters.currency(t.komisi_mitra):0),1)]),_:2},1032,["target"])]),Object(c["createElementVNode"])("td",W,[Object(c["createVNode"])(ne,{size:"sm",variant:"info",onClick:e=>te.editStatus(t)},{default:Object(c["withCtx"])(()=>[X]),_:2},1032,["onClick"]),1==t.status?(Object(c["openBlock"])(),Object(c["createBlock"])(ne,{key:0,size:"sm",variant:"danger",onClick:e=>te.downloadEticket(t)},{default:Object(c["withCtx"])(()=>[Z]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(ne,{size:"sm",variant:t.loadingCallback?"":"outline-info",onClick:e=>te.sendCallback(t)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.loadingCallback?"Callback...":"Callback"),1)]),_:2},1032,["variant","onClick"])])]))),128))])])])]),_:1},8,["show"])])]),ee.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(de,{key:0,modelValue:ee.options.current_page,"onUpdate:modelValue":t[3]||(t[3]=e=>ee.options.current_page=e),options:ee.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createVNode"])(me,{modelValue:ee.modalStatus,"onUpdate:modelValue":t[6]||(t[6]=e=>ee.modalStatus=e),size:"modal-lg"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(be,{data:ee.modalData,onCancel:t[4]||(t[4]=()=>{ee.modalStatus=!1}),onSave:t[5]||(t[5]=()=>{ee.modalStatus=!1,this.searchData()})},null,8,["data"])]),_:1},8,["modelValue"])])}var te=a("8e4a"),ae={props:{typeProduct:{type:String,default:"pascabayar"}},components:{ChangeStatus:te["a"]},data(){return{categories:[],types:[{code:"PASCABAYAR",name:"PASCABAYAR"},{code:"PRABAYAR",name:"PRABAYAR"}],loadingCategories:!1,data:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",user_id:"",type:"",category:"",status:"2"},loading:!1,modalStatus:!1,modalData:{}}},mounted(){this.search.type=this.typeProduct,this.loadCategories(),this.searchData()},computed:{moreParams(){return{page:this.options.current_page,status:this.search.status,q:this.search.q,start_date:this.search.start_date,end_date:this.search.end_date,user_id:this.search.user_id,category:this.search.category}},categoryOptions(){if(this.search.type){let e=this.categories;return e}return this.categories}},watch:{typeProduct:{handler:function(){this.search.type=this.typeProduct,this.searchData()}},"options.current_page":{handler:function(){this.loadData()}}},methods:{sendCallback(e){e.loadingCallback=!0,this.$axios.post("/ppob/send-callback",e).then(e=>{this.$root.notif(e.data.message,{type:"info",position:"top"})}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{e.loadingCallback=!1})},editStatus(e){this.modalData=Object.assign({},e),this.modalStatus=!0},downloadEticket(e){let t=`https://api.atacorp.id/V1/app/transactions/ppob/eticket/${e.ref_2}?token=${this.$store.getters["auth/accessToken"]}`;window.open(t,"_blank")},searchData(){this.options.current_page=1,this.loadData()},loadCategories(){this.loadingCategories=!0,this.$axios.get("/ppob/product-categories",{params:this.moreParams}).then(e=>{this.categories=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},setMitra(e){this.search.user_id=e?e.id:""},setType(e){this.search.type=e?e.code:""},setCategory(e){this.search.category=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/ppob/history",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}},ce=a("d959"),oe=a.n(ce);const le=oe()(ae,[["render",ee]]);t["default"]=le}}]);