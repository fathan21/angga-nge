(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ppob-product-pasca-ppob-product-pra-b1c9cfd7"],{a73f:function(e,t,o){"use strict";var a=o("7a23");const r={class:"col-md-12 col-sm-12"},l={class:"x_panel"},c={key:0,class:"x_content"},s={class:"table-responsive",style:{"min-height":"75vh"}},i={class:"row"},n={key:0,class:"col-sm-12 col-md-2 col-lg-2"},d={key:1,class:"col-sm-12 col-md-2 col-lg-2"},p={key:2,class:"col-sm-12 col-md-2 col-lg-2"},b={key:3,class:"col-sm-12 col-md-3 col-lg-3"},u={class:"col-sm-12 col-md-2 col-lg-2"},m={key:4,class:"col-sm-12 col-md-2 col-lg-2"},h={class:"col-sm-12 col-md-2 col-lg-2"},O=Object(a["createElementVNode"])("option",{value:""},"Pilih Status",-1),g=Object(a["createElementVNode"])("option",{value:"1"},"Open",-1),j=Object(a["createElementVNode"])("option",{value:"0"},"Close",-1),y=[O,g,j],_={class:"col-sm-12 col-md-2 col-lg-2"},k={class:"input-group"},V={class:"row"},f={class:"col-sm-12"},N={class:"table-responsive"},C={class:"table table-striped jambo_table bulk_action table-bordered"},E=["onClick"],B={key:0},v=Object(a["createElementVNode"])("td",{colspan:"18",class:"text-center"}," Data tidak ditemukan ",-1),P=[v],S={scope:"row"},D={key:0},A={key:1,class:"text-end"},x={key:2,class:"text-end"},w={key:3,class:"text-end"},$={key:4,class:"text-end"},K={key:5,class:"text-end"},U=Object(a["createElementVNode"])("br",null,null,-1),T=Object(a["createElementVNode"])("br",null,null,-1),M=Object(a["createElementVNode"])("br",null,null,-1),R={key:6};function q(e,t,o,O,g,j){const v=Object(a["resolveComponent"])("select-supplier-mitra-base"),q=Object(a["resolveComponent"])("select-supplier-user-base"),Y=Object(a["resolveComponent"])("select-base"),H=Object(a["resolveComponent"])("select-op-ppob-base"),F=Object(a["resolveComponent"])("b-button"),J=Object(a["resolveComponent"])("b-popover"),L=Object(a["resolveComponent"])("statusbadge-base"),z=Object(a["resolveComponent"])("b-overlay"),G=Object(a["resolveComponent"])("paging-base");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[Object(a["createElementVNode"])("div",l,[e.user&&e.user.email?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",c,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",i,[j.isAdmin?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",d,[Object(a["createVNode"])(q,{product_code:"PPOB",modelValue:g.search.supplier_user_id,"onUpdate:modelValue":t[1]||(t[1]=e=>g.search.supplier_user_id=e),onOnChange:j.setSupplierUser},null,8,["modelValue","onOnChange"])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createVNode"])(v,{product_code:"PPOB",modelValue:g.search.supplier_mitra_id,"onUpdate:modelValue":t[0]||(t[0]=e=>g.search.supplier_mitra_id=e),onOnChange:j.setSupplierMitra},null,8,["modelValue","onOnChange"])])),"prabayar"==o.typeProduct?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,[Object(a["createVNode"])(Y,{options:g.categories,placeholder:"Pilih Produk",onOnChange:j.setCategory},null,8,["options","onOnChange"])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,[Object(a["createVNode"])(Y,{options:g.categories,placeholder:"Pilih Produk",onOnChange:j.setCategory},null,8,["options","onOnChange"])])),Object(a["createElementVNode"])("div",u,[Object(a["createVNode"])(H,{placeholder:"Pilih Operator",type:o.typeProduct,category:g.search.category,modelValue:g.search.operator,"onUpdate:modelValue":t[2]||(t[2]=e=>g.search.operator=e)},null,8,["type","category","modelValue"])]),"prabayar"==o.typeProduct?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",m,[Object(a["createVNode"])(Y,{options:j.subCategoryOptions,placeholder:"Pilih Kategori",modelValue:g.search.sub_category,"onUpdate:modelValue":t[3]||(t[3]=e=>g.search.sub_category=e)},null,8,["options","modelValue"])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",h,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>g.search.is_open=e)},y,512),[[a["vModelSelect"],g.search.is_open]])]),Object(a["createElementVNode"])("div",_,[Object(a["createElementVNode"])("div",k,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[5]||(t[5]=e=>g.search.q=e),onKeyup:t[6]||(t[6]=Object(a["withKeys"])((...e)=>j.searchData&&j.searchData(...e),["enter"]))},null,544),[[a["vModelText"],g.search.q]]),Object(a["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>j.searchData&&j.searchData(...e))}," Cari ")])])]),Object(a["createElementVNode"])("div",V,[Object(a["createElementVNode"])("div",f,[Object(a["createVNode"])(z,{show:g.loading,rounded:"sm"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("table",C,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(j.headers,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",{key:t,class:Object(a["normalizeClass"])([e.sortable?" sortable ":"",e.field==g.options.sort&&"asc"==g.options.order?" asc ":e.field==g.options.sort&&"desc"==g.options.order?" desc ":"both"]),onClick:t=>e.sortable?j.sorter(e.field):null},Object(a["toDisplayString"])(e.label),11,E))),128))])]),Object(a["createElementVNode"])("tbody",null,[g.data.length<=0&&!g.loading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",B,P)):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(g.data,(t,r)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:r},[Object(a["createElementVNode"])("td",S,Object(a["toDisplayString"])((g.options.current_page-1)*g.options.per_page+r+1),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.product_code),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.product_name),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.product),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.operator),1),"prabayar"==o.typeProduct?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",D,Object(a["toDisplayString"])(t.category),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.supplier_code),1),"prabayar"==o.typeProduct?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",A,Object(a["toDisplayString"])(t.nominal?e.$filters.currency(t.nominal,0):"-"),1)):Object(a["createCommentVNode"])("",!0),"prabayar"==o.typeProduct?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",x,Object(a["toDisplayString"])(t.price?e.$filters.currency(t.price):"-"),1)):Object(a["createCommentVNode"])("",!0),"prabayar"==o.typeProduct&&j.isAdmin?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",w,Object(a["toDisplayString"])(t.harga_modal?e.$filters.currency(t.harga_modal):"-"),1)):Object(a["createCommentVNode"])("",!0),"pascabayar"==o.typeProduct?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",$,Object(a["toDisplayString"])(t.admin?e.$filters.currency(t.admin):"-"),1)):Object(a["createCommentVNode"])("",!0),j.isAdmin?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",K,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),Object(a["createVNode"])(F,{id:"pop"+r,class:"badge"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("detail")]),_:2},1032,["id"]),Object(a["createVNode"])(J,{target:"pop"+r,triggers:"focus"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" full : "+Object(a["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),U,Object(a["createTextVNode"])(" core : "+Object(a["toDisplayString"])(t.komisi_core?e.$filters.currency(t.komisi_core):0)+" ",1),T,Object(a["createTextVNode"])(" broker : "+Object(a["toDisplayString"])(t.komisi_broker?e.$filters.currency(t.komisi_broker):0)+" ",1),M,Object(a["createTextVNode"])(" mitra : "+Object(a["toDisplayString"])(t.komisi_mitra?e.$filters.currency(t.komisi_mitra):0),1)]),_:2},1032,["target"])])):Object(a["createCommentVNode"])("",!0),"pascabayar"!=o.typeProduct||j.isAdmin?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",R,Object(a["toDisplayString"])(t.komisi_mitra?e.$filters.currency(t.komisi_mitra):0),1)),Object(a["createElementVNode"])("td",null,[Object(a["createVNode"])(L,{status:t.status,label:t.status_label},null,8,["status","label"])])]))),128))])])])]),_:1},8,["show"])])]),g.data.length>0?(Object(a["openBlock"])(),Object(a["createBlock"])(G,{key:0,modelValue:g.options.current_page,"onUpdate:modelValue":t[8]||(t[8]=e=>g.options.current_page=e),options:g.options},null,8,["modelValue","options"])):Object(a["createCommentVNode"])("",!0)])])):Object(a["createCommentVNode"])("",!0)])])}var Y=o("5502"),H=o("2d3d"),F={components:{SelectOpPpobBase:H["default"]},props:{typeProduct:{type:String,default:"pascabayar"}},data(){return{categories:[],types:[{code:"PASCABAYAR",name:"PASCABAYAR"},{code:"PRABAYAR",name:"PRABAYAR"}],loadingCategories:!1,data:[],options:{current_page:1,total_row:0,per_page:50,sort:"code",order:"asc"},search:{q:"",type:"",category:"",is_open:"",supplier_code:"",supplier_user_id:"",sub_category:"",supplier_mitra_id:""},subCategories:[],loading:!1}},mounted(){this.search.type=this.typeProduct,this.loadCategories(),this.loadSubCategories(),this.loadData()},computed:{...Object(Y["b"])({user:"auth/user"}),headers(){return"prabayar"==this.typeProduct?this.isAdmin?[{label:"#",sortable:!1},{label:"Kode",field:"code",sortable:!0},{label:"Nama",field:"name",sortable:!0},{label:"Produk",field:"product",sortable:!0},{label:"Operator",field:"operator",sortable:!0},{label:"Kategori",field:"sub_category",sortable:!0},{label:"Supplier",field:"supplier_code",sortable:!0},{label:"Nominal",field:"nominal",sortable:!0},{label:"Harga",field:"price",sortable:!0},{label:"Harga Modal",field:"harga_modal",sortable:!0},{label:"Markup",field:"komisi_full",sortable:!0},{label:"Action",sortable:!1}]:[{label:"#",sortable:!1},{label:"Kode",field:"code",sortable:!0},{label:"Nama",field:"name",sortable:!0},{label:"Produk",field:"product_code",sortable:!0},{label:"Operator",field:"operator",sortable:!0},{label:"Kategori",field:"sub_category",sortable:!0},{label:"Supplier",field:"supplier_code",sortable:!0},{label:"Nominal",field:"nominal",sortable:!0},{label:"Harga",field:"price",sortable:!0},{label:"Action",sortable:!1}]:[{label:"#",sortable:!1},{label:"Kode",field:"code",sortable:!0},{label:"Nama",field:"name",sortable:!0},{label:"Produk",field:"product_code",sortable:!0},{label:"Operator",field:"operator",sortable:!0},{label:"Supplier",field:"supplier_code",sortable:!0},{label:"Admin",field:"admin",sortable:!0},{label:"Komisi",field:"komisi_full",sortable:!0},{label:"Action",sortable:!1}]},moreParams(){return{page:this.options.current_page,per_page:this.options.per_page,q:this.search.q,is_open:this.search.is_open,start_date:this.search.start_date,end_date:this.search.end_date,type:this.search.type,category:this.search.category,sub_category:this.search.sub_category?this.search.sub_category.code:"",operator:this.search.operator,supplier_code:this.search.supplier_code,supplier_user_id:this.search.supplier_user_id,supplier_mitra_id:this.search.supplier_mitra_id,sort:this.options.sort+"|"+this.options.order}},categoryOptions(){if(this.search.type){let e=this.categories.filter(e=>e.type==this.search.type);return e}return this.categories},subCategoryOptions(){if(this.search.category){let e=this.subCategories.filter(e=>e.product_code==this.search.category);return e}return this.subCategories},isAdmin(){return!!(this.user&&this.user.role&&this.user.role.indexOf("admin")>-1)}},watch:{typeProduct:{handler:function(){this.search.type=this.typeProduct,this.options.page=1,this.searchData()}},"options.current_page":{handler:function(){this.loadData()}}},methods:{sorter(e){this.options.sort==e?this.options.order="asc"==this.options.order?"desc":"asc":(this.options.sort=e,this.options.order="asc"),this.loadData()},searchData(){this.options.current_page=1,this.loadData()},loadCategories(){this.loadingCategories=!0,this.$axios.get("/ppob/product-categories",{params:this.moreParams}).then(e=>{this.categories=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},loadSubCategories(){this.loadingCategories=!0,this.$axios.get("/ppob/product-sub-categories",{params:this.moreParams}).then(e=>{this.subCategories=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},setType(e){this.search.type=e?e.code:""},setCategory(e){this.search.category=e?e.code:""},setSupplier(e){console.log(e),this.search.supplier_code=e?e.code:""},setSupplierUser(e){this.search.supplier_user_id=e?e.id:""},setSupplierMitra(e){this.search.supplier_mitra_id=e?e.id:""},loadData(){this.loading=!0,this.$axios.get("/ppob/product-list",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}},J=o("d959"),L=o.n(J);const z=L()(F,[["render",q]]);t["a"]=z}}]);