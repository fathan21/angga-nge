(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["acl-form-a6b92fc3"],{"69ee":function(e,t,o){"use strict";o.r(t);var l=o("7a23");const s={class:"col-md-12 col-sm-12"},c={class:"x_panel"},a={class:"x_title"},n={class:"nav navbar-right panel_toolbox"},i=Object(l["createElementVNode"])("i",{class:"fa fa-arrow-left"},null,-1),r=Object(l["createElementVNode"])("div",{class:"clearfix"},null,-1),m={class:"x_content"},d=Object(l["createElementVNode"])("br",null,null,-1),b={class:"item form-group"},p=Object(l["createElementVNode"])("label",{class:"col-form-label col-12 col-sm-3 label-align"},[Object(l["createTextVNode"])("Nama "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),u={class:"col-12 col-sm-6"},j={key:0,class:"p-error"},O={class:"item form-group"},h=Object(l["createElementVNode"])("label",{class:"col-form-label col-12 col-sm-3 label-align"},[Object(l["createTextVNode"])("Permission "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),V={class:"col-12 col-sm-6"},f={class:"text-capitalize h6 mb-0"},N={class:"d-flex justify-content-between"},E=Object(l["createElementVNode"])("hr",{class:"mt-0"},null,-1),g=Object(l["createElementVNode"])("div",{class:"ln_solid"},null,-1),v={class:"item form-group mt3"},k={class:"col-12 col-sm-6 offset-md-3"},y=Object(l["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function x(e,t,o,x,$,B){const C=Object(l["resolveComponent"])("Field"),P=Object(l["resolveComponent"])("b-form-checkbox"),w=Object(l["resolveComponent"])("Form",!0);return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",s,[Object(l["createElementVNode"])("div",c,[Object(l["createElementVNode"])("div",a,[Object(l["createElementVNode"])("h2",null,Object(l["toDisplayString"])(B.title),1),Object(l["createElementVNode"])("ul",n,[Object(l["createElementVNode"])("li",null,[Object(l["createElementVNode"])("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:t[0]||(t[0]=t=>e.$router.back())},[i,Object(l["createTextVNode"])(" Kembali ")])])]),r]),Object(l["createElementVNode"])("div",m,[d,Object(l["createVNode"])(w,{onSubmit:B.onSubmit,"validation-schema":$.schema},{default:Object(l["withCtx"])(({errors:o})=>[Object(l["createElementVNode"])("div",b,[p,Object(l["createElementVNode"])("div",u,[Object(l["createVNode"])(C,{name:"name",class:Object(l["normalizeClass"])(["form-control",[{"p-error":o.name}]]),modelValue:$.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>$.form.name=e),type:"text"},null,8,["modelValue","class"]),o.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",j," *"+Object(l["toDisplayString"])(o.name),1)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",O,[h,Object(l["createElementVNode"])("div",V,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])($.permissions,(e,o)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:o,class:"mb-3"},[Object(l["createElementVNode"])("div",f,[Object(l["createElementVNode"])("div",N,[Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(o),1),Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(P,{value:o,onChange:e=>B.selectedGroup(e,o)},null,8,["value","onChange"])])]),E]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e,(e,o)=>(Object(l["openBlock"])(),Object(l["createBlock"])(P,{key:o,modelValue:$.selectedPermission,"onUpdate:modelValue":t[2]||(t[2]=e=>$.selectedPermission=e),value:e.id},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name),1)]),_:2},1032,["modelValue","value"]))),128))])])]))),128))])]),g,Object(l["createElementVNode"])("div",v,[Object(l["createElementVNode"])("div",k,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[3]||(t[3]=t=>e.$router.back())}," Cancel "),y])])]),_:1},8,["onSubmit","validation-schema"])])])])}var $=o("7bb1"),B=o("6edf"),C=o.n(B),P=o("506a"),w={components:{Form:$["b"],Field:$["a"]},data(){const e=P["a"]({name:P["b"]().required()});return{id:"",form:{name:""},permissions:[],selectedPermission:[],permissionsData:[],old:{},schema:e}},computed:{title(){return this.id?"Ubah":"Tambah"}},watch:{},methods:{selectedGroup(e,t){if(e){let e=this.permissionsData.filter(e=>e.group==t).map(e=>e.id),o=Object.assign([],this.selectedPermission);this.selectedPermission=e.concat(o)}else{let e=this.permissionsData.filter(e=>e.group==t);console.log(e),this.selectedPermission=this.selectedPermission.filter(t=>{console.log(t);let o=e.find(e=>e.id==t);if(!o)return t})}},loadPermission(){this.$axios.get("/acl/permissions").then(e=>{let t=Object.assign({},e.data);t=t.data.map((function(e){return{id:e,name:e.split("-").join(" "),group:e.split(" ")[0]}})),this.permissionsData=Object.assign([],t),this.permissions=C()(t,"group")}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadData(){this.$axios.get("/acl/"+this.id).then(e=>{let t=Object.assign({},e.data);this.old=t,this.form=t,this.selectedPermission=t.permissions}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},onSubmit(e){this.$store.dispatch("loading",!0),e.permissions=this.selectedPermission;let t=()=>this.$axios.post("/acl",e);this.id&&(t=()=>this.$axios.put("/acl/"+this.id,e)),t().then(e=>{this.$root.notif(e.message),this.$router.back()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}},mounted(){this.loadPermission(),this.$route.params.id&&(this.id=this.$route.params.id,this.loadData())}},D=o("d959"),S=o.n(D);const _=S()(w,[["render",x]]);t["default"]=_}}]);