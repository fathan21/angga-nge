(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ppob-pasca-bayar-ppob-prabayar-e7d22cf9"],{ceb2:function(e,t,a){"use strict";var c=a("7a23");const o={class:"col-md-12 col-sm-12"},l={class:"x_panel"},r={class:"x_content"},n={class:"table-responsive",style:{"min-height":"75vh"}},s={class:"row"},i={class:"col-sm-12 col-md-6 col-lg-3"},d={class:"col-sm-12 col-md-6 col-lg-2"},b=Object(c["createElementVNode"])("option",{value:""},"Semua Status",-1),m=Object(c["createElementVNode"])("option",{value:"1"},"Success",-1),p=Object(c["createElementVNode"])("option",{value:"2"},"Process",-1),O=Object(c["createElementVNode"])("option",{value:"11"},"Failed",-1),j=[b,m,p,O],u={class:"col-sm-12 col-md-6 col-lg-2"},h={class:"col-sm-12 col-md-6 col-lg-2"},V={class:"col-sm-12 col-md-6 col-lg-3"},g={class:"input-group"},N={class:"row"},y={class:"col-sm-12"},k={class:"table-responsive table-responsive-sticky"},E={class:"table table-striped jambo_table bulk_action table-bordered table-sm"},_=Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])(" Tanggal "),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" Transaksi ")],-1),C=Object(c["createElementVNode"])("th",null,"ID Transaksi",-1),f=Object(c["createElementVNode"])("th",null,"Status",-1),v=Object(c["createElementVNode"])("th",null,"Mitra",-1),x=Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])(" Produk "),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" Layanan ")],-1),D=Object(c["createElementVNode"])("th",null,"Supplier",-1),S={key:0},w=Object(c["createElementVNode"])("th",null,[Object(c["createTextVNode"])("Nomor"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])("Pelanggan")],-1),B=Object(c["createElementVNode"])("th",null,"SN/Token/Reff",-1),T=Object(c["createElementVNode"])("th",{class:"text-end"},[Object(c["createElementVNode"])("div",null," Harga Jual "),Object(c["createElementVNode"])("div",null," Harga Modal ")],-1),$=Object(c["createElementVNode"])("th",{class:"text-end"},"Admin",-1),P=Object(c["createElementVNode"])("th",{class:"text-end"},"Komisi Pusat",-1),A=Object(c["createElementVNode"])("th",{style:{"min-width":"100px"}},"#",-1),M={key:0},R=Object(c["createElementVNode"])("td",{colspan:"18",class:"text-center"}," Data tidak ditemukan ",-1),U=[R],q={scope:"row",style:{"min-width":"130px"}},z={class:"text-success",style:{"min-width":"200px"}},Y={class:"text-warning"},F={key:0,class:"text-info"},J={style:{"min-width":"150px"}},K={class:"text-10 text-black-50"},H={key:0,class:"text-end"},L={style:{"min-width":"150px"}},I=Object(c["createElementVNode"])("br",null,null,-1),G={style:{"min-width":"150px"}},Q={key:0},W={key:1},X={style:{"min-width":"150px"},class:"text-end"},Z={class:"text-end"},ee={class:"text-end",style:{"min-width":"100px"}},te=Object(c["createElementVNode"])("br",null,null,-1),ae=Object(c["createElementVNode"])("br",null,null,-1),ce=Object(c["createElementVNode"])("br",null,null,-1),oe={style:{"min-width":"170px"},class:"text-center"},le=Object(c["createElementVNode"])("i",{class:"fa fa-edit"},null,-1),re=Object(c["createElementVNode"])("i",{class:"fa fa-file-pdf-o"},null,-1);function ne(e,t,a,b,m,p){const O=Object(c["resolveComponent"])("input-date-picker-range-base"),R=Object(c["resolveComponent"])("select-mitra-base"),ne=Object(c["resolveComponent"])("select-base"),se=Object(c["resolveComponent"])("NoteTooltipBase"),ie=Object(c["resolveComponent"])("statusbadge-base"),de=Object(c["resolveComponent"])("mitra-link-base"),be=Object(c["resolveComponent"])("b-button"),me=Object(c["resolveComponent"])("b-popover"),pe=Object(c["resolveComponent"])("b-overlay"),Oe=Object(c["resolveComponent"])("paging-base"),je=Object(c["resolveComponent"])("ChangeStatus"),ue=Object(c["resolveComponent"])("modal-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(O,{start_date:m.search.start_date,"onUpdate:start_date":t[0]||(t[0]=e=>m.search.start_date=e),end_date:m.search.end_date,"onUpdate:end_date":t[1]||(t[1]=e=>m.search.end_date=e),"max-date":new Date},null,8,["start_date","end_date","max-date"])]),Object(c["createElementVNode"])("div",d,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>m.search.status=e)},j,512),[[c["vModelSelect"],m.search.status]])]),Object(c["createElementVNode"])("div",u,[Object(c["createVNode"])(R,{onOnChange:p.setMitra},null,8,["onOnChange"])]),Object(c["createElementVNode"])("div",h,[Object(c["createVNode"])(ne,{options:m.categories,placeholder:"Pilih Produk",onOnChange:p.setCategory},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",g,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[3]||(t[3]=e=>m.search.q=e),onKeyup:t[4]||(t[4]=Object(c["withKeys"])((...e)=>p.searchData&&p.searchData(...e),["enter"]))},null,544),[[c["vModelText"],m.search.q]]),Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>p.searchData&&p.searchData(...e))}," Cari ")])])]),Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",y,[Object(c["createVNode"])(pe,{show:m.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("table",E,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[_,C,f,v,x,D,"prabayar"==a.typeProduct?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",S,"Denom")):Object(c["createCommentVNode"])("",!0),w,B,T,$,P,A])]),Object(c["createElementVNode"])("tbody",null,[m.data.length<=0&&!m.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",M,U)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(m.data,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[Object(c["createElementVNode"])("td",q,Object(c["toDisplayString"])(e.$filters.dateTime(t.created_at)),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",z,Object(c["toDisplayString"])(t.ref_2),1),Object(c["createElementVNode"])("div",Y,Object(c["toDisplayString"])(t.ref_3),1),t.ref_1?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",F,Object(c["toDisplayString"])(t.ref_1),1)):Object(c["createCommentVNode"])("",!0),t.notes?(Object(c["openBlock"])(),Object(c["createBlock"])(se,{key:1,notes:t.notes},null,8,["notes"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(ie,{status:t.status,label:t.status_label},null,8,["status","label"])]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(de,{mitra:t.mitra},null,8,["mitra"])]),Object(c["createElementVNode"])("td",J,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.category_code)+" ",1),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(t.product_name),1),Object(c["createElementVNode"])("div",K,Object(c["toDisplayString"])(t.product_code),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.supplier_code),1),"prabayar"==a.typeProduct?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",H,Object(c["toDisplayString"])(t.nominal?e.$filters.currency(t.nominal):""),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("td",L,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.customer_id)+" ",1),I,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.data&&t.data.nama?t.data.nama:""),1)]),Object(c["createElementVNode"])("td",G,[t.reference?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Q," REF: "+Object(c["toDisplayString"])(t.reference),1)):Object(c["createCommentVNode"])("",!0),t.sn?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",W," SN: "+Object(c["toDisplayString"])(t.sn),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",X,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$filters.currency(t.debet_mitra))+" ",1),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.$filters.currency(t.price)),1)]),Object(c["createElementVNode"])("td",Z,Object(c["toDisplayString"])(e.$filters.currency(t.admin)),1),Object(c["createElementVNode"])("td",ee,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$filters.currency(t.komisi_core))+" ",1),Object(c["createVNode"])(be,{id:"pop"+o,class:"badge"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("detail")]),_:2},1032,["id"]),Object(c["createVNode"])(me,{target:"pop"+o,triggers:"focus"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" full : "+Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),te,Object(c["createTextVNode"])(" core : "+Object(c["toDisplayString"])(t.komisi_core?e.$filters.currency(t.komisi_core):0)+" ",1),ae,Object(c["createTextVNode"])(" broker : "+Object(c["toDisplayString"])(t.komisi_broker?e.$filters.currency(t.komisi_broker):0)+" ",1),ce,Object(c["createTextVNode"])(" mitra : "+Object(c["toDisplayString"])(t.komisi_mitra?e.$filters.currency(t.komisi_mitra):0),1)]),_:2},1032,["target"])]),Object(c["createElementVNode"])("td",oe,[Object(c["createVNode"])(be,{size:"sm",variant:"info",onClick:e=>p.editStatus(t)},{default:Object(c["withCtx"])(()=>[le]),_:2},1032,["onClick"]),1==t.status?(Object(c["openBlock"])(),Object(c["createBlock"])(be,{key:0,size:"sm",variant:"danger",onClick:e=>p.downloadEticket(t)},{default:Object(c["withCtx"])(()=>[re]),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(be,{size:"sm",variant:t.loadingCallback?"":"outline-info",onClick:e=>p.sendCallback(t)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.loadingCallback?"Callback...":"Callback"),1)]),_:2},1032,["variant","onClick"])])]))),128))])])])]),_:1},8,["show"])])]),m.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(Oe,{key:0,modelValue:m.options.current_page,"onUpdate:modelValue":t[6]||(t[6]=e=>m.options.current_page=e),options:m.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createVNode"])(ue,{modelValue:m.modalStatus,"onUpdate:modelValue":t[9]||(t[9]=e=>m.modalStatus=e),size:"modal-lg"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(je,{data:m.modalData,onCancel:t[7]||(t[7]=()=>{m.modalStatus=!1}),onSave:t[8]||(t[8]=()=>{m.modalStatus=!1,this.searchData()})},null,8,["data"])]),_:1},8,["modelValue"])])}var se=a("b166"),ie=a("8e4a"),de={props:{typeProduct:{type:String,default:"pascabayar"}},components:{ChangeStatus:ie["a"]},data(){return{categories:[],types:[{code:"PASCABAYAR",name:"PASCABAYAR"},{code:"PRABAYAR",name:"PRABAYAR"}],loadingCategories:!1,data:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",start_date:Object(se["a"])(new Date,"yyyy-MM-dd"),end_date:Object(se["a"])(new Date,"yyyy-MM-dd"),user_id:"",type:"",category:"",status:""},loading:!1,modalStatus:!1,modalData:{}}},mounted(){this.search.type=this.typeProduct,this.loadCategories(),this.searchData()},computed:{moreParams(){return{page:this.options.current_page,status:this.search.status,q:this.search.q,start_date:this.search.start_date,end_date:this.search.end_date,user_id:this.search.user_id,type:this.search.type,category:this.search.category}},categoryOptions(){if(this.search.type){let e=this.categories.filter(e=>e.type==this.search.type);return e}return this.categories}},watch:{typeProduct:{handler:function(){this.search.type=this.typeProduct,this.searchData()}},"options.current_page":{handler:function(){this.loadData()}}},methods:{sendCallback(e){e.loadingCallback=!0,this.$axios.post("/ppob/send-callback",e).then(e=>{this.$root.notif(e.data.message,{type:"info",position:"top"})}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{e.loadingCallback=!1})},editStatus(e){this.modalData=Object.assign({},e),this.modalStatus=!0},downloadEticket(e){let t=`https://api.atacorp.id/V1/app/transactions/ppob/eticket/${e.ref_2}?token=${this.$store.getters["auth/accessToken"]}`;window.open(t,"_blank")},searchData(){this.options.current_page=1,this.loadData()},loadCategories(){this.loadingCategories=!0,this.$axios.get("/ppob/product-categories",{params:this.moreParams}).then(e=>{this.categories=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},setMitra(e){this.search.user_id=e?e.id:""},setType(e){this.search.type=e?e.code:""},setCategory(e){this.search.category=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/ppob/history",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})}}},be=a("d959"),me=a.n(be);const pe=me()(de,[["render",ne]]);t["a"]=pe}}]);