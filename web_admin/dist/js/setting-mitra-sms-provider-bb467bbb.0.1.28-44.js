(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setting-mitra-sms-provider-bb467bbb"],{fa0c:function(e,t,o){"use strict";o.r(t);var r=o("7a23");const a={class:"row"},l={class:"col-md-6 col-sm-12"},c={class:"col-md-6 col-sm-12"};function i(e,t,o,i,s,n){const d=Object(r["resolveComponent"])("SmsProvider",!0),m=Object(r["resolveComponent"])("WaProvider");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a,[Object(r["createElementVNode"])("div",l,[Object(r["createVNode"])(d)]),Object(r["createElementVNode"])("div",c,[Object(r["createVNode"])(m)])])}const s={class:"row"},n={class:"col-md-12 col-sm-12"},d={class:"x_panel"},m=Object(r["createElementVNode"])("div",{class:"x_title"},[Object(r["createElementVNode"])("h2",null,"Sms Provider"),Object(r["createElementVNode"])("div",{class:"clearfix"})],-1),p={class:"item form-group"},b=Object(r["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(r["createTextVNode"])("Provider "),Object(r["createElementVNode"])("span",{class:"required"},"*")],-1),v={class:"col-md-6 col-sm-6"},O=["onChange","onInput"],u=Object(r["createElementVNode"])("option",{value:""},"Pilih Provider",-1),h=["value"],j={key:0,class:"p-error"},f={class:"col-form-label col-md-3 col-sm-3 label-align"},V=Object(r["createElementVNode"])("span",{class:"required"},"*",-1),g={class:"col-md-6 col-sm-6"},N=["onUpdate:modelValue"],E=Object(r["createElementVNode"])("div",{class:"ln_solid"},null,-1),k={class:"item form-group"},y={class:"col-md-6 col-sm-6 offset-md-3"},$=Object(r["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function S(e,t,o,a,l,c){const i=Object(r["resolveComponent"])("Field"),S=Object(r["resolveComponent"])("Form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",s,[Object(r["createElementVNode"])("div",n,[Object(r["createElementVNode"])("div",d,[m,Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(S,{onSubmit:c.onSubmit,"validation-schema":l.schema,class:"signin-form"},{default:Object(r["withCtx"])(({errors:o})=>[Object(r["createElementVNode"])("div",p,[b,Object(r["createElementVNode"])("div",v,[Object(r["createVNode"])(i,{name:"provider",modelValue:l.form.provider,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.provider=e)},{default:Object(r["withCtx"])(({handleChange:e})=>[Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{class:Object(r["normalizeClass"])(["form-control",[{"p-error":o.provider}]]),onChange:e,onInput:e,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.provider=e)},[u,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(l.providers,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t,value:e.name},Object(r["toDisplayString"])(e.name),9,h))),128))],42,O),[[r["vModelSelect"],l.form.provider]])]),_:2},1032,["modelValue"]),o.provider?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",j," *"+Object(r["toDisplayString"])(o.provider),1)):Object(r["createCommentVNode"])("",!0)])]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(l.addonFields,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"item form-group",key:t},[Object(r["createElementVNode"])("label",f,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label)+" ",1),V]),Object(r["createElementVNode"])("div",g,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t=>e.value=t,class:"form-control"},null,8,N),[[r["vModelText"],e.value]])])]))),128)),E,Object(r["createElementVNode"])("div",k,[Object(r["createElementVNode"])("div",y,[Object(r["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[2]||(t[2]=t=>e.$router.back())}," Cancel "),$])])]),_:1},8,["onSubmit","validation-schema"])])])])])}o("14d9");var x=o("7bb1"),B=o("506a"),C={components:{Form:x["b"],Field:x["a"]},props:{},data(){const e=B["a"]({provider:B["b"]().required()});return{id:"",imagePrev:"",form:{provider:""},fomOld:{},providers:[],addonFields:[],old:{},schema:e}},watch:{"form.provider":function(){this.setData()}},methods:{setData(){let e=this.providers.findIndex(e=>e.name==this.form.provider);if(e>-1){let t=this.providers[e].config_fields,o=[];for(let e in t)o.push({name:e,label:e.replace("_"," ").toLocaleUpperCase(),value:this.fomOld.config&&this.fomOld.config[e]?this.fomOld.config[e]:"",validation:t[e]});this.addonFields=o}},onSubmit(e){let t=Object.assign({},e),o={},r=null;for(let l=0;l<this.addonFields.length;l++){const e=this.addonFields[l];e.value?o[e.name]=e.value:r=1}if(r)return void this.$root.notif("semua data harus diisi",{type:"error",position:"top"});t.config=JSON.stringify(o);let a=()=>this.$axios.post(`/mitra/${this.$route.params.id}/sms`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},loadSmsProvider(){this.$axios.get(`/mitra/${this.$route.params.id}/sms/provider`).then(e=>{this.providers=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})})},loadData(){this.$axios.get(`/mitra/${this.$route.params.id}/sms`).then(e=>{e.data.provider&&(this.form.provider=e.data.provider,this.fomOld=e.data,this.setData())}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})})}},mounted(){this.loadSmsProvider(),this.loadData()}},w=o("d959"),F=o.n(w);const D=F()(C,[["render",S]]);var P=D;const _={class:"row"},U={class:"col-md-12 col-sm-12"},q={class:"x_panel"},I=Object(r["createElementVNode"])("div",{class:"x_title"},[Object(r["createElementVNode"])("h2",null,"Whatsapp Provider"),Object(r["createElementVNode"])("div",{class:"clearfix"})],-1),L={class:"item form-group"},T=Object(r["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(r["createTextVNode"])("Provider "),Object(r["createElementVNode"])("span",{class:"required"},"*")],-1),J={class:"col-md-6 col-sm-6"},M=["onChange","onInput"],W=Object(r["createElementVNode"])("option",{value:""},"Pilih Provider",-1),z=["value"],A={key:0,class:"p-error"},G={class:"col-form-label col-md-3 col-sm-3 label-align"},H=Object(r["createElementVNode"])("span",{class:"required"},"*",-1),K={class:"col-md-6 col-sm-6"},Q=["onUpdate:modelValue"],R=Object(r["createElementVNode"])("div",{class:"ln_solid"},null,-1),X={class:"item form-group"},Y={class:"col-md-6 col-sm-6 offset-md-3"},Z=Object(r["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function ee(e,t,o,a,l,c){const i=Object(r["resolveComponent"])("Field"),s=Object(r["resolveComponent"])("Form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",_,[Object(r["createElementVNode"])("div",U,[Object(r["createElementVNode"])("div",q,[I,Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(s,{onSubmit:c.onSubmit,"validation-schema":l.schema,class:"signin-form"},{default:Object(r["withCtx"])(({errors:o})=>[Object(r["createElementVNode"])("div",L,[T,Object(r["createElementVNode"])("div",J,[Object(r["createVNode"])(i,{name:"provider",modelValue:l.form.provider,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.provider=e)},{default:Object(r["withCtx"])(({handleChange:e})=>[Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{class:Object(r["normalizeClass"])(["form-control",[{"p-error":o.provider}]]),onChange:e,onInput:e,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.provider=e)},[W,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(l.providers,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t,value:e.name},Object(r["toDisplayString"])(e.name),9,z))),128))],42,M),[[r["vModelSelect"],l.form.provider]])]),_:2},1032,["modelValue"]),o.provider?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",A," *"+Object(r["toDisplayString"])(o.provider),1)):Object(r["createCommentVNode"])("",!0)])]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(l.addonFields,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"item form-group",key:t},[Object(r["createElementVNode"])("label",G,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label)+" ",1),H]),Object(r["createElementVNode"])("div",K,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t=>e.value=t,class:"form-control"},null,8,Q),[[r["vModelText"],e.value]])])]))),128)),R,Object(r["createElementVNode"])("div",X,[Object(r["createElementVNode"])("div",Y,[Object(r["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[2]||(t[2]=t=>e.$router.back())}," Cancel "),Z])])]),_:1},8,["onSubmit","validation-schema"])])])])])}var te={components:{Form:x["b"],Field:x["a"]},props:{},data(){const e=B["a"]({provider:B["b"]().required()});return{id:"",imagePrev:"",form:{provider:""},fomOld:{},providers:[],addonFields:[],old:{},schema:e}},watch:{"form.provider":function(){this.setData()}},methods:{setData(){let e=this.providers.findIndex(e=>e.name==this.form.provider);if(e>-1){let t=this.providers[e].config_fields,o=[];for(let e in t)o.push({name:e,label:e.replace("_"," ").toLocaleUpperCase(),value:this.fomOld.config&&this.fomOld.config[e]?this.fomOld.config[e]:"",validation:t[e]});this.addonFields=o}},onSubmit(e){let t=Object.assign({},e),o={},r=null;for(let l=0;l<this.addonFields.length;l++){const e=this.addonFields[l];e.value?o[e.name]=e.value:r=1}if(r)return void this.$root.notif("semua data harus diisi",{type:"error",position:"top"});t.config=JSON.stringify(o),t.type_message="wa";let a=()=>this.$axios.post(`/mitra/${this.$route.params.id}/sms`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})},loadSmsProvider(){this.$axios.get(`/mitra/${this.$route.params.id}/sms/provider?type_message=wa`).then(e=>{this.providers=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})})},loadData(){this.$axios.get(`/mitra/${this.$route.params.id}/sms?type_message=wa`).then(e=>{e.data.provider&&(this.form.provider=e.data.provider,this.fomOld=e.data,this.setData())}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})})}},mounted(){this.loadSmsProvider(),this.loadData()}};const oe=F()(te,[["render",ee]]);var re=oe,ae={components:{SmsProvider:P,WaProvider:re}};const le=F()(ae,[["render",i]]);t["default"]=le}}]);