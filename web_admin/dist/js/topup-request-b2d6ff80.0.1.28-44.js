(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["topup-request-b2d6ff80"],{ec42:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const n={class:"col-md-12 col-sm-12"},l={class:"x_panel"},c={class:"x_content"},s={class:"table-responsive",style:{"min-height":"80vh"}},r={class:"row"},i={class:"col-sm-12"},d={class:"table-responsive"},b={class:"table table-striped jambo_table bulk_action table-bordered"},p=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Topup ID"),Object(o["createElementVNode"])("th",null,"Mitra"),Object(o["createElementVNode"])("th",null,"Deposit Grup"),Object(o["createElementVNode"])("th",null,"Payment Method"),Object(o["createElementVNode"])("th",{class:"text-end"},"Amount"),Object(o["createElementVNode"])("th",null,"Status"),Object(o["createElementVNode"])("th",null,"Tgl Konfirmasi"),Object(o["createElementVNode"])("th",null,"Action")])],-1),m={key:0},u=Object(o["createElementVNode"])("td",{colspan:"9",class:"text-center"}," Data tidak ditemukan ",-1),j=[u],O={scope:"row"},h=Object(o["createElementVNode"])("br",null,null,-1),g={class:"fw-bold"},V={class:"text-danger link-app text-11","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Taggal expired"},N={class:"text-end"},E=["onClick"],k=Object(o["createElementVNode"])("i",{class:"fa fa-pencil"},null,-1),_=[k],y=["onClick"],f=Object(o["createElementVNode"])("i",{class:"fa fa-times"},null,-1),v=[f];function B(e,t,a,u,k,f){const B=Object(o["resolveComponent"])("mitra-link-base"),w=Object(o["resolveComponent"])("statusbadge-base"),x=Object(o["resolveComponent"])("b-overlay"),C=Object(o["resolveComponent"])("paging-base");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",n,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])(x,{show:k.loading,rounded:"sm"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("table",b,[p,Object(o["createElementVNode"])("tbody",null,[k.data.length<=0&&!k.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",m,j)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(k.data,(t,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:a},[Object(o["createElementVNode"])("td",O,Object(o["toDisplayString"])((k.options.current_page-1)*k.options.per_page+a+1),1),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.trx_no)+" ",1),h,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$filters.dateTime(t.created_at)),1)]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(B,{mitra:t.mitra},null,8,["mitra"])]),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.details,t=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t},Object(o["toDisplayString"])(t.deposit_code)+" ("+Object(o["toDisplayString"])(e.$filters.currency(t.amount))+") ",1))),128))]),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.payment?t.payment.name:"")+" ",1),Object(o["createElementVNode"])("div",g,Object(o["toDisplayString"])(t.payment?t.payment.bank_name:""),1),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("span",V," Expired: "+Object(o["toDisplayString"])(e.$filters.dateTime(t.expired_at)),1)])]),Object(o["createElementVNode"])("td",N,Object(o["toDisplayString"])(e.$filters.currency(t.total_payment).replace(".",",")),1),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(w,{status:t.status,label:t.status_label},null,8,["status","label"])]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.confirmed_at?e.$filters.dateTime(t.confirmed_at):"-"),1),Object(o["createElementVNode"])("td",null,[0==t.status?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-sm btn-primary btn-action-list",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Approve",onClick:e=>f.approveItem(t)},_,8,E)):Object(o["createCommentVNode"])("",!0),0==t.status?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:1,class:"btn btn-sm btn-danger btn-action-list",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Reject",onClick:e=>f.cancelItem(t)},v,8,y)):Object(o["createCommentVNode"])("",!0)])]))),128))])])])]),_:1},8,["show"])])]),k.data.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:0,modelValue:k.options.current_page,"onUpdate:modelValue":t[0]||(t[0]=e=>k.options.current_page=e),options:k.options},null,8,["modelValue","options"])):Object(o["createCommentVNode"])("",!0)])])])])}var w={data(){return{data:[],options:{current_page:1,total_row:0,per_page:1},search:{q:"",user_id:""},loading:!1}},mounted(){this.loadData()},computed:{moreParams(){return{page:this.options.current_page,q:this.search.q,user_id:this.search.user_id}}},watch:{"options.current_page":{handler:function(){this.loadData()}},"search.end_date":{handler:function(){this.loadData()}}},methods:{setMitra(e){this.search.user_id=e?e.id:""},loadData(){this.loading=!0,this.$axios.get("deposit/topup-requests/list",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},approveItem(e){this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:"Approve"}).then(t=>{t.isConfirmed&&this._changeStatus(e)})},cancelItem(e){this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:"Reject",confirmButtonColor:"red"}).then(t=>{t.isConfirmed&&this._changeStatus(e,"rejected")})},_changeStatus(e,t="approved"){this.$store.dispatch("loading",!0),this.$axios.post(`/deposit/topup-requests/${e.trx_no}/${t}`,{}).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}}},x=a("d959"),C=a.n(x);const D=C()(w,[["render",B]]);t["default"]=D}}]);