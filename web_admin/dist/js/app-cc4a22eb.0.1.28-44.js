(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-cc4a22eb"],{"18bc":function(e,t,a){"use strict";var o=a("7a23");const l={class:"col-md-12 col-sm-12"},s={class:"x_panel"},c={class:"x_content"},n={class:"table-responsive",style:{"min-height":"75vh"}},r={class:"row"},i={class:"col-sm-12"},d={class:"table-responsive"},m={class:"table table-striped jambo_table bulk_action table-bordered"},p=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"Action"),Object(o["createElementVNode"])("th",null,"Status"),Object(o["createElementVNode"])("th",null,[Object(o["createTextVNode"])("Mitra ID"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])("No Trx")]),Object(o["createElementVNode"])("th",null,[Object(o["createTextVNode"])("Waktu Booking"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])("Timelimit")]),Object(o["createElementVNode"])("th",null,[Object(o["createTextVNode"])("PNR"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])("Timelimit Ext")]),Object(o["createElementVNode"])("th",null,"Rute"),Object(o["createElementVNode"])("th",null,"Penumpang")])],-1),b={key:0},O=Object(o["createElementVNode"])("td",{colspan:"11",class:"text-center"}," Data tidak ditemukan ",-1),h=[O],j={class:"px-0 text-center"},u=Object(o["createElementVNode"])("i",{class:"fa fa-times"},null,-1),g={style:{"min-width":"100px"}},V={class:""},N={class:"text-danger"},y={style:{"min-width":"110px"}},E={class:"text-danger"},_={class:"",style:{"min-width":"150px"}},f={class:""},x=["src"],v={class:"d-flex"},k=Object(o["createElementVNode"])("div",{class:"px-3"},"-",-1),D={class:"pe-2"},S={class:""};function C(e,t,a,O,C,w){const $=Object(o["resolveComponent"])("b-button"),B=Object(o["resolveComponent"])("statusbadge-base"),T=Object(o["resolveComponent"])("b-overlay"),M=Object(o["resolveComponent"])("paging-base"),P=Object(o["resolveComponent"])("ChangeOperator"),A=Object(o["resolveComponent"])("modal-base"),I=Object(o["resolveComponent"])("ChangeStatus");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])(T,{show:C.loading,rounded:"sm"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("table",m,[p,Object(o["createElementVNode"])("tbody",null,[C.data.length<=0&&!C.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",b,h)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(C.data,(t,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:a},[Object(o["createElementVNode"])("td",j,[Object(o["createVNode"])($,{size:"sm",title:"cancel",variant:"danger",onClick:e=>w.cancel(t)},{default:Object(o["withCtx"])(()=>[u]),_:2},1032,["onClick"])]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(B,{status:t.status_label,label:t.status_label},null,8,["status","label"])]),Object(o["createElementVNode"])("td",g,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(t.mmid),1),Object(o["createElementVNode"])("div",V,Object(o["toDisplayString"])(t.trx_no),1)]),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$filters.dateTime(t.created_at))+" ",1),Object(o["createElementVNode"])("div",N,Object(o["toDisplayString"])(e.$filters.dateTime(t.expired_at)),1)]),Object(o["createElementVNode"])("td",y,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.pnr)+" ",1),Object(o["createElementVNode"])("div",E,Object(o["toDisplayString"])(e.$filters.dateTime(t.expired_at_external)),1)]),Object(o["createElementVNode"])("td",_,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.details,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"d-flex mb-2 align-items-center justify-content-between",key:t},[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("img",{src:e.image_url,style:{width:"25px"},class:"pr-3"},null,8,x),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.airline_code),1)]),Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.std),1),k,Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.sta),1)])]))),128))]),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.passengers,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"d-flex mb-2 align-items-center justify-content-start",key:t},[Object(o["createElementVNode"])("div",D,Object(o["toDisplayString"])(t+1)+". ",1),Object(o["createElementVNode"])("div",S,Object(o["toDisplayString"])(e.title)+" "+Object(o["toDisplayString"])(e.first_name)+" "+Object(o["toDisplayString"])(e.last_name)+" ("+Object(o["toDisplayString"])(e.passanger_type)+") ",1)]))),128))])]))),128))])])])]),_:1},8,["show"])])]),C.data.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(M,{key:0,modelValue:C.options.current_page,"onUpdate:modelValue":t[0]||(t[0]=e=>C.options.current_page=e),options:C.options},null,8,["modelValue","options"])):Object(o["createCommentVNode"])("",!0)])])]),Object(o["createVNode"])(A,{modelValue:C.modalOp,"onUpdate:modelValue":t[3]||(t[3]=e=>C.modalOp=e),size:"modal-lg"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(P,{data:C.modalData,users:C.users,onCancel:t[1]||(t[1]=()=>{C.modalOp=!1}),onSave:t[2]||(t[2]=()=>{C.modalOp=!1,this.searchData()})},null,8,["data","users"])]),_:1},8,["modelValue"]),Object(o["createVNode"])(A,{modelValue:C.modalStatus,"onUpdate:modelValue":t[6]||(t[6]=e=>C.modalStatus=e),size:"modal-lg"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(I,{data:C.modalData,onCancel:t[4]||(t[4]=()=>{C.modalStatus=!1}),onSave:t[5]||(t[5]=()=>{C.modalStatus=!1,this.searchData()})},null,8,["data"])]),_:1},8,["modelValue"])])}a("14d9");var w=a("b166"),$=a("b779"),B=a("2977"),T={components:{ChangeOperator:$["a"],ChangeStatus:B["a"]},props:{typeProduct:{type:String,default:"pascabayar"}},data(){return{modalOp:!1,modalStatus:!1,modalData:{},categories:[],airlines:[],data:[],users:[],options:{current_page:1,total_row:0,per_page:200},search:{q:"",start_date:Object(w["a"])(new Date,"yyyy-MM-dd"),end_date:Object(w["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:""},loading:!1}},mounted(){this.search.type=this.typeProduct,this.searchData(),this.loadUsers(),this.loadAirlines()},computed:{moreParams(){return{page:this.options.current_page,per_page:this.options.per_page,status:1}}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{goToIssued(e){this.selectedOp(e),this.$router.push({name:"app.airlines.issued",params:{id:e.id}})},selectedOp(e){let t={operator_id:"self"},a=()=>this.$axios.post(`/airlines/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},cancel(e){let t="Yes, Cancel";this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:t}).then(t=>{if(t.isConfirmed){let t={cancel_type:1};this.$axios.post(`/airlines/${e.id}/cancel`,t).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}})},changeOp(e){this.modalData=e,this.modalOp=!0},changeStatus(e){this.modalData=e,this.modalStatus=!0},searchData(){this.options.current_page=1,this.loadData()},setMitra(e){this.search.user_id=e?e.id:""},setStatus(e){this.search.status=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/airlines",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadUsers(){this.$axios.get("/users",{params:{role:"operator"}}).then(e=>{this.loading=!1,this.users=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadAirlines(){this.$axios.get("/products",{params:{parents:"AIRD,AIRI"}}).then(e=>{this.loading=!1,this.airlines=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}}},M=a("d959"),P=a.n(M);const A=P()(T,[["render",C]]);t["a"]=A},e8fb:function(e,t,a){"use strict";var o=a("7a23");const l={class:"col-md-12 col-sm-12"},s={class:"x_panel"},c={class:"x_content"},n={class:"table-responsive",style:{"min-height":"75vh"}},r={class:"row"},i={class:"col-sm-12"},d={class:"table-responsive"},m={class:"table table-striped jambo_table bulk_action table-bordered"},p=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"Action"),Object(o["createElementVNode"])("th",null,"Status"),Object(o["createElementVNode"])("th",null,[Object(o["createTextVNode"])("Mitra ID"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])("No Trx")]),Object(o["createElementVNode"])("th",null,[Object(o["createTextVNode"])("Waktu Booking"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])("Timelimit")]),Object(o["createElementVNode"])("th",null,"PNR"),Object(o["createElementVNode"])("th",null,"Rute"),Object(o["createElementVNode"])("th",null,"Penumpang")])],-1),b={key:0},O=Object(o["createElementVNode"])("td",{colspan:"11",class:"text-center"}," Data tidak ditemukan ",-1),h=[O],j={class:"px-0 text-center"},u=Object(o["createElementVNode"])("i",{class:"fa fa-times"},null,-1),g={style:{"min-width":"100px"}},V={class:""},N={class:"text-danger"},y={style:{"min-width":"110px"}},E={class:"",style:{"min-width":"150px"}},_={class:""},f=["src"],x={class:"d-flex"},v=Object(o["createElementVNode"])("div",{class:"px-3"},"-",-1),k={class:"pe-2"},D={class:""};function S(e,t,a,O,S,C){const w=Object(o["resolveComponent"])("b-button"),$=Object(o["resolveComponent"])("statusbadge-base"),B=Object(o["resolveComponent"])("b-overlay"),T=Object(o["resolveComponent"])("paging-base"),M=Object(o["resolveComponent"])("ChangeOperator"),P=Object(o["resolveComponent"])("modal-base"),A=Object(o["resolveComponent"])("ChangeStatus");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])(B,{show:S.loading,rounded:"sm"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("table",m,[p,Object(o["createElementVNode"])("tbody",null,[S.data.length<=0&&!S.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",b,h)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(S.data,(t,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:a},[Object(o["createElementVNode"])("td",j,[Object(o["createVNode"])(w,{size:"sm",title:"cancel",variant:"danger",onClick:e=>C.cancel(t)},{default:Object(o["withCtx"])(()=>[u]),_:2},1032,["onClick"])]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])($,{status:t.status_label,label:t.status_label},null,8,["status","label"])]),Object(o["createElementVNode"])("td",g,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(t.mmid),1),Object(o["createElementVNode"])("div",V,Object(o["toDisplayString"])(t.trx_no),1)]),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$filters.dateTime(t.created_at))+" ",1),Object(o["createElementVNode"])("div",N,Object(o["toDisplayString"])(e.$filters.dateTime(t.expired_at)),1)]),Object(o["createElementVNode"])("td",y,Object(o["toDisplayString"])(t.pnr),1),Object(o["createElementVNode"])("td",E,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.details,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"d-flex mb-2 align-items-center justify-content-between",key:t},[Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("img",{src:e.image_url,style:{width:"25px"},class:"pr-3"},null,8,f),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.airline_code),1)]),Object(o["createElementVNode"])("div",x,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.std),1),v,Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.sta),1)])]))),128))]),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.passengers,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"d-flex mb-2 align-items-center justify-content-start",key:t},[Object(o["createElementVNode"])("div",k,Object(o["toDisplayString"])(t+1)+". ",1),Object(o["createElementVNode"])("div",D,Object(o["toDisplayString"])(e.title)+" "+Object(o["toDisplayString"])(e.first_name)+" "+Object(o["toDisplayString"])(e.last_name)+" ("+Object(o["toDisplayString"])(e.passanger_type)+") ",1)]))),128))])]))),128))])])])]),_:1},8,["show"])])]),S.data.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(T,{key:0,modelValue:S.options.current_page,"onUpdate:modelValue":t[0]||(t[0]=e=>S.options.current_page=e),options:S.options},null,8,["modelValue","options"])):Object(o["createCommentVNode"])("",!0)])])]),Object(o["createVNode"])(P,{modelValue:S.modalOp,"onUpdate:modelValue":t[3]||(t[3]=e=>S.modalOp=e),size:"modal-lg"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(M,{data:S.modalData,users:S.users,onCancel:t[1]||(t[1]=()=>{S.modalOp=!1}),onSave:t[2]||(t[2]=()=>{S.modalOp=!1,this.searchData()})},null,8,["data","users"])]),_:1},8,["modelValue"]),Object(o["createVNode"])(P,{modelValue:S.modalStatus,"onUpdate:modelValue":t[6]||(t[6]=e=>S.modalStatus=e),size:"modal-lg"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(A,{data:S.modalData,onCancel:t[4]||(t[4]=()=>{S.modalStatus=!1}),onSave:t[5]||(t[5]=()=>{S.modalStatus=!1,this.searchData()})},null,8,["data"])]),_:1},8,["modelValue"])])}a("14d9");var C=a("b166"),w=a("b779"),$=a("2977"),B={components:{ChangeOperator:w["a"],ChangeStatus:$["a"]},props:{typeProduct:{type:String,default:"pascabayar"}},data(){return{modalOp:!1,modalStatus:!1,modalData:{},categories:[],airlines:[],data:[],users:[],options:{current_page:1,total_row:0,per_page:200},search:{q:"",start_date:Object(C["a"])(new Date,"yyyy-MM-dd"),end_date:Object(C["a"])(new Date,"yyyy-MM-dd"),user_id:"",status:"",airline:""},loading:!1}},mounted(){this.search.type=this.typeProduct,this.searchData(),this.loadUsers(),this.loadAirlines()},computed:{moreParams(){return{page:this.options.current_page,per_page:this.options.per_page,status:1}}},watch:{"options.current_page":{handler:function(){this.loadData()}}},methods:{goToIssued(e){this.selectedOp(e),this.$router.push({name:"app.airlines.issued",params:{id:e.id}})},selectedOp(e){let t={operator_id:"self"},a=()=>this.$axios.post(`/airlines/${e.id}/change-operator`,t);this.$store.dispatch("loading",!0),a().then(e=>{this.$root.notif(e.message),this.$emit("save"),this.form={}}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"}),this.getCaptcha()}).finally(()=>{this.$store.dispatch("loading",!1)})},cancel(e){let t="Yes, Cancel";this.$swal.fire({width:350,title:"Yakin?",showCancelButton:!0,confirmButtonText:t}).then(t=>{if(t.isConfirmed){let t={cancel_type:2};this.$axios.post(`/airlines/${e.id}/cancel`,t).then(e=>{this.$root.notif(e.message),this.loadData()}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}})},changeOp(e){this.modalData=e,this.modalOp=!0},changeStatus(e){this.modalData=e,this.modalStatus=!0},searchData(){this.options.current_page=1,this.loadData()},setMitra(e){this.search.user_id=e?e.id:""},setStatus(e){this.search.status=e?e.code:""},loadData(){this.loading=!0,this.$axios.get("/airlines",{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total,this.options.per_page=e.data.meta.per_page}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})},loadUsers(){this.$axios.get("/users",{params:{role:"operator"}}).then(e=>{this.loading=!1,this.users=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},loadAirlines(){this.$axios.get("/products",{params:{parents:"AIRD,AIRI"}}).then(e=>{this.loading=!1,this.airlines=e.data.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})}}},T=a("d959"),M=a.n(T);const P=M()(B,[["render",S]]);t["a"]=P}}]);