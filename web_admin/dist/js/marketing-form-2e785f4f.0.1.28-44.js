(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["marketing-form-2e785f4f"],{"4e3a":function(e,t,l){"use strict";l.r(t);l("14d9");var a=l("7a23");const o={class:"col-md-12 col-sm-12"},c={class:"x_panel"},r={class:"x_title"},s={class:"nav navbar-right panel_toolbox"},n=Object(a["createElementVNode"])("i",{class:"fa fa-arrow-left"},null,-1),m=Object(a["createElementVNode"])("div",{class:"clearfix"},null,-1),i={class:"x_content"},d=Object(a["createElementVNode"])("br",null,null,-1),b={class:"item form-group"},p=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Nama "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),u={class:"col-md-6 col-sm-6"},j={key:0,class:"p-error"},O={class:"item form-group"},V=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Email "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),N={class:"col-md-6 col-sm-6"},f={key:0,class:"p-error"},h={class:"item form-group"},E=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Phone "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),g={class:"col-md-6 col-sm-6"},k={key:0,class:"p-error"},v={class:"item form-group"},y=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Password "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),w={class:"col-md-6 col-sm-6"},x={key:0,class:"p-error"},C={class:"item form-group"},$=Object(a["createElementVNode"])("label",{class:"col-form-label col-md-3 col-sm-3 label-align",for:"first-name"},[Object(a["createTextVNode"])("Mitra "),Object(a["createElementVNode"])("span",{class:"required"},"*")],-1),B={class:"col-md-6 col-sm-6"},q=Object(a["createElementVNode"])("i",{class:"fa fa-plus"},null,-1),_={class:"table"},S=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",null,"No"),Object(a["createElementVNode"])("td",null,"Mitra"),Object(a["createElementVNode"])("td",null,"Action")])],-1),T=["onClick"],D=Object(a["createElementVNode"])("i",{class:"fa fa-trash"},null,-1),U=[D],F=Object(a["createElementVNode"])("div",{class:"ln_solid"},null,-1),z={class:"item form-group"},M={class:"col-md-6 col-sm-6 offset-md-3"},J=Object(a["createElementVNode"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function P(e,t,l,D,P,A){const K=Object(a["resolveComponent"])("Field"),L=Object(a["resolveComponent"])("select-mitra-base"),G=Object(a["resolveComponent"])("Form",!0);return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("h2",null,Object(a["toDisplayString"])(A.title),1),Object(a["createElementVNode"])("ul",s,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:t[0]||(t[0]=t=>e.$router.back())},[n,Object(a["createTextVNode"])(" Kembali ")])])]),m]),Object(a["createElementVNode"])("div",i,[d,Object(a["createVNode"])(G,{onSubmit:A.onSubmit,"validation-schema":P.schema,class:"signin-form"},{default:Object(a["withCtx"])(({errors:l})=>[Object(a["createElementVNode"])("div",b,[p,Object(a["createElementVNode"])("div",u,[Object(a["createVNode"])(K,{name:"name",class:Object(a["normalizeClass"])(["form-control",[{"p-error":l.name}]]),modelValue:P.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>P.form.name=e),type:"text"},null,8,["modelValue","class"]),l.name?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",j," *"+Object(a["toDisplayString"])(l.name),1)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",O,[V,Object(a["createElementVNode"])("div",N,[Object(a["createVNode"])(K,{name:"email",class:Object(a["normalizeClass"])(["form-control",[{"p-error":l.email}]]),modelValue:P.form.email,"onUpdate:modelValue":t[2]||(t[2]=e=>P.form.email=e),type:"text"},null,8,["modelValue","class"]),l.email?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",f," *"+Object(a["toDisplayString"])(l.email),1)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",h,[E,Object(a["createElementVNode"])("div",g,[Object(a["createVNode"])(K,{name:"phone",class:Object(a["normalizeClass"])(["form-control",[{"p-error":l.phone}]]),modelValue:P.form.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>P.form.phone=e),type:"text"},null,8,["modelValue","class"]),l.phone?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",k," *"+Object(a["toDisplayString"])(l.phone),1)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",v,[y,Object(a["createElementVNode"])("div",w,[Object(a["createVNode"])(K,{name:"password",class:Object(a["normalizeClass"])(["form-control",[{"p-error":l.password}]]),modelValue:P.form.password,"onUpdate:modelValue":t[4]||(t[4]=e=>P.form.password=e),type:"password"},null,8,["modelValue","class"]),l.password?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",x," *"+Object(a["toDisplayString"])(l.password),1)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",C,[$,Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("button",{class:"btn btn-sm btn-success",type:"button",onClick:t[5]||(t[5]=e=>P.mitra.push({id:0}))},[q,Object(a["createTextVNode"])(" Tambah ")]),Object(a["createElementVNode"])("table",_,[S,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(P.mitra,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t+1),1),Object(a["createElementVNode"])("td",null,[Object(a["createVNode"])(L,{modelValue:e.mitra_id,"onUpdate:modelValue":t=>e.mitra_id=t,value:e,idType:"mitra_id"},null,8,["modelValue","onUpdate:modelValue","value"])]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("button",{type:"button",onClick:e=>A.removeMitra(t),class:"btn btn-danger"},U,8,T)])]))),128))])])])]),F,Object(a["createElementVNode"])("div",z,[Object(a["createElementVNode"])("div",M,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[6]||(t[6]=t=>e.$router.back())}," Cancel "),J])])]),_:1},8,["onSubmit","validation-schema"])])])])}var A=l("7bb1"),K=l("506a"),L={components:{Form:A["b"],Field:A["a"]},data(){const e=K["a"]({name:K["b"]().required(),email:K["b"]().required().email(),phone:K["b"]().required(),password:this.$route.params.id?K["b"]():K["b"]().required().min(6)});return{id:"",g_qr:"",mitra:[],form:{name:"",email:"",phone:"",password:"",role:""},old:{},schema:e,roles:[]}},computed:{title(){return this.id?"Ubah":"Tambah"}},methods:{removeMitra(e){this.mitra.splice(e,1)},reset(){this.form={name:"",email:"",phone:"",password:"",role:""}},loadData(){this.$axios.get(`/marketing/${this.id}?with_q_qr=1`).then(e=>{let t=Object.assign({},e.data);this.old=t,this.form=t,t.mitra&&(this.mitra=t.mitra)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{})},onSubmit(e){e.mitra=this.mitra,this.$store.dispatch("loading",!0);let t=()=>this.$axios.post("/marketing",e);this.id&&(t=()=>this.$axios.put("/marketing/"+this.id,e)),t().then(e=>{this.$router.push({name:"app.marketing.list"}),this.$root.notif(e.message)}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}},mounted(){this.$route.params.id&&(this.id=this.$route.params.id,this.loadData())}},G=l("d959"),H=l.n(G);const I=H()(L,[["render",P]]);t["default"]=I}}]);