(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-suppliers-fc3964f5"],{dbf0:function(e,t,o){"use strict";o.r(t);var c=o("7a23");const a={class:"col-md-12 col-sm-12"},r={class:"x_panel"},l={class:"x_content"},s={class:"table-responsive",style:{"min-height":"75vh"}},i={class:"row"},n={class:"col-sm-12 col-md-6 col-lg-3"},p={class:"col-sm-12 col-md-2 col-lg-2 mb-2"},d={class:"col-sm-12 col-md-2 col-lg-2"},m={class:"col-sm-12 col-md-2 col-lg-2"},b={class:"col-sm-12 col-md-2 col-lg-2"},h={class:"input-group"},O={key:0},u=Object(c["createElementVNode"])("div",{class:"pt-3"},[Object(c["createElementVNode"])("div",{class:"alert alert-warning app-alert",role:"alert"},[Object(c["createElementVNode"])("div",{class:"h6 text-center"},[Object(c["createElementVNode"])("i",{class:"fa fa-info-circle"}),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" Pilih supplier dan tipe terlebih dahulu,"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" kemudian klik cari untuk melihat data ")])])],-1),j=[u],y={key:1},g={class:"row"},V={class:"col-sm-12 text-end"},N={class:"row"},k={class:"col-sm-12"},_={class:"table-responsive"},E={class:"table table-striped jambo_table bulk_action table-bordered"},f=Object(c["createElementVNode"])("th",null,"#",-1),C=Object(c["createElementVNode"])("th",null,"Kode",-1),B=Object(c["createElementVNode"])("th",null,"Name",-1),v=Object(c["createElementVNode"])("th",null,"Produk",-1),A=Object(c["createElementVNode"])("th",null,"Operator",-1),x=Object(c["createElementVNode"])("th",null,"Last Sync",-1),D={key:0},S={key:1},w={key:2},P={key:3},$=Object(c["createElementVNode"])("th",null,"Status",-1),R={key:0},T=Object(c["createElementVNode"])("td",{colspan:"9",class:"text-center"}," Data tidak ditemukan ",-1),Y=[T],U={scope:"row"},q={class:"text-10",style:{width:"250px"}},M=["onUpdate:modelValue"],K=["onUpdate:modelValue"],L=["value"],F={style:{width:"90px"}},J={key:0},z={key:1},H={key:2},G={key:3},I=Object(c["createElementVNode"])("br",null,null,-1),Q=Object(c["createElementVNode"])("br",null,null,-1),W=Object(c["createElementVNode"])("br",null,null,-1),X=Object(c["createElementVNode"])("br",null,null,-1);function Z(e,t,o,u,T,Z){const ee=Object(c["resolveComponent"])("select-supplier-user-base"),te=Object(c["resolveComponent"])("select-base"),oe=Object(c["resolveComponent"])("b-button"),ce=Object(c["resolveComponent"])("b-popover"),ae=Object(c["resolveComponent"])("b-overlay"),re=Object(c["resolveComponent"])("paging-base");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",n,[Object(c["createVNode"])(ee,{onOnChange:Z.setSupplierUser,product_code:"PPOB"},null,8,["onOnChange"])]),Object(c["createElementVNode"])("div",p,[Object(c["createVNode"])(te,{options:T.types,placeholder:"Pilih tipe",onOnChange:Z.setType},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(te,{options:Z.categoryOptions,placeholder:"Semua Produk",onOnChange:Z.setCategory},null,8,["options","onOnChange"])]),Object(c["createElementVNode"])("div",m,[Object(c["createVNode"])(te,{options:T.operatorOptions,placeholder:"Semua operator",modelValue:T.search.operator,"onUpdate:modelValue":t[0]||(t[0]=e=>T.search.operator=e)},null,8,["options","modelValue"])]),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",h,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"cari...","onUpdate:modelValue":t[1]||(t[1]=e=>T.search.q=e),onKeyup:t[2]||(t[2]=Object(c["withKeys"])((...e)=>Z.searchData&&Z.searchData(...e),["enter"]))},null,544),[[c["vModelText"],T.search.q]]),Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>Z.searchData&&Z.searchData(...e))}," Cari ")])])]),T.submited?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,j)),T.submited?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",y,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(oe,{variant:"success",onClick:Z.save},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Simpan Perubahan ")]),_:1},8,["onClick"])])]),Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",k,[Object(c["createVNode"])(ae,{show:T.loading,rounded:"sm"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("table",E,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[f,C,B,v,A,x,"PRABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",D," Nominal ")):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",S," Harga ")):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",w," Modal ")):Object(c["createCommentVNode"])("",!0),"PASCABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",P," Admin ")):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])("PASCABAYAR"==T.options.type?"Komisi":"Markup"),1),$])]),Object(c["createElementVNode"])("tbody",null,[T.data.length<=0&&!T.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",R,Y)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(T.data,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[Object(c["createElementVNode"])("td",U,Object(c["toDisplayString"])((T.options.current_page-1)*T.options.per_page+o+1),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.code),1),Object(c["createElementVNode"])("td",q,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-control form-control-sm","onUpdate:modelValue":e=>t.name=e},null,8,M),[[c["vModelText"],t.name]])]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":e=>t.product_code=e},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Z.categoryOptions,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{value:e.code,key:t},Object(c["toDisplayString"])(e.name),9,L))),128))],8,K),[[c["vModelSelect"],t.product_code]])]),Object(c["createElementVNode"])("td",F,Object(c["toDisplayString"])(t.operator),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.dateTime(t.last_sync)),1),"PRABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",J,Object(c["toDisplayString"])(t.nominal?e.$filters.currency(t.nominal):"-"),1)):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",z,Object(c["toDisplayString"])(t.price?e.$filters.currency(t.price):0),1)):Object(c["createCommentVNode"])("",!0),"PRABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",H,Object(c["toDisplayString"])(t.harga_modal?e.$filters.currency(t.harga_modal):"-"),1)):Object(c["createCommentVNode"])("",!0),"PASCABAYAR"==T.options.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",G,Object(c["toDisplayString"])(t.admin?e.$filters.currency(t.admin):"-"),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),I,Object(c["createVNode"])(oe,{id:"pop"+o,class:"badge"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("detail")]),_:2},1032,["id"]),Object(c["createVNode"])(ce,{target:"pop"+o,triggers:"focus"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" full : "+Object(c["toDisplayString"])(t.komisi_full?e.$filters.currency(t.komisi_full):0)+" ",1),Q,Object(c["createTextVNode"])(" core : "+Object(c["toDisplayString"])(t.komisi_core?e.$filters.currency(t.komisi_core):0)+" ",1),W,Object(c["createTextVNode"])(" broker : "+Object(c["toDisplayString"])(t.komisi_broker?e.$filters.currency(t.komisi_broker):0)+" ",1),X,Object(c["createTextVNode"])(" mitra : "+Object(c["toDisplayString"])(t.komisi_mitra?e.$filters.currency(t.komisi_mitra):0),1)]),_:2},1032,["target"])]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(oe,{variant:t.is_open?"primary":"danger",size:"sm",onClick:e=>t.is_open=!t.is_open},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.is_open?"Open":"Close"),1)]),_:2},1032,["variant","onClick"])])]))),128))])])])]),_:1},8,["show"])])]),T.data.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(re,{key:0,modelValue:T.options.current_page,"onUpdate:modelValue":t[4]||(t[4]=e=>T.options.current_page=e),options:T.options},null,8,["modelValue","options"])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])])])])}var ee={data(){return{data:[],options:{current_page:1,total_row:0,per_page:50,type:""},search:{q:"",supplier_code:"",type:"",category:"",operator:""},loading:!1,submited:!1,operatorOptions:[],categories:[],types:[{code:"PASCABAYAR",name:"PASCABAYAR"},{code:"PRABAYAR",name:"PRABAYAR"}]}},mounted(){this.loadCategories()},computed:{moreParams(){return{page:this.options.current_page,per_page:this.options.per_page,q:this.search.q,supplier_code:this.search.supplier_code,operator:this.search.operator?this.search.operator.id:"",type:this.search.type,category:this.search.category,supplier_user_id:this.search.supplier_user_id}},categoryOptions(){if(this.search.type){let e=this.categories.filter(e=>e.type==this.search.type);return e}return this.categories},isAdmin(){return!!(this.user&&this.user.role&&this.user.role.indexOf("admin")>-1)}},watch:{"options.current_page":{handler:function(){this.loadData()}},"search.start_date":{handler:function(){this.loadData()}},"search.category":{handler:function(){this.search.category?this.loadOperator():this.operatorOptions=[]}}},methods:{setType(e){this.search.type=e?e.code:""},loadCategories(){this.loadingCategories=!0,this.$axios.get("/ppob/product-categories",{params:this.moreParams}).then(e=>{this.categories=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},loadOperator(){this.loadingCategories=!0,this.$axios.get("/ppob/product-operator",{params:this.moreParams}).then(e=>{this.operatorOptions=e.data}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loadingCategories=!1})},setCategory(e){this.search.category=e?e.code:""},searchData(){this.search.supplier_code?this.search.type?(this.loadData(),this.submited=!0):this.$root.notif("Pilih tipe dahulu",{type:"error",position:"top"}):this.$root.notif("Pilih supplier terlebih dahulu",{type:"error",position:"top"})},setSupplierUser(e){e?(this.search.supplier_code=e.supplier_code,this.search.supplier_user_id=e.id):(this.search.supplier_code="",this.search.supplier_user_id="")},loadData(){this.search.supplier_code?(this.loading=!0,this.$axios.get(`/suppliers/${this.search.supplier_code}/products`,{params:this.moreParams}).then(e=>{this.loading=!1,this.data=e.data.data,this.options.total_row=e.data.meta.total;let t=Object.assign({},this.search);this.options.type=t.type}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.loading=!1})):this.$root.notif("Pilih supplier terlebih dahulu",{type:"error",position:"top"})},save(){let e=this.data.map(e=>({product_ppob_id:e.product_ppob_id,code:e.code,product_code:e.product_code,type:this.search.type,name:e.name,is_open:e.is_open?1:0}));this.$store.dispatch("loading",!0),this.$axios.put(`/suppliers/${this.search.supplier_code}/products`,{products:e}).then(e=>{this.$root.notif(e.message,{type:"info",position:"top"})}).catch(e=>{this.$root.notif(e.message,{type:"error",position:"top"})}).finally(()=>{this.$store.dispatch("loading",!1)})}}},te=o("d959"),oe=o.n(te);const ce=oe()(ee,[["render",Z]]);t["default"]=ce}}]);